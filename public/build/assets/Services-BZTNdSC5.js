import{a as Fe,r as p,u as Pe,b as O,j as e}from"./app-DkoREvhI.js";import{c as De,B as c}from"./createLucideIcon-CId_UG7q.js";import{L as n,I as d}from"./check-D-XOZEEh.js";import{C as Te,a as Oe,b as ke,c as Ae,d as Ue,T as Ee,e as Me,f as k,g as z,h as Ie,i as h,B as ne}from"./badge-D8sRwdKu.js";import{t as ce,D as R,a as B,P as V,b as H,c as L,d as $,e as X,g as f,h as N,i as v,j as y,k as r,f as q,S as ze,F as de,C as Re,l as Be,T as Ve,A as He}from"./index-DstjHtLW.js";import{X as G,A as Le}from"./AuthenticatedLayout-XJm90pwO.js";import{C as $e}from"./chevron-right-BeXJKm7K.js";/* empty css            */import"./index-C3q6v-G_.js";import"./index-_cVg8tae.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],qe=De("info",Xe);function Ge(){const{services:o,filters:x,flash:_}=Fe().props,[w,J]=p.useState(x.search||""),[u,K]=p.useState(x.type||"all"),[j,Q]=p.useState(x.fulfillment_type||"all"),[C,W]=p.useState(x.sort_by||"created_at"),[b,A]=p.useState(x.sort_direction||"desc"),[oe,U]=p.useState(!1),[pe,E]=p.useState(!1),[me,F]=p.useState(!1),[P,Y]=p.useState(null),[Z,M]=p.useState(x.page||1),[S,ee]=p.useState([]),{data:l,setData:i,post:xe,put:he,processing:se,errors:a,reset:I,clearErrors:te}=Pe({name:"",description:"",type:"fixed",fulfillment_type:"direct",price:"",unit_name:"",options:[{name:"",price:""}]});p.useEffect(()=>{_?.success&&ce.success(_.success),_?.error&&ce.error(_.error)},[_]),p.useEffect(()=>{const s=setTimeout(()=>{ue()},500);return()=>clearTimeout(s)},[w,u,j,C,b,Z]);const ue=()=>{O.get(route("services.index"),{search:w,type:u==="all"?"":u,fulfillment_type:j==="all"?"":j,sort_by:C,sort_direction:b,per_page:x.per_page,page:Z},{preserveState:!0,replace:!0})},je=s=>{C===s?A(b==="asc"?"desc":"asc"):(W(s),A("asc"))},ge=()=>{I(),te(),i({name:"",description:"",type:"fixed",fulfillment_type:"direct",price:"",unit_name:"",options:[{name:"",price:""}]}),U(!0)},fe=s=>{i({name:s.name,description:s.description||"",type:s.type,fulfillment_type:s.fulfillment_type,price:s.price||"",unit_name:s.unit_name||"",options:s.options||[{name:"",price:""}]}),te(),Y(s),E(!0)},Ne=s=>{Y(s),F(!0)},ve=s=>{s.preventDefault(),xe(route("services.store"),{onSuccess:()=>{U(!1),I()},onError:t=>{console.error(t)}})},ye=s=>{s.preventDefault(),he(route("services.update",P.id),{onSuccess:()=>{E(!1),I()},onError:t=>{console.error(t)}})},_e=()=>{O.delete(route("services.destroy",P.id),{onSuccess:()=>{F(!1)},onError:s=>{console.error(s)}})},Ce=()=>{J(""),K("all"),Q("all"),W("created_at"),A("desc"),M(1)},ae=s=>!s&&s!==0?"N/A":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(s),be=s=>s==="per_unit"?"Per Unit":s.charAt(0).toUpperCase()+s.slice(1),Se=s=>s.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),le=()=>{i("options",[...l.options,{name:"",price:""}])},ie=s=>{if(l.options.length>1){const t=[...l.options];t.splice(s,1),i("options",t)}},D=(s,t,m)=>{const g=[...l.options];g[s][t]=m,i("options",g)},we=s=>{S.includes(s)?ee(S.filter(t=>t!==s)):ee([...S,s])},T=({field:s,children:t})=>e.jsx(z,{className:"cursor-pointer",onClick:()=>je(s),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:t}),C===s&&e.jsx(He,{className:`h-3 w-3 ${b==="asc"?"rotate-180":""}`})]})}),re=s=>{if(!s)return null;const t=new URL(s,window.location.origin);return t.searchParams.set("search",w),t.searchParams.set("type",u==="all"?"":u),t.searchParams.set("fulfillment_type",j==="all"?"":j),t.searchParams.set("sort_by",C),t.searchParams.set("sort_direction",b),t.searchParams.set("per_page",x.per_page),t.pathname+"?"+t.searchParams.toString()};return e.jsx("div",{className:"container mx-auto py-2 px-4",children:e.jsxs(Te,{className:"mb-8",children:[e.jsx(Oe,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(ke,{className:"text-2xl font-bold",children:"Services"}),e.jsx(Ae,{children:"Manage your service offerings"})]}),e.jsxs(R,{open:oe,onOpenChange:U,children:[e.jsx(B,{asChild:!0,children:e.jsxs(c,{onClick:ge,className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"})," Add Service"]})}),e.jsxs(H,{className:"sm:max-w-[600px]",children:[e.jsxs(L,{children:[e.jsx($,{children:"Create New Service"}),e.jsx(X,{children:"Add a new service to your offerings"})]}),e.jsxs("form",{onSubmit:ve,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"name",className:"text-right",children:"Name *"}),e.jsx(d,{id:"name",value:l.name,onChange:s=>i("name",s.target.value),className:"col-span-3"}),a.name&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:a.name})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"description",className:"text-right",children:"Description"}),e.jsx(d,{id:"description",value:l.description,onChange:s=>i("description",s.target.value),className:"col-span-3"}),a.description&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:a.description})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"type",className:"text-right",children:"Type *"}),e.jsxs(f,{value:l.type,onValueChange:s=>i("type",s),children:[e.jsx(N,{className:"col-span-3",children:e.jsx(v,{placeholder:"Select type"})}),e.jsxs(y,{children:[e.jsx(r,{value:"fixed",children:"Fixed Price"}),e.jsx(r,{value:"per_unit",children:"Per Unit"}),e.jsx(r,{value:"selectable",children:"Selectable Options"})]})]}),a.type&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:a.type})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"fulfillment_type",className:"text-right",children:"Fulfillment *"}),e.jsxs(f,{value:l.fulfillment_type,onValueChange:s=>i("fulfillment_type",s),children:[e.jsx(N,{className:"col-span-3",children:e.jsx(v,{placeholder:"Select fulfillment"})}),e.jsxs(y,{children:[e.jsx(r,{value:"direct",children:"Direct"}),e.jsx(r,{value:"staff_assisted",children:"Staff Assisted"})]})]}),a.fulfillment_type&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:a.fulfillment_type})]}),l.type==="fixed"&&e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"price",className:"text-right",children:"Price *"}),e.jsx(d,{id:"price",type:"number",min:"0",step:"0.01",value:l.price,onChange:s=>i("price",s.target.value),className:"col-span-3"}),a.price&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:a.price})]}),l.type==="per_unit"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"unit_name",className:"text-right",children:"Unit Name *"}),e.jsx(d,{id:"unit_name",value:l.unit_name,onChange:s=>i("unit_name",s.target.value),className:"col-span-3"}),a.unit_name&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:a.unit_name})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"price",className:"text-right",children:"Price per Unit *"}),e.jsx(d,{id:"price",type:"number",min:"0",step:"0.01",value:l.price,onChange:s=>i("price",s.target.value),className:"col-span-3"}),a.price&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:a.price})]})]}),l.type==="selectable"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{className:"text-right",children:"Options *"}),e.jsxs("div",{className:"col-span-3 space-y-2",children:[l.options.map((s,t)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[e.jsx("div",{className:"col-span-5",children:e.jsx(d,{placeholder:"Option name",value:s.name,onChange:m=>D(t,"name",m.target.value)})}),e.jsx("div",{className:"col-span-5",children:e.jsx(d,{type:"number",placeholder:"Price",min:"0",step:"0.01",value:s.price,onChange:m=>D(t,"price",m.target.value)})}),e.jsx("div",{className:"col-span-2",children:e.jsx(c,{type:"button",variant:"outline",size:"sm",onClick:()=>ie(t),disabled:l.options.length<=1,className:"w-full",children:e.jsx(G,{className:"h-4 w-4"})})})]},t)),e.jsxs(c,{type:"button",variant:"outline",size:"sm",onClick:le,className:"mt-2",children:[e.jsx(V,{className:"h-4 w-4 mr-1"})," ","Add Option"]}),a.options&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.options})]})]})})]}),e.jsx(q,{children:e.jsx(c,{type:"submit",disabled:se,children:"Create Service"})})]})]})]})]})}),e.jsxs(Ue,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(d,{placeholder:"Search services...",value:w,onChange:s=>J(s.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{value:u,onValueChange:K,children:[e.jsxs(N,{className:"w-[180px]",children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),e.jsx(v,{placeholder:"Type"})]}),e.jsxs(y,{children:[e.jsx(r,{value:"all",children:"All Types"}),e.jsx(r,{value:"fixed",children:"Fixed Price"}),e.jsx(r,{value:"per_unit",children:"Per Unit"}),e.jsx(r,{value:"selectable",children:"Selectable"})]})]}),e.jsxs(f,{value:j,onValueChange:Q,children:[e.jsxs(N,{className:"w-[180px]",children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),e.jsx(v,{placeholder:"Fulfillment"})]}),e.jsxs(y,{children:[e.jsx(r,{value:"all",children:"All Fulfillments"}),e.jsx(r,{value:"direct",children:"Direct"}),e.jsx(r,{value:"staff_assisted",children:"Staff Assisted"})]})]}),e.jsxs(c,{variant:"outline",onClick:Ce,className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"})," Clear Sort & Filters"]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Ee,{children:[e.jsx(Me,{children:e.jsxs(k,{children:[e.jsx(z,{className:"w-8"}),e.jsx(T,{field:"name",children:"Name"}),e.jsx(T,{field:"type",children:"Type"}),e.jsx(T,{field:"fulfillment_type",children:"Fulfillment"}),e.jsx(T,{field:"price",children:"Price"}),e.jsx(z,{children:"Actions"})]})}),e.jsx(Ie,{children:o.data.length>0?o.data.map(s=>e.jsxs(e.Fragment,{children:[e.jsxs(k,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>we(s.id),children:[e.jsx(h,{children:s.type==="selectable"&&e.jsx(c,{variant:"ghost",size:"sm",children:S.includes(s.id)?e.jsx(Re,{className:"h-4 w-4"}):e.jsx($e,{className:"h-4 w-4"})})}),e.jsx(h,{className:"font-medium",children:s.name}),e.jsx(h,{children:e.jsxs(ne,{variant:"outline",children:[be(s.type),s.type==="per_unit"&&` (${s.unit_name})`]})}),e.jsx(h,{children:e.jsx(ne,{variant:"secondary",children:Se(s.fulfillment_type)})}),e.jsx(h,{children:s.type==="selectable"?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm",children:"Multiple options"}),e.jsx(qe,{className:"h-3 w-3 text-muted-foreground"})]}):ae(s.price)}),e.jsx(h,{onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(R,{open:pe&&P?.id===s.id,onOpenChange:t=>{t||E(!1)},children:[e.jsx(B,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>fe(s),children:e.jsx(Be,{className:"h-4 w-4"})})}),e.jsxs(H,{className:"sm:max-w-[600px]",children:[e.jsxs(L,{children:[e.jsx($,{children:"Edit Service"}),e.jsx(X,{children:"Update service information"})]}),e.jsxs("form",{onSubmit:ye,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"edit-name",className:"text-right",children:"Name *"}),e.jsx(d,{id:"edit-name",value:l.name,onChange:t=>i("name",t.target.value),className:"col-span-3"}),a.name&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:a.name})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"edit-description",className:"text-right",children:"Description"}),e.jsx(d,{id:"edit-description",value:l.description,onChange:t=>i("description",t.target.value),className:"col-span-3"}),a.description&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:a.description})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"edit-type",className:"text-right",children:"Type *"}),e.jsxs(f,{value:l.type,onValueChange:t=>i("type",t),children:[e.jsx(N,{className:"col-span-3",children:e.jsx(v,{placeholder:"Select type"})}),e.jsxs(y,{children:[e.jsx(r,{value:"fixed",children:"Fixed Price"}),e.jsx(r,{value:"per_unit",children:"Per Unit"}),e.jsx(r,{value:"selectable",children:"Selectable Options"})]})]}),a.type&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:a.type})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"edit-fulfillment_type",className:"text-right",children:"Fulfillment *"}),e.jsxs(f,{value:l.fulfillment_type,onValueChange:t=>i("fulfillment_type",t),children:[e.jsx(N,{className:"col-span-3",children:e.jsx(v,{placeholder:"Select fulfillment"})}),e.jsxs(y,{children:[e.jsx(r,{value:"direct",children:"Direct"}),e.jsx(r,{value:"staff_assisted",children:"Staff Assisted"})]})]}),a.fulfillment_type&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:a.fulfillment_type})]}),l.type==="fixed"&&e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"edit-price",className:"text-right",children:"Price *"}),e.jsx(d,{id:"edit-price",type:"number",min:"0",step:"0.01",value:l.price,onChange:t=>i("price",t.target.value),className:"col-span-3"}),a.price&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:a.price})]}),l.type==="per_unit"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"edit-unit_name",className:"text-right",children:"Unit Name *"}),e.jsx(d,{id:"edit-unit_name",value:l.unit_name,onChange:t=>i("unit_name",t.target.value),className:"col-span-3"}),a.unit_name&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:a.unit_name})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"edit-price",className:"text-right",children:"Price per Unit *"}),e.jsx(d,{id:"edit-price",type:"number",min:"0",step:"0.01",value:l.price,onChange:t=>i("price",t.target.value),className:"col-span-3"}),a.price&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:a.price})]})]}),l.type==="selectable"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{className:"text-right",children:"Options *"}),e.jsxs("div",{className:"col-span-3 space-y-2",children:[l.options.map((t,m)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[e.jsx("div",{className:"col-span-5",children:e.jsx(d,{placeholder:"Option name",value:t.name,onChange:g=>D(m,"name",g.target.value)})}),e.jsx("div",{className:"col-span-5",children:e.jsx(d,{type:"number",placeholder:"Price",min:"0",step:"0.01",value:t.price,onChange:g=>D(m,"price",g.target.value)})}),e.jsx("div",{className:"col-span-2",children:e.jsx(c,{type:"button",variant:"outline",size:"sm",onClick:()=>ie(m),disabled:l.options.length<=1,className:"w-full",children:e.jsx(G,{className:"h-4 w-4"})})})]},m)),e.jsxs(c,{type:"button",variant:"outline",size:"sm",onClick:le,className:"mt-2",children:[e.jsx(V,{className:"h-4 w-4 mr-1"})," ","Add Option"]}),a.options&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.options})]})]})})]}),e.jsx(q,{children:e.jsx(c,{type:"submit",disabled:se,children:"Update Service"})})]})]})]}),e.jsxs(R,{open:me&&P?.id===s.id,onOpenChange:t=>{t||F(!1)},children:[e.jsx(B,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>Ne(s),children:e.jsx(Ve,{className:"h-4 w-4"})})}),e.jsxs(H,{children:[e.jsxs(L,{children:[e.jsx($,{children:"Confirm Deletion"}),e.jsxs(X,{children:["Are you sure you want to delete"," ",s.name,"? This action cannot be undone."]})]}),e.jsxs(q,{children:[e.jsx(c,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),e.jsx(c,{variant:"destructive",onClick:_e,children:"Delete"})]})]})]})]})})]},s.id),s.type==="selectable"&&S.includes(s.id)&&e.jsx(k,{children:e.jsx(h,{colSpan:6,className:"p-4 bg-muted/20",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Available Options:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:s.options&&s.options.map((t,m)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-background border rounded",children:[e.jsx("span",{children:t.name}),e.jsx("span",{className:"font-medium",children:ae(t.price)})]},m))})]})})},`${s.id}-options`)]})):e.jsx(k,{children:e.jsx(h,{colSpan:6,className:"text-center py-8",children:"No services found"})})})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",o.from," to ",o.to," of"," ",o.total," services"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>{const s=o.current_page-1;M(s),O.get(re(o.prev_page_url),{},{preserveState:!0})},disabled:!o.prev_page_url,children:"Previous"}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>{const s=o.current_page+1;M(s),O.get(re(o.next_page_url),{},{preserveState:!0})},disabled:!o.next_page_url,children:"Next"})]})]})]})]})})}Ge.layout=o=>e.jsx(Le,{children:o});export{Ge as default};
