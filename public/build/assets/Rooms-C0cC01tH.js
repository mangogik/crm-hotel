import{j as e,r as d,u as de,b as C,c as De}from"./app-D9VRIkeW.js";import{P as ve,T as be,t as fe}from"./index-C1Tk4ak8.js";import{X as Ee,d as ke,H as Me,A as Ie}from"./AuthenticatedLayout-YMI5X6zW.js";import{a as me,b as xe,c as he,C as ee,d as ue}from"./card-VJI4IhOW.js";import{S as Ae,a as V,b as U,c as L,d as Y,e as _,A as _e,D as A,g as O,h as F,i as P,j as pe,k as je}from"./select-D7qJEMU0.js";import{B as g}from"./button-CEil9SyP.js";import{P as ge}from"./plus-93vJ37x5.js";import{I as W,L as D}from"./label-CLzS-Qwo.js";import{F as Ne}from"./funnel-CNNfTh-5.js";import{T as B,a as N,b as Ce,c as Se,d as E,e as we}from"./table-CmSlE4gq.js";import{B as Te}from"./badge-BPShEb55.js";import{C as Oe}from"./chevron-down-DIy7m1ZU.js";import{I as Fe}from"./info-DmtQGUyf.js";/* empty css            */import"./index-BPx5MBbd.js";import"./index-D7CwUK-e.js";import"./index-B1E0rpQf.js";const Pe=({onAddRoom:r})=>e.jsx(me,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(xe,{className:"text-2xl font-bold",children:"Rooms"}),e.jsx(he,{children:"Manage your hotel rooms and room types"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(g,{onClick:r,className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"})," Add Room"]})})]})}),Be=({searchTerm:r,setSearchTerm:n,selectedStatus:u,setSelectedStatus:x,selectedTypeId:a,setSelectedTypeId:o,roomTypes:j=[],clearFilters:h})=>{const l=["all","available","occupied","maintenance"],m=s=>s&&s.charAt(0).toUpperCase()+s.slice(1);return e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ae,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(W,{placeholder:"Search by room number or type...",value:r,onChange:s=>n(s.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(V,{value:String(a||"all"),onValueChange:s=>o(s==="all"?"all":s),children:[e.jsxs(U,{className:"w-full md:w-[220px]",children:[e.jsx(Ne,{className:"mr-2 h-4 w-4"}),e.jsx(L,{placeholder:"Room Type"})]}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Types"}),j.map(s=>e.jsx(_,{value:String(s.id),children:s.name},s.id))]})]}),e.jsxs(V,{value:u,onValueChange:x,children:[e.jsxs(U,{className:"w-full md:w-[200px]",children:[e.jsx(Ne,{className:"mr-2 h-4 w-4"}),e.jsx(L,{placeholder:"Status"})]}),e.jsx(Y,{children:l.map(s=>e.jsx(_,{value:s,children:s==="all"?"All Statuses":m(s)},s))})]}),e.jsxs(g,{variant:"outline",onClick:h,className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"})," Clear"]})]})]})},$e=({room:r,isExpanded:n,onToggle:u,onEdit:x,onDelete:a})=>{const o=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(l??0),j=l=>{switch(l){case"available":return"success";case"occupied":return"destructive";case"maintenance":return"warning";default:return"outline"}},h=r.room_type;return e.jsxs(e.Fragment,{children:[e.jsxs(B,{className:"cursor-pointer hover:bg-muted/50",onClick:u,children:[e.jsx(N,{children:e.jsx(g,{variant:"ghost",size:"sm",children:n?e.jsx(Oe,{className:"h-4 w-4"}):e.jsx(ke,{className:"h-4 w-4"})})}),e.jsx(N,{className:"font-medium",children:r.room_number}),e.jsx(N,{children:h?.name??"-"}),e.jsx(N,{children:h?.capacity!=null?`${h.capacity} People`:"-"}),e.jsx(N,{children:h?.price_per_night!=null?o(h.price_per_night):"-"}),e.jsx(N,{children:e.jsx(Te,{variant:j(r.status),className:"capitalize",children:r.status})}),e.jsx(N,{onClick:l=>l.stopPropagation(),children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(g,{variant:"ghost",size:"sm",onClick:x,className:"bg-secondary text-secondary-foreground",children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsx(g,{variant:"ghost",size:"sm",onClick:a,className:"bg-destructive text-destructive-foreground",children:e.jsx(be,{className:"h-4 w-4"})})]})})]}),n&&e.jsx(B,{children:e.jsx(N,{colSpan:7,className:"p-4 bg-muted/20",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No additional details for this room."})})},`${r.id}-details`)]})},He=({rooms:r,expandedRows:n,toggleRow:u,openEditModal:x,openDeleteModal:a,sortBy:o,sortDirection:j,handleSort:h})=>{const l=({field:m,children:s})=>e.jsx(E,{className:"cursor-pointer",onClick:()=>h(m),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:s}),o===m&&e.jsx(_e,{className:`h-3 w-3 ${j==="asc"?"":"rotate-180"}`})]})});return e.jsx("div",{className:"rounded-md border",children:e.jsxs(Ce,{children:[e.jsx(Se,{children:e.jsxs(B,{children:[e.jsx(E,{className:"w-8"}),e.jsx(l,{field:"room_number",children:"Room Number"}),e.jsx(l,{field:"room_type",children:"Type"}),e.jsx(E,{children:"Capacity"}),e.jsx(E,{children:"Price/Night"}),e.jsx(l,{field:"status",children:"Status"}),e.jsx(E,{children:"Actions"})]})}),e.jsx(we,{children:r.length>0?r.map(m=>e.jsx($e,{room:m,isExpanded:n.includes(m.id),onToggle:()=>u(m.id),onEdit:()=>x(m),onDelete:()=>a(m)},m.id)):e.jsx(B,{children:e.jsx(N,{colSpan:7,className:"text-center py-8",children:"No rooms found"})})})]})})},se=({data:r,setData:n,errors:u})=>{const x=[{id:"name",label:"Name *",type:"text",placeholder:"e.g., Standard, Deluxe"},{id:"capacity",label:"Capacity *",type:"number",min:1,placeholder:"Guests"},{id:"price_per_night",label:"Price per Night *",type:"number",min:0,step:"0.01",placeholder:"0.00"}];return e.jsx("div",{className:"grid gap-4 py-4",children:x.map(a=>e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(D,{htmlFor:a.id,className:"text-right",children:a.label}),e.jsx(W,{id:a.id,type:a.type,value:r[a.id]??"",onChange:o=>n(a.id,o.target.value),className:"col-span-3",placeholder:a.placeholder,...a.min!==void 0?{min:a.min}:{},...a.step!==void 0?{step:a.step}:{}}),u?.[a.id]&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:u[a.id]})]},a.id))})},ye=({roomTypes:r=[],initialData:n=null,onSuccess:u,onCancel:x,onModeChange:a})=>{const[o,j]=d.useState(!1),[h,l]=d.useState(!1),m=!!n,{data:s,setData:f,post:S,put:w,processing:$,errors:p,reset:k}=de({is_range:!1,room_number:n?.room_number||"",start_room:"",end_room:"",room_type_id:n?.room_type_id||n?.room_type?.id||"",status:n?.status||"available"});d.useEffect(()=>{a&&a(o)},[o,a]);const T=t=>{j(t),f("is_range",t),t?f("room_number",""):(f("start_room",""),f("end_room",""))},q=t=>{t.preventDefault(),m?w(route("rooms.update",n.id),{onSuccess:()=>{k(),u()}}):S(route("rooms.store"),{onSuccess:()=>{k(),u()}})},M=()=>{k(),x()},b=(()=>{if(!o||!s.start_room||!s.end_room)return 0;const t=s.start_room.match(/^([^\d]*)(\d+)$/),I=s.end_room.match(/^([^\d]*)(\d+)$/);if(t&&I&&t[1]===I[1]){const z=parseInt(t[2]),G=parseInt(I[2]);return Math.max(0,G-z+1)}return!isNaN(s.start_room)&&!isNaN(s.end_room)?Math.max(0,parseInt(s.end_room)-parseInt(s.start_room)+1):0})(),R=()=>{l(!1),C.reload({only:["roomTypes"]})};return e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:q,className:"space-y-6",children:[!o&&e.jsxs(ee,{children:[e.jsxs(me,{className:"pb-4",children:[e.jsxs(xe,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5"}),"Single Room Creation"]}),e.jsx(he,{children:"Create a single room"})]}),e.jsxs(ue,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(D,{htmlFor:"room_number",className:"text-right",children:"Room Number *"}),e.jsx(W,{id:"room_number",value:s.room_number,onChange:t=>f("room_number",t.target.value),className:"col-span-3",placeholder:"e.g., 101, A201"}),p.room_number&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:p.room_number})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(D,{htmlFor:"room_type_id",className:"text-right",children:"Room Type *"}),e.jsxs("div",{className:"col-span-3 flex gap-2",children:[e.jsxs(V,{value:String(s.room_type_id||""),onValueChange:t=>f("room_type_id",t),children:[e.jsx(U,{className:"flex-1",children:e.jsx(L,{placeholder:"Select type"})}),e.jsx(Y,{children:r.map(t=>e.jsx(_,{value:String(t.id),children:t.name},t.id))})]}),e.jsx(g,{type:"button",variant:"outline",onClick:()=>l(!0),children:"Add Type"})]}),p.room_type_id&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:p.room_type_id})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(D,{htmlFor:"status",className:"text-right",children:"Status *"}),e.jsxs(V,{value:s.status||"available",onValueChange:t=>f("status",t),children:[e.jsx(U,{className:"col-span-3",children:e.jsx(L,{placeholder:"Select status"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"available",children:"Available"}),e.jsx(_,{value:"occupied",children:"Occupied"}),e.jsx(_,{value:"maintenance",children:"Maintenance"})]})]}),p.status&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:p.status})]})]})]}),o&&e.jsxs(ee,{children:[e.jsxs(me,{className:"pb-4",children:[e.jsxs(xe,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5"}),"Bulk Room Creation"]}),e.jsx(he,{children:"Create multiple rooms at once"})]}),e.jsx(ue,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Room Number Range"}),b>0&&e.jsxs(Te,{variant:"secondary",className:"text-xs",children:[b," rooms"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"start_room",className:"text-xs font-medium",children:"Start *"}),e.jsx(W,{id:"start_room",value:s.start_room,onChange:t=>f("start_room",t.target.value),className:"h-8 text-sm",placeholder:"e.g., 101"}),p.start_room&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:p.start_room})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"end_room",className:"text-xs font-medium",children:"End *"}),e.jsx(W,{id:"end_room",value:s.end_room,onChange:t=>f("end_room",t.target.value),className:"h-8 text-sm",placeholder:"e.g., 110"}),p.end_room&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:p.end_room})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Specifications"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(D,{htmlFor:"room_type_id",className:"text-xs font-medium",children:"Type *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(V,{value:String(s.room_type_id||""),onValueChange:t=>f("room_type_id",t),children:[e.jsx(U,{className:"h-8 text-sm flex-1",children:e.jsx(L,{placeholder:"Select type"})}),e.jsx(Y,{children:r.map(t=>e.jsx(_,{value:String(t.id),children:t.name},t.id))})]}),e.jsx(g,{type:"button",variant:"outline",size:"sm",onClick:()=>l(!0),children:"Add Type"})]}),p.room_type_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:p.room_type_id})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"status",className:"text-xs font-medium",children:"Status *"}),e.jsxs(V,{value:s.status||"available",onValueChange:t=>f("status",t),children:[e.jsx(U,{className:"h-8 text-sm",children:e.jsx(L,{placeholder:"Status"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"available",children:"Available"}),e.jsx(_,{value:"maintenance",children:"Maintenance"})]})]}),p.status&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:p.status})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-3 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("h4",{className:"font-medium text-sm",children:"How it works"})]}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block mr-1",children:"•"}),e.jsx("span",{children:"All rooms will have the same type & status"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block mr-1",children:"•"}),e.jsx("span",{children:"Numbers generated sequentially"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block mr-1",children:"•"}),e.jsx("span",{children:"Existing rooms will be skipped"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block mr-1",children:"•"}),e.jsx("span",{children:"Initial status applied to all"})]})]}),e.jsxs("div",{className:"mt-3 text-xs",children:[e.jsx("p",{className:"font-medium text-muted-foreground",children:"Examples:"}),e.jsx("p",{className:"text-muted-foreground",children:"101-110, A201-A210, B301-B305"})]})]})]})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[!m&&e.jsxs(ee,{className:"flex flex-row items-center space-x-2 p-2 rounded-lg",children:[e.jsx("span",{className:`text-sm ${o?"font-medium":"text-muted-foreground"}`,children:"Bulk Rooms"}),e.jsx("button",{type:"button",onClick:()=>T(!o),className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 bg-muted",role:"switch","aria-checked":o,children:e.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-background shadow ring-0 transition duration-200 ease-in-out ${o?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(g,{type:"button",variant:"outline",onClick:M,children:"Cancel"}),e.jsx(g,{type:"submit",disabled:$,children:$?"Saving...":m?"Update Room":"Create Room"})]})]})]}),e.jsx(A,{open:h,onOpenChange:l,children:e.jsxs(O,{className:"sm:max-w-md",children:[e.jsx(F,{children:e.jsx(P,{children:"Add Room Type"})}),e.jsx(se,{onSuccess:R,onCancel:()=>l(!1)})]})})]})},Re=({isOpen:r,onOpenChange:n,onConfirm:u,room:x,entityLabel:a,entityValue:o})=>{const j=a??(x?"Room":"Item"),h=o??(x?x.room_number:"");return e.jsx(A,{open:r,onOpenChange:n,children:e.jsxs(O,{children:[e.jsxs(F,{children:[e.jsx(P,{children:"Confirm Deletion"}),e.jsxs(pe,{children:["Are you sure you want to delete ",j,h?" ":"",h&&e.jsx("strong",{children:h}),"? This action cannot be undone."]})]}),e.jsxs(je,{children:[e.jsx(g,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(g,{variant:"destructive",onClick:u,children:"Delete"})]})]})})},ze=({paginationData:r,buildPaginationUrl:n,router:u})=>{const{from:x,to:a,total:o,prev_page_url:j,next_page_url:h}=r,l=m=>{m&&u.get(n(m),{},{preserveState:!0,replace:!0})};return e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",x," to ",a," of ",o," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:()=>l(j),disabled:!j,children:"Previous"}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>l(h),disabled:!h,children:"Next"})]})]})},Ve=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(r||0)),Ue=({roomTypes:r=[]})=>{const[n,u]=d.useState("name"),[x,a]=d.useState("asc"),o=d.useMemo(()=>{const c=[...r],i=x==="asc"?1:-1;return c.sort((y,v)=>n==="capacity"?(Number(y.capacity)-Number(v.capacity))*i:n==="price_per_night"?(Number(y.price_per_night)-Number(v.price_per_night))*i:String(y.name).localeCompare(String(v.name))*i)},[r,n,x]),j=c=>{n===c?a(i=>i==="asc"?"desc":"asc"):(u(c),a("asc"))},h=({field:c,children:i,className:y=""})=>e.jsx(E,{className:`cursor-pointer ${y}`,onClick:()=>j(c),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:i}),n===c&&e.jsx(_e,{className:`h-3 w-3 ${x==="asc"?"":"rotate-180"}`})]})}),[l,m]=d.useState(!1),{data:s,setData:f,post:S,processing:w,errors:$,reset:p,clearErrors:k,setDefaults:T}=de({name:"",capacity:"",price_per_night:""}),q=()=>{T({name:"",capacity:"",price_per_night:""}),p(),k(),m(!0)},M=c=>{c.preventDefault(),S(route("room-types.store"),{preserveScroll:!0,onSuccess:()=>{p(),m(!1),C.reload({only:["roomTypes"]})}})},[H,b]=d.useState(!1),[R,t]=d.useState(null),{data:I,setData:z,put:G,processing:X,errors:te,reset:J,clearErrors:ae,setDefaults:re}=de({name:"",capacity:"",price_per_night:""}),ne=c=>{re({name:"",capacity:"",price_per_night:""}),J(),ae(),t(c),z({name:c.name??"",capacity:c.capacity??"",price_per_night:c.price_per_night??""}),b(!0)},le=c=>{c.preventDefault(),R&&G(route("room-types.update",R.id),{preserveScroll:!0,onSuccess:()=>{b(!1),t(null),J(),C.reload({only:["roomTypes"]})}})},[oe,K]=d.useState(!1),[Q,Z]=d.useState(null),ce=c=>{Z(c),K(!0)},ie=()=>{Q&&C.delete(route("room-types.destroy",Q.id),{preserveScroll:!0,onSuccess:()=>{K(!1),Z(null),C.reload({only:["roomTypes"]})}})};return d.useEffect(()=>{l||p()},[l]),d.useEffect(()=>{H||(t(null),J())},[H]),e.jsxs("div",{className:"mt-10",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Room Types"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage room type catalog"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(g,{onClick:q,className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"})," Add Type"]})})]}),e.jsx("div",{className:"rounded-md border overflow-hidden",children:e.jsxs(Ce,{children:[e.jsx(Se,{children:e.jsxs(B,{children:[e.jsx(E,{className:"w-8"}),e.jsx(h,{field:"name",children:"Name"}),e.jsx(h,{field:"capacity",className:"w-40",children:"Capacity"}),e.jsx(h,{field:"price_per_night",className:"w-48",children:"Price/Night"}),e.jsx(E,{className:"w-40 text-right",children:"Actions"})]})}),e.jsx(we,{children:o.length?o.map(c=>e.jsxs(B,{children:[e.jsx(N,{}),e.jsx(N,{children:e.jsx("span",{className:"font-medium",children:c.name})}),e.jsxs(N,{children:[c.capacity," People"]}),e.jsx(N,{children:Ve(c.price_per_night)}),e.jsx(N,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(g,{size:"sm",variant:"ghost",onClick:()=>ne(c),className:"inline-flex gap-1 bg-secondary text-secondary-foreground",title:"Edit",children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsx(g,{size:"sm",variant:"ghost",className:"inline-flex gap-1 bg-destructive text-destructive-foreground",onClick:()=>ce(c),title:"Delete",children:e.jsx(be,{className:"h-4 w-4"})})]})})]},c.id)):e.jsx(B,{children:e.jsx(N,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No room types found"})})})]})}),e.jsx(A,{open:l,onOpenChange:m,children:e.jsx(O,{className:"sm:max-w-[425px]",children:e.jsxs("form",{onSubmit:M,children:[e.jsx(F,{children:e.jsx(P,{children:"Add Room Type"})}),e.jsx(se,{data:s,setData:f,errors:$}),e.jsxs(je,{className:"gap-2",children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(g,{type:"submit",disabled:w,children:w?"Saving...":"Save Type"})]})]})})}),e.jsx(A,{open:H,onOpenChange:b,children:e.jsx(O,{className:"sm:max-w-[425px]",children:e.jsxs("form",{onSubmit:le,children:[e.jsx(F,{children:e.jsx(P,{children:"Edit Room Type"})}),e.jsx(se,{data:I,setData:z,errors:te}),e.jsxs(je,{className:"gap-2",children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsx(g,{type:"submit",disabled:X,children:X?"Saving...":"Save Changes"})]})]})})}),e.jsx(Re,{isOpen:oe,onOpenChange:K,onConfirm:ie,entityLabel:"Room Type",entityValue:Q?.name??""})]})};function Le(){const{rooms:r,roomTypes:n,filters:u,flash:x}=De().props,[a,o]=d.useState(u.search||""),[j,h]=d.useState(u.status||"all"),[l,m]=d.useState(u.room_type_id||"all"),[s,f]=d.useState(u.sort_by||"room_number"),[S,w]=d.useState(u.sort_direction||"asc"),[$,p]=d.useState(!1),[k,T]=d.useState(!1),[q,M]=d.useState(!1),[H,b]=d.useState(!1),[R,t]=d.useState(null),[I,z]=d.useState([]),[G,X]=d.useState(!1);d.useEffect(()=>{x?.success&&fe.success(x.success),x?.error&&fe.error(x.error)},[x]),d.useEffect(()=>{const i=setTimeout(()=>te(1),500);return()=>clearTimeout(i)},[a,j,l,s,S]);const te=(i=u.page||1)=>{C.get(route("rooms.index"),{search:a,status:j==="all"?"":j,room_type_id:l==="all"?"":l,sort_by:s,sort_direction:S,page:i},{preserveState:!0,replace:!0})},J=i=>{s===i?w(y=>y==="asc"?"desc":"asc"):(f(i),w("asc"))},ae=()=>{X(!1),p(!0)},re=i=>{t(i),T(!0)},ne=i=>{t(i),M(!0)},le=()=>p(!1),oe=()=>{T(!1),t(null)},K=()=>{C.delete(route("rooms.destroy",R.id),{onSuccess:()=>{M(!1),t(null)}})},Q=()=>{b(!1),C.reload({only:["roomTypes"]})},Z=()=>{o(""),h("all"),m("all"),f("room_number"),w("asc")},ce=i=>z(y=>y.includes(i)?y.filter(v=>v!==i):[...y,i]),ie=i=>{if(!i)return null;const y=new URL(i,window.location.origin),v=new URLSearchParams(y.search);return v.set("search",a),v.set("status",j==="all"?"":j),v.set("room_type_id",l==="all"?"":l),v.set("sort_by",s),v.set("sort_direction",S),`${y.pathname}?${v.toString()}`},c=i=>X(i);return e.jsxs("div",{className:"container mx-auto py-2 px-4",children:[e.jsxs(ee,{className:"mb-8",children:[e.jsx(Pe,{onAddRoom:ae}),e.jsxs(ue,{children:[e.jsx(Be,{searchTerm:a,setSearchTerm:o,selectedStatus:j,setSelectedStatus:h,selectedTypeId:l,setSelectedTypeId:m,roomTypes:n,clearFilters:Z}),e.jsx(He,{rooms:r.data,expandedRows:I,toggleRow:ce,openEditModal:re,openDeleteModal:ne,sortBy:s,sortDirection:S,handleSort:J}),e.jsx(ze,{paginationData:r,buildPaginationUrl:ie,router:C})]})]}),e.jsx(Ue,{roomTypes:n}),e.jsx(A,{open:$,onOpenChange:p,children:e.jsxs(O,{className:`${G?"sm:max-w-4xl":"sm:max-w-2xl"} max-h-[90vh] overflow-y-auto`,children:[e.jsxs(F,{children:[e.jsx(P,{children:"Create New Room"}),e.jsx(pe,{children:"Add a new room to the hotel. You can create a single room or a range of rooms at once."})]}),e.jsx(ye,{roomTypes:n,onSuccess:le,onCancel:()=>p(!1),onModeChange:c})]})}),e.jsx(A,{open:k,onOpenChange:T,children:e.jsxs(O,{className:"sm:max-w-2xl",children:[e.jsxs(F,{children:[e.jsx(P,{children:"Edit Room"}),e.jsx(pe,{children:"Update the room details. Note: You cannot edit a range of rooms at once."})]}),e.jsx(ye,{roomTypes:n,initialData:R,onSuccess:oe,onCancel:()=>{T(!1),t(null)}})]})}),e.jsx(Re,{isOpen:q,onOpenChange:M,onConfirm:K,room:R}),e.jsx(A,{open:H,onOpenChange:b,children:e.jsxs(O,{className:"sm:max-w-md",children:[e.jsx(F,{children:e.jsx(P,{children:"Add Room Type"})}),e.jsx(se,{onSuccess:Q,onCancel:()=>b(!1)})]})})]})}Le.layout=r=>e.jsx(Ie,{children:r});export{Le as default};
