import{j as e,r as c,b as I,c as V}from"./app-Xum8xYk4.js";import{b as k,c as Z,C as H,a as G,d as L}from"./card-_ENwegIX.js";import{S as T}from"./star-BcgftNje.js";import{M as F}from"./message-square-DMQ0KOFr.js";import{c as P,B as f}from"./button-D_pCvGFT.js";import{I as $,L as B}from"./label-CALARFfE.js";import{S as X,a as J,b as K,c as Q,d as w}from"./select-DaGNP5ZC.js";import{S as W,D as Y,a as ee,b as se,c as ae,d as te,A as re}from"./dialog-DROVjM-Y.js";import{C as le}from"./calendar-CJVHZXT0.js";import{X as ne,d as oe,U as ce,A as ie}from"./AuthenticatedLayout-C6bPXZFp.js";import{T as D,a as p,b as de,c as me,d as M,e as xe}from"./table-CoqkGrDp.js";import{C as he}from"./chevron-down-BNbL4uHU.js";import{M as ue}from"./mail-bdb9QQOR.js";import{a as je}from"./date-sUREfqb9.js";/* empty css            */import"./index-CbZI8xg4.js";import"./index-v5_tpC5X.js";import"./index-BBYHTZfh.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],pe=P("thumbs-down",ge);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],be=P("thumbs-up",fe),Ne=({totals:s})=>{const t=[{title:"Average Rating",value:s?.avg_rating||0,icon:T,color:"text-yellow-600",bgColor:"bg-yellow-100",borderColor:"border-yellow-200",suffix:"/5"},{title:"Total Reviews",value:s?.total||0,icon:F,color:"text-blue-600",bgColor:"bg-blue-100",borderColor:"border-blue-200"},{title:"Forwarded to Google",value:s?.good||0,icon:be,color:"text-green-600",bgColor:"bg-green-100",borderColor:"border-green-200"},{title:"Not Forwarded",value:s?.low||0,icon:pe,color:"text-red-600",bgColor:"bg-red-100",borderColor:"border-red-200"}];return e.jsxs("div",{className:"pb-4",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-2xl font-bold",children:"Customer Reviews"}),e.jsx(Z,{children:"Monitor customer feedback and satisfaction metrics."})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 pt-6",children:t.map((a,r)=>e.jsxs(H,{className:`p-2 gap-1 border-b-8 ${a.borderColor}`,children:[e.jsxs(G,{className:"flex flex-row items-center justify-between p-2",children:[e.jsx(k,{className:"text-sm font-medium text-muted-foreground",children:a.title}),e.jsx("div",{className:`rounded-full p-1 border-2 ${a.bgColor}`,children:e.jsx(a.icon,{className:`h-4 w-4 ${a.color}`})})]}),e.jsx(L,{className:"px-2",children:e.jsxs("div",{className:"text-2xl font-bold",children:[a.value,a.suffix||""]})})]},r))})]})},ve=({search:s,setSearch:t,dateFrom:a,setDateFrom:r,dateTo:n,setDateTo:b,minRating:m,setMinRating:x,clearFilters:l})=>{const[N,h]=c.useState(!1),[S,j]=c.useState(a),[y,u]=c.useState(n),R=()=>{r(S),b(y),h(!1)},g=()=>{j(""),u(""),r(""),b(""),h(!1)},_=()=>!a&&!n?"Review Date":a&&!n?a:a&&n?`${a} - ${n}`:"Review Date";return e.jsx(H,{className:"mb-6",children:e.jsx(L,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative md:w-1/2",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx($,{placeholder:"Search reviews or customers...",value:s,onChange:i=>t(i.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 md:w-1/2",children:[e.jsxs(X,{value:m?.toString()||"0",onValueChange:i=>x(parseInt(i)),children:[e.jsxs(J,{className:"w-full sm:w-auto flex-grow",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),e.jsx(K,{placeholder:"Min Rating"})]}),e.jsxs(Q,{children:[e.jsx(w,{value:"0",children:"All Ratings"}),e.jsx(w,{value:"1",children:"1+ Stars"}),e.jsx(w,{value:"2",children:"2+ Stars"}),e.jsx(w,{value:"3",children:"3+ Stars"}),e.jsx(w,{value:"4",children:"4+ Stars"}),e.jsx(w,{value:"5",children:"5 Stars"})]})]}),e.jsxs(Y,{open:N,onOpenChange:h,children:[e.jsx(ee,{asChild:!0,children:e.jsxs(f,{variant:"outline",className:"w-full sm:w-auto flex-grow justify-center text-left font-normal",children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),_()]})}),e.jsxs(se,{className:"sm:max-w-96",children:[e.jsx(ae,{children:e.jsx(te,{children:"Select Created Date Range"})}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"date-from",children:"From"}),e.jsx($,{id:"date-from",type:"date",value:S,onChange:i=>j(i.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"date-to",children:"To"}),e.jsx($,{id:"date-to",type:"date",value:y,onChange:i=>u(i.target.value)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(f,{variant:"outline",onClick:g,children:"Clear"}),e.jsx(f,{onClick:R,children:"Apply"})]})]})]})]}),e.jsxs(f,{variant:"outline",onClick:l,className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"})," Clear"]})]})]})})})},U=({rating:s})=>e.jsxs("div",{className:"flex items-center",children:[[1,2,3,4,5].map(t=>e.jsx(T,{className:`h-4 w-4 ${t<=s?"text-yellow-500 fill-yellow-500":"text-gray-300"}`},t)),e.jsxs("span",{className:"ml-2 text-sm font-medium",children:[s,"/5"]})]}),A=({title:s,icon:t,headerBg:a,headerText:r,children:n})=>e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`p-2 rounded-full ${a}`,children:e.jsx(t,{className:`h-5 w-5 ${r}`})}),e.jsx("h3",{className:"text-lg font-semibold",children:s})]}),e.jsx("div",{className:"space-y-2",children:n})]}),C=({label:s,value:t,children:a})=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[s,":"]}),e.jsx("span",{className:"font-medium text-right",children:t??a??"â€”"})]}),we=({review:s,isExpanded:t,onToggle:a,formatDate:r})=>e.jsxs(e.Fragment,{children:[e.jsxs(D,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:a,children:[e.jsx(p,{className:"w-12",children:e.jsx(f,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:t?e.jsx(he,{className:"h-4 w-4"}):e.jsx(oe,{className:"h-4 w-4"})})}),e.jsx(p,{className:"font-medium",children:s.customer?.name||"Unknown"}),e.jsx(p,{children:e.jsx(U,{rating:s.rating})}),e.jsx(p,{children:e.jsx("div",{className:"max-w-xs truncate",children:s.comment||e.jsx("span",{className:"text-muted-foreground",children:"No comment"})})}),e.jsx(p,{children:r(s.created_at)})]}),t&&e.jsx(D,{children:e.jsx(p,{colSpan:5,className:"p-0",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs(A,{title:"Customer Details",icon:ce,headerBg:"bg-blue-100",headerText:"text-blue-600",children:[e.jsx(C,{label:"Name",value:s.customer?.name}),e.jsx(C,{label:"Email",value:s.customer?.email}),e.jsx(C,{label:"Phone",value:s.customer?.phone}),e.jsx(C,{label:"Country",value:s.customer?.passport_country})]}),e.jsxs(A,{title:"Review Details",icon:T,headerBg:"bg-yellow-100",headerText:"text-yellow-600",children:[e.jsx(C,{label:"Rating",children:e.jsx(U,{rating:s.rating})}),e.jsx(C,{label:"Created At",value:r(s.created_at)})]}),e.jsx(A,{title:"Comment",icon:ue,headerBg:"bg-green-100",headerText:"text-green-600",children:e.jsx("div",{className:"bg-white p-4 rounded-lg border min-h-[150px]",children:s.comment?e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.comment}):e.jsx("p",{className:"text-muted-foreground text-sm",children:"No comment provided"})})})]})})})})]}),Ce=({reviews:s,expandedRows:t,onToggle:a,handleSort:r,sortBy:n,sortDirection:b,formatDate:m})=>{const x=({field:l,children:N})=>e.jsx(M,{className:"cursor-pointer",onClick:()=>r(l),children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:N}),n===l&&e.jsx(re,{className:`h-3 w-3 ${b==="asc"?"rotate-180":""}`})]})});return e.jsx("div",{className:"rounded-md border",children:e.jsxs(de,{children:[e.jsx(me,{children:e.jsxs(D,{children:[e.jsx(M,{className:"w-12"}),e.jsx(x,{field:"customer",children:"Customer"}),e.jsx(x,{field:"rating",children:"Rating"}),e.jsx(M,{children:"Comment"}),e.jsx(x,{field:"created_at",children:"Review Date"})]})}),e.jsx(xe,{children:s?.length?s.map(l=>e.jsx(we,{review:l,isExpanded:t.includes(l.id),onToggle:()=>a(l.id),formatDate:m},l.id)):e.jsx(D,{children:e.jsx(p,{colSpan:5,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-muted-foreground",children:[e.jsx(F,{className:"h-12 w-12 mb-2"}),e.jsx("p",{children:"No reviews found"})]})})})})]})})},Se=({paginationData:s,buildPaginationUrl:t})=>{const a=r=>{r&&I.get(t(r),{},{preserveState:!0,replace:!0})};return e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",s?.from," to ",s?.to," of ",s?.total," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:()=>a(s.prev_page_url),disabled:!s?.prev_page_url,children:"Previous"}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>a(s.next_page_url),disabled:!s?.next_page_url,children:"Next"})]})]})};function ye(){const{reviews:s,filters:t,totals:a,flash:r}=V().props,[n,b]=c.useState([]),[m,x]=c.useState(t.search||""),[l,N]=c.useState(t.date_from||""),[h,S]=c.useState(t.date_to||""),[j,y]=c.useState(t.min_rating||0),[u,R]=c.useState(t.sort_by||"created_at"),[g,_]=c.useState(t.sort_direction||"desc");c.useEffect(()=>{const o={search:m,date_from:l,date_to:h,min_rating:j,sort_by:u,sort_direction:g};I.get(route("reviews.index"),o,{preserveState:!0,replace:!0})},[m,l,h,j,u,g]);const i=o=>{b(v=>v.includes(o)?v.filter(d=>d!==o):[...v,o])},E=o=>{u===o?_(g==="asc"?"desc":"asc"):(R(o),_("desc"))},q=()=>{x(""),N(""),S(""),y(0),R("created_at"),_("desc")},z=je,O=o=>{if(!o)return null;const v=new URL(o),d=new URLSearchParams(v.search);return d.set("search",m),d.set("date_from",l),d.set("date_to",h),d.set("min_rating",j),d.set("sort_by",u),d.set("sort_direction",g),`${v.pathname}?${d.toString()}`};return e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx(Ne,{totals:a}),e.jsx(H,{children:e.jsxs(L,{className:"pt-0",children:[e.jsx(ve,{search:m,setSearch:x,dateFrom:l,setDateFrom:N,dateTo:h,setDateTo:S,minRating:j,setMinRating:y,clearFilters:q}),e.jsx(Ce,{reviews:s.data,expandedRows:n,onToggle:i,handleSort:E,sortBy:u,sortDirection:g,formatDate:z}),e.jsx(Se,{paginationData:s,buildPaginationUrl:O})]})})]})}ye.layout=s=>e.jsx(ie,{children:s});export{ye as default};
