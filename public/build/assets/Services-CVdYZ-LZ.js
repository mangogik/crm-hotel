import{j as e,a as E,b as Ce,r as u,u as _e}from"./app-DAksNdPr.js";import{c as we,B as d}from"./createLucideIcon-CDjEx02q.js";import{C as Fe,a as Te,b as De,T as _,c as v,B as W,d as ke,e as Oe,f as U,g as Pe,h as Ae,i as Me}from"./badge-DqFlTVMn.js";import{P as se,S as Ue,a as w,b as F,F as Y,c as T,d as D,e as j,C as Ee,f as Ie,g as Re,T as ze,A as Be,D as I,h as R,i as z,j as B,k as H,l as L,t as Z}from"./select-CynGadpL.js";import{X as te,A as He}from"./AuthenticatedLayout-otVu2RNG.js";import{I as y,L as N}from"./check-BwVF50uz.js";/* empty css            */import"./index-Bfs2tR1_.js";import"./index-CF1EjuT2.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ve=we("info",Le),$e=({onAddService:s})=>e.jsx(Fe,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(Te,{className:"text-2xl font-bold",children:"Services"}),e.jsx(De,{children:"Manage your service offerings"})]}),e.jsxs(d,{onClick:s,className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"})," Add Service"]})]})}),Xe=({searchTerm:s,setSearchTerm:n,selectedType:l,setSelectedType:r,selectedFulfillment:m,setSelectedFulfillment:c,clearFilters:a})=>e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(y,{placeholder:"Search services...",value:s,onChange:i=>n(i.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(w,{value:l,onValueChange:r,children:[e.jsxs(F,{className:"w-[180px]",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),e.jsx(T,{placeholder:"Type"})]}),e.jsxs(D,{children:[e.jsx(j,{value:"all",children:"All Types"}),e.jsx(j,{value:"fixed",children:"Fixed Price"}),e.jsx(j,{value:"per_unit",children:"Per Unit"}),e.jsx(j,{value:"selectable",children:"Selectable"})]})]}),e.jsxs(w,{value:m,onValueChange:c,children:[e.jsxs(F,{className:"w-[180px]",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),e.jsx(T,{placeholder:"Fulfillment"})]}),e.jsxs(D,{children:[e.jsx(j,{value:"all",children:"All Fulfillments"}),e.jsx(j,{value:"direct",children:"Direct"}),e.jsx(j,{value:"staff_assisted",children:"Staff Assisted"})]})]}),e.jsxs(d,{variant:"outline",onClick:a,className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"})," Clear Sort & Filters"]})]})]}),qe=({service:s,isExpanded:n,onToggle:l,onEdit:r,onDelete:m,formatPrice:c,formatType:a,formatFulfillment:i})=>e.jsxs(e.Fragment,{children:[e.jsxs(_,{className:"cursor-pointer hover:bg-muted/50",onClick:l,children:[e.jsx(v,{children:e.jsx(d,{variant:"ghost",size:"sm",children:n?e.jsx(Ee,{className:"h-4 w-4"}):e.jsx(Ie,{className:"h-4 w-4"})})}),e.jsx(v,{className:"font-medium",children:s.name}),e.jsx(v,{children:e.jsxs(W,{variant:"outline",children:[a(s.type),s.type==="per_unit"&&` (${s.unit_name})`]})}),e.jsx(v,{children:e.jsx(W,{variant:"secondary",children:i(s.fulfillment_type)})}),e.jsx(v,{children:s.type==="selectable"?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm",children:"Multiple options"}),e.jsx(Ve,{className:"h-3 w-3 text-muted-foreground"})]}):c(s.price)}),e.jsx(v,{onClick:o=>o.stopPropagation(),children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:r,children:e.jsx(Re,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:m,children:e.jsx(ze,{className:"h-4 w-4"})})]})})]}),n&&e.jsx(_,{children:e.jsx(v,{colSpan:6,className:"p-4 bg-muted/20",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description||"No description provided."})]}),s.type==="selectable"&&s.options?.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Available Options:"}),e.jsx("div",{className:"space-y-2",children:s.options.map((o,g)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-background border rounded",children:[e.jsx("span",{children:o.name}),e.jsx("span",{className:"font-medium",children:c(o.price)})]},g))})]})]})})},`${s.id}-details`)]}),Ge=({services:s,expandedRows:n,toggleRow:l,openEditModal:r,openDeleteModal:m,formatPrice:c,formatType:a,formatFulfillment:i,sortBy:o,sortDirection:g,handleSort:C})=>{const f=({field:p,children:k})=>e.jsx(U,{className:"cursor-pointer",onClick:()=>C(p),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:k}),o===p&&e.jsx(Be,{className:`h-3 w-3 ${g==="asc"?"rotate-180":""}`})]})});return e.jsx("div",{className:"rounded-md border",children:e.jsxs(ke,{children:[e.jsx(Oe,{children:e.jsxs(_,{children:[e.jsx(U,{className:"w-8"}),e.jsx(f,{field:"name",children:"Name"}),e.jsx(f,{field:"type",children:"Type"}),e.jsx(f,{field:"fulfillment_type",children:"Fulfillment"}),e.jsx(f,{field:"price",children:"Price"}),e.jsx(U,{children:"Actions"})]})}),e.jsx(Pe,{children:s.length>0?s.map(p=>e.jsx(qe,{service:p,isExpanded:n.includes(p.id),onToggle:()=>l(p.id),onEdit:()=>r(p),onDelete:()=>m(p),formatPrice:c,formatType:a,formatFulfillment:i},p.id)):e.jsx(_,{children:e.jsx(v,{colSpan:6,className:"text-center py-8",children:"No services found"})})})]})})},ee=({data:s,setData:n,errors:l,addOption:r,removeOption:m,updateOption:c})=>e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"name",className:"text-right",children:"Name *"}),e.jsx(y,{id:"name",value:s.name,onChange:a=>n("name",a.target.value),className:"col-span-3"}),l.name&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:l.name})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"description",className:"text-right",children:"Description"}),e.jsx(y,{id:"description",value:s.description,onChange:a=>n("description",a.target.value),className:"col-span-3"}),l.description&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:l.description})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"type",className:"text-right",children:"Type *"}),e.jsxs(w,{value:s.type,onValueChange:a=>n("type",a),children:[e.jsx(F,{className:"col-span-3",children:e.jsx(T,{placeholder:"Select type"})}),e.jsxs(D,{children:[e.jsx(j,{value:"fixed",children:"Fixed Price"}),e.jsx(j,{value:"per_unit",children:"Per Unit"}),e.jsx(j,{value:"selectable",children:"Selectable Options"})]})]}),l.type&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:l.type})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"fulfillment_type",className:"text-right",children:"Fulfillment *"}),e.jsxs(w,{value:s.fulfillment_type,onValueChange:a=>n("fulfillment_type",a),children:[e.jsx(F,{className:"col-span-3",children:e.jsx(T,{placeholder:"Select fulfillment"})}),e.jsxs(D,{children:[e.jsx(j,{value:"direct",children:"Direct"}),e.jsx(j,{value:"staff_assisted",children:"Staff Assisted"})]})]}),l.fulfillment_type&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:l.fulfillment_type})]}),s.type==="fixed"&&e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"price",className:"text-right",children:"Price *"}),e.jsx(y,{id:"price",type:"number",min:"0",step:"0.01",value:s.price,onChange:a=>n("price",a.target.value),className:"col-span-3"}),l.price&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:l.price})]}),s.type==="per_unit"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"unit_name",className:"text-right",children:"Unit Name *"}),e.jsx(y,{id:"unit_name",value:s.unit_name,onChange:a=>n("unit_name",a.target.value),className:"col-span-3"}),l.unit_name&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:l.unit_name})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(N,{htmlFor:"price",className:"text-right",children:"Price per Unit *"}),e.jsx(y,{id:"price",type:"number",min:"0",step:"0.01",value:s.price,onChange:a=>n("price",a.target.value),className:"col-span-3"}),l.price&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:l.price})]})]}),s.type==="selectable"&&e.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[e.jsx(N,{className:"text-right pt-2",children:"Options *"}),e.jsxs("div",{className:"col-span-3 space-y-2",children:[s.options.map((a,i)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[e.jsx(y,{placeholder:"Option name",value:a.name,onChange:o=>c(i,"name",o.target.value),className:"col-span-5"}),e.jsx(y,{type:"number",placeholder:"Price",min:"0",step:"0.01",value:a.price,onChange:o=>c(i,"price",o.target.value),className:"col-span-5"}),e.jsx(d,{type:"button",variant:"outline",size:"sm",onClick:()=>m(i),disabled:s.options.length<=1,className:"col-span-2",children:e.jsx(te,{className:"h-4 w-4"})})]},i)),e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:r,className:"mt-2",children:[e.jsx(se,{className:"h-4 w-4 mr-1"})," Add Option"]}),l.options&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.options})]})]})]}),Je=({isOpen:s,onOpenChange:n,onConfirm:l,service:r})=>r?e.jsx(I,{open:s,onOpenChange:n,children:e.jsxs(R,{children:[e.jsxs(z,{children:[e.jsx(B,{children:"Confirm Deletion"}),e.jsxs(H,{children:["Are you sure you want to delete the service"," ",e.jsx("strong",{children:r.name}),"? This action cannot be undone."]})]}),e.jsxs(L,{children:[e.jsx(d,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(d,{variant:"destructive",onClick:l,children:"Delete"})]})]})}):null,Ke=({paginationData:s,buildPaginationUrl:n})=>{const{from:l,to:r,total:m,prev_page_url:c,next_page_url:a}=s,i=o=>{o&&E.get(n(o),{},{preserveState:!0,replace:!0})};return e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",l," to ",r," of ",m," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(d,{variant:"outline",size:"sm",onClick:()=>i(c),disabled:!c,children:"Previous"}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>i(a),disabled:!a,children:"Next"})]})]})};function Qe(){const{services:s,filters:n,flash:l}=Ce().props,[r,m]=u.useState(n.search||""),[c,a]=u.useState(n.type||"all"),[i,o]=u.useState(n.fulfillment_type||"all"),[g,C]=u.useState(n.sort_by||"created_at"),[f,p]=u.useState(n.sort_direction||"desc"),[k,O]=u.useState(!1),[le,P]=u.useState(!1),[ae,A]=u.useState(!1),[M,V]=u.useState(null),[ne,ie]=u.useState([]),{data:S,setData:b,post:ce,put:re,processing:$,errors:X,reset:oe,clearErrors:q}=_e({name:"",description:"",type:"fixed",fulfillment_type:"direct",price:"",unit_name:"",options:[{name:"",price:""}]});u.useEffect(()=>{l?.success&&Z.success(l.success),l?.error&&Z.error(l.error)},[l]),u.useEffect(()=>{const t=setTimeout(()=>de(),500);return()=>clearTimeout(t)},[r,c,i,g,f]);const de=(t=1)=>{E.get(route("services.index"),{search:r,type:c==="all"?"":c,fulfillment_type:i==="all"?"":i,sort_by:g,sort_direction:f,page:t},{preserveState:!0,replace:!0})},me=t=>{C(t),p(f==="asc"?"desc":"asc")},pe=()=>{oe(),q(),O(!0)},xe=t=>{b({name:t.name,description:t.description||"",type:t.type,fulfillment_type:t.fulfillment_type,price:t.price||"",unit_name:t.unit_name||"",options:t.options||[{name:"",price:""}]}),q(),V(t),P(!0)},he=t=>{V(t),A(!0)},ue=t=>{t.preventDefault(),ce(route("services.store"),{onSuccess:()=>O(!1)})},je=t=>{t.preventDefault(),re(route("services.update",M.id),{onSuccess:()=>P(!1)})},fe=()=>{E.delete(route("services.destroy",M.id),{onSuccess:()=>A(!1)})},ge=()=>{m(""),a("all"),o("all"),C("created_at"),p("desc")},Ne=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t||0),ve=t=>t==="per_unit"?"Per Unit":t.charAt(0).toUpperCase()+t.slice(1),ye=t=>t.split("_").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" "),Se=t=>ie(x=>x.includes(t)?x.filter(h=>h!==t):[...x,t]),G=()=>b("options",[...S.options,{name:"",price:""}]),J=t=>{S.options.length>1&&b("options",S.options.filter((x,h)=>h!==t))},K=(t,x,h)=>{const Q=[...S.options];Q[t][x]=h,b("options",Q)},be=t=>{if(!t)return null;const x=new URL(t),h=new URLSearchParams(x.search);return h.set("search",r),h.set("type",c==="all"?"":c),h.set("fulfillment_type",i==="all"?"":i),h.set("sort_by",g),h.set("sort_direction",f),`${x.pathname}?${h.toString()}`};return e.jsxs("div",{className:"container mx-auto py-2 px-4",children:[e.jsxs(Ae,{className:"mb-8",children:[e.jsx($e,{onAddService:pe}),e.jsxs(Me,{children:[e.jsx(Xe,{searchTerm:r,setSearchTerm:m,selectedType:c,setSelectedType:a,selectedFulfillment:i,setSelectedFulfillment:o,clearFilters:ge}),e.jsx(Ge,{services:s.data,expandedRows:ne,toggleRow:Se,openEditModal:xe,openDeleteModal:he,formatPrice:Ne,formatType:ve,formatFulfillment:ye,sortBy:g,sortDirection:f,handleSort:me}),e.jsx(Ke,{paginationData:s,buildPaginationUrl:be})]})]}),e.jsx(I,{open:k,onOpenChange:O,children:e.jsxs(R,{className:"sm:max-w-[600px]",children:[e.jsxs(z,{children:[e.jsx(B,{children:"Create New Service"}),e.jsx(H,{children:"Add a new service to your offerings"})]}),e.jsxs("form",{onSubmit:ue,children:[e.jsx(ee,{data:S,setData:b,errors:X,addOption:G,removeOption:J,updateOption:K}),e.jsx(L,{children:e.jsx(d,{type:"submit",disabled:$,children:"Create Service"})})]})]})}),e.jsx(I,{open:le,onOpenChange:P,children:e.jsxs(R,{className:"sm:max-w-[600px]",children:[e.jsxs(z,{children:[e.jsx(B,{children:"Edit Service"}),e.jsx(H,{children:"Update service information"})]}),e.jsxs("form",{onSubmit:je,children:[e.jsx(ee,{data:S,setData:b,errors:X,addOption:G,removeOption:J,updateOption:K}),e.jsx(L,{children:e.jsx(d,{type:"submit",disabled:$,children:"Update Service"})})]})]})}),e.jsx(Je,{isOpen:ae,onOpenChange:A,onConfirm:fe,service:M})]})}Qe.layout=s=>e.jsx(He,{children:s});export{Qe as default};
