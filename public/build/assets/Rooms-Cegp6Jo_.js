import{j as e,r as c,u as de,b as P,c as Pe}from"./app-Xum8xYk4.js";import{P as we,T as Se,t as Ne}from"./index-B0xz6GqK.js";import{X as me,d as ke,H as Me,A as Ae}from"./AuthenticatedLayout-C6bPXZFp.js";import{a as xe,b as ue,c as he,C as re,d as pe}from"./card-_ENwegIX.js";import{S as Oe,A as Ce,D as G,b as z,c as U,d as V,e as ge,f as je}from"./dialog-DROVjM-Y.js";import{B as N}from"./button-D_pCvGFT.js";import{P as fe}from"./plus-DObaf2Oy.js";import{I as se,L as k}from"./label-CALARFfE.js";import{S as Y,a as W,b as J,c as X,d as M}from"./select-DaGNP5ZC.js";import{F as be}from"./funnel-DrYU1sAy.js";import{T as H,a as b,b as Te,c as Re,d as B,e as Ie}from"./table-CoqkGrDp.js";import{B as Ee}from"./badge-CfzvdEf6.js";import{C as Fe}from"./chevron-down-BNbL4uHU.js";import{I as Be}from"./image-DEyj5dzB.js";import{L as $e}from"./loader-circle-Bpb0qW-w.js";/* empty css            */import"./index-v5_tpC5X.js";import"./index-CbZI8xg4.js";import"./index-BBYHTZfh.js";const Le=({onAddRoom:l})=>e.jsx(xe,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(ue,{className:"text-2xl font-bold",children:"Rooms"}),e.jsx(he,{children:"Manage your hotel rooms and room types"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(N,{onClick:l,className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"})," Add Room"]})})]})}),Ge=({searchTerm:l,setSearchTerm:t,selectedStatus:x,setSelectedStatus:u,selectedTypeId:n,setSelectedTypeId:i,roomTypes:j=[],clearFilters:d})=>{const a=["all","available","occupied","maintenance"],m=o=>o&&o.charAt(0).toUpperCase()+o.slice(1);return e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Oe,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(se,{placeholder:"Search by room number or type...",value:l,onChange:o=>t(o.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(Y,{value:String(n||"all"),onValueChange:o=>i(o==="all"?"all":o),children:[e.jsxs(W,{className:"w-full md:w-[220px]",children:[e.jsx(be,{className:"mr-2 h-4 w-4"}),e.jsx(J,{placeholder:"Room Type"})]}),e.jsxs(X,{children:[e.jsx(M,{value:"all",children:"All Types"}),j.map(o=>e.jsx(M,{value:String(o.id),children:o.name},o.id))]})]}),e.jsxs(Y,{value:x,onValueChange:u,children:[e.jsxs(W,{className:"w-full md:w-[200px]",children:[e.jsx(be,{className:"mr-2 h-4 w-4"}),e.jsx(J,{placeholder:"Status"})]}),e.jsx(X,{children:a.map(o=>e.jsx(M,{value:o,children:o==="all"?"All Statuses":m(o)},o))})]}),e.jsxs(N,{variant:"outline",onClick:d,className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4"})," Clear"]})]})]})},ze=({room:l,isExpanded:t,onToggle:x,onEdit:u,onDelete:n})=>{const i=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a??0),j=a=>{switch(a){case"available":return"success";case"occupied":return"destructive";case"maintenance":return"warning";default:return"outline"}},d=l.room_type;return e.jsxs(e.Fragment,{children:[e.jsxs(H,{className:"cursor-pointer hover:bg-muted/50",onClick:x,children:[e.jsx(b,{children:e.jsx(N,{variant:"ghost",size:"sm",children:t?e.jsx(Fe,{className:"h-4 w-4"}):e.jsx(ke,{className:"h-4 w-4"})})}),e.jsx(b,{className:"font-medium",children:l.room_number}),e.jsx(b,{children:d?.name??"-"}),e.jsx(b,{children:d?.capacity!=null?`${d.capacity} People`:"-"}),e.jsx(b,{children:d?.price_per_night!=null?i(d.price_per_night):"-"}),e.jsx(b,{children:e.jsx(Ee,{variant:j(l.status),className:"capitalize",children:l.status})}),e.jsx(b,{onClick:a=>a.stopPropagation(),children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(N,{variant:"ghost",size:"sm",onClick:u,className:"bg-secondary text-secondary-foreground",children:e.jsx(we,{className:"h-4 w-4"})}),e.jsx(N,{variant:"ghost",size:"sm",onClick:n,className:"bg-destructive text-destructive-foreground",children:e.jsx(Se,{className:"h-4 w-4"})})]})})]}),t&&e.jsx(H,{children:e.jsx(b,{colSpan:7,className:"p-4 bg-muted/20",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No additional details for this room."})})},`${l.id}-details`)]})},Ue=({rooms:l,expandedRows:t,toggleRow:x,openEditModal:u,openDeleteModal:n,sortBy:i,sortDirection:j,handleSort:d})=>{const a=({field:m,children:o})=>e.jsx(B,{className:"cursor-pointer",onClick:()=>d(m),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:o}),i===m&&e.jsx(Ce,{className:`h-3 w-3 ${j==="asc"?"":"rotate-180"}`})]})});return e.jsx("div",{className:"rounded-md border",children:e.jsxs(Te,{children:[e.jsx(Re,{children:e.jsxs(H,{children:[e.jsx(B,{className:"w-8"}),e.jsx(a,{field:"room_number",children:"Room Number"}),e.jsx(a,{field:"room_type",children:"Type"}),e.jsx(B,{children:"Capacity"}),e.jsx(B,{children:"Price/Night"}),e.jsx(a,{field:"status",children:"Status"}),e.jsx(B,{children:"Actions"})]})}),e.jsx(Ie,{children:l.length>0?l.map(m=>e.jsx(ze,{room:m,isExpanded:t.includes(m.id),onToggle:()=>x(m.id),onEdit:()=>u(m),onDelete:()=>n(m)},m.id)):e.jsx(H,{children:e.jsx(b,{colSpan:7,className:"text-center py-8",children:"No rooms found"})})})]})})},ne=({data:l,setData:t,errors:x})=>{const u=[{id:"name",label:"Name *",type:"text",placeholder:"e.g., Standard, Deluxe"},{id:"capacity",label:"Capacity *",type:"number",min:1,placeholder:"Guests"},{id:"price_per_night",label:"Price per Night *",type:"number",min:0,step:"0.01",placeholder:"0.00"}];return e.jsx("div",{className:"grid gap-4 py-4",children:u.map(n=>e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(k,{htmlFor:n.id,className:"text-right",children:n.label}),e.jsx(se,{id:n.id,type:n.type,value:l[n.id]??"",onChange:i=>t(n.id,i.target.value),className:"col-span-3",placeholder:n.placeholder,...n.min!==void 0?{min:n.min}:{},...n.step!==void 0?{step:n.step}:{}}),x?.[n.id]&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:x[n.id]})]},n.id))})},Ve=2*1024*1024,He=["image/jpeg","image/jpg","image/png","image/webp"],_e=({size:l="w-16 h-16"})=>e.jsx("div",{className:`${l} rounded-md border bg-muted/40 animate-pulse flex items-center justify-center text-[10px] text-muted-foreground`,children:e.jsx($e,{className:"w-4 h-4 animate-spin opacity-60"})});function ye({mode:l,existingGeneralImages:t=[],newGeneralPreviews:x=[],onDeleteExisting:u,onDeleteNew:n,onAddNewSafe:i,localError:j,loadingImagesForEdit:d=!1}){return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[l==="edit"&&d&&e.jsxs(e.Fragment,{children:[e.jsx(_e,{}),e.jsx(_e,{})]}),l==="edit"&&!d&&t.length>0&&t.map(a=>e.jsxs("div",{className:"relative w-16 h-16 border rounded-md bg-white shadow-sm overflow-hidden",children:[e.jsx("img",{src:a.url??`/storage/${a.image_path}`,alt:a.caption||"room image",className:"object-cover w-full h-full"}),e.jsx("button",{type:"button",className:"absolute top-0 right-0 bg-red-600 text-white rounded-bl-md px-1 py-[2px] text-[10px] flex items-center gap-1",onClick:()=>u(a.id),title:"Remove this image",children:e.jsx(me,{className:"w-3 h-3"})})]},a.id)),x.length>0&&x.map((a,m)=>e.jsxs("div",{className:"relative w-16 h-16 border rounded-md bg-white ring-2 ring-purple-500/40 shadow-sm overflow-hidden",children:[e.jsx("img",{src:a.url,alt:a.file?.name||"new image",className:"object-cover w-full h-full"}),e.jsx("button",{type:"button",className:"absolute top-0 right-0 bg-purple-600 text-white rounded-bl-md px-1 py-[2px] text-[10px] flex items-center gap-1",onClick:()=>n(m),title:"Remove this new image",children:e.jsx(me,{className:"w-3 h-3"})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-purple-600 text-white text-[9px] leading-tight px-1 py-[2px] text-center",children:"new"})]},`new-${m}`))]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("label",{className:"inline-flex items-center gap-1 px-2 py-1.5 text-xs border rounded-md bg-white hover:bg-muted cursor-pointer w-fit",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:a=>i(a.target.files)}),e.jsx(Be,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Add Images"})]}),j?e.jsx("div",{className:"text-[10px] text-red-600 leading-tight",children:j}):e.jsx("div",{className:"text-[10px] text-muted-foreground leading-tight",children:"JPG / PNG / WebP â€¢ max 2MB each."})]})]})}const ve=({roomTypes:l=[],initialData:t=null,onSuccess:x,onCancel:u,onModeChange:n})=>{const[i,j]=c.useState(!1),[d,a]=c.useState(!1),[m,o]=c.useState(""),_=!!t,{data:r,setData:f,post:Z,processing:T,errors:I,reset:E}=de({is_range:!1,room_number:t?.room_number||"",start_room:"",end_room:"",room_type_id:t?.room_type_id||t?.room_type?.id||"",status:t?.status||"available",images:[],images_to_delete:[],_existingImages:t?.images||[],_newImagePreviews:[]});c.useEffect(()=>{n&&n(i)},[i,n]),c.useEffect(()=>{f({is_range:!1,room_number:t?.room_number||"",start_room:"",end_room:"",room_type_id:t?.room_type_id||t?.room_type?.id||"",status:t?.status||"available",images:[],images_to_delete:[],_existingImages:t?.images||[],_newImagePreviews:[]}),o("")},[t]);const q=s=>{j(s),f("is_range",s),s?f("room_number",""):(f("start_room",""),f("end_room",""))},A=s=>{if(!s||!s.length)return;const g=[],S=[];let y="";Array.from(s).forEach(w=>{if(w.size>Ve){y="One or more images exceed 2MB.";return}if(!He.includes(w.type)){y="Only JPG, PNG, or WebP images are allowed.";return}g.push(w),S.push({file:w,url:URL.createObjectURL(w)})}),o(y||""),g.length>0&&f(w=>({...w,images:[...w.images,...g],_newImagePreviews:[...w._newImagePreviews,...S]}))},O=s=>{f(g=>({...g,images:g.images.filter((S,y)=>y!==s),_newImagePreviews:g._newImagePreviews.filter((S,y)=>y!==s)}))},D=s=>{f(g=>({...g,images_to_delete:[...g.images_to_delete,s],_existingImages:g._existingImages.filter(S=>S.id!==s)}))},F=s=>{s.preventDefault();const g={...r};delete g._existingImages,delete g._newImagePreviews,_?P.post(route("rooms.update",t.id),{_method:"PUT",...g},{onSuccess:()=>{E(),x()},onError:()=>{f("_existingImages",t?.images||[])}}):Z(route("rooms.store"),{data:g,onSuccess:()=>{E(),x()}})},R=()=>{E(),u()},$=(()=>{if(!i||!r.start_room||!r.end_room)return 0;const s=r.start_room.match(/^([^\d]*)(\d+)$/),g=r.end_room.match(/^([^\d]*)(\d+)$/);if(s&&g&&s[1]===g[1]){const S=parseInt(s[2]),y=parseInt(g[2]);return Math.max(0,y-S+1)}return!isNaN(r.start_room)&&!isNaN(r.end_room)?Math.max(0,parseInt(r.end_room)-parseInt(r.start_room)+1):0})(),K=()=>{a(!1),P.reload({only:["roomTypes"]})},L=c.useMemo(()=>{if(!r.room_type_id)return!1;if(_){if(r._existingImages.length+r.images.length===0)return!1}else if(r.images.length===0)return!1;if(i){if(!r.start_room.trim()||!r.end_room.trim())return!1}else if(!r.room_number.trim())return!1;return!0},[_,i,r.room_number,r.start_room,r.end_room,r.room_type_id,r.images.length,r._existingImages.length]);return e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[!i&&e.jsxs(re,{children:[e.jsxs(xe,{className:"pb-4",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5"}),_?"Edit Single Room":"Create Single Room"]}),e.jsx(he,{children:_?`Editing room ${t.room_number}`:"Create a single room"})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(k,{htmlFor:"room_number",className:"text-right",children:"Room Number *"}),e.jsx(se,{id:"room_number",value:r.room_number,onChange:s=>f("room_number",s.target.value),className:"col-span-3",placeholder:"e.g., 101, A201"}),I.room_number&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:I.room_number})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(k,{htmlFor:"room_type_id",className:"text-right",children:"Room Type *"}),e.jsxs("div",{className:"col-span-3 flex gap-2",children:[e.jsxs(Y,{value:String(r.room_type_id||""),onValueChange:s=>f("room_type_id",s===""?null:Number(s)),children:[e.jsx(W,{className:"flex-1",children:e.jsx(J,{placeholder:"Select type"})}),e.jsx(X,{children:l.map(s=>e.jsx(M,{value:String(s.id),children:s.name},s.id))})]}),e.jsx(N,{type:"button",variant:"outline",onClick:()=>a(!0),children:"Add Type"})]}),I.room_type_id&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:I.room_type_id})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(k,{htmlFor:"status",className:"text-right",children:"Status *"}),e.jsxs(Y,{value:r.status||"available",onValueChange:s=>f("status",s),children:[e.jsx(W,{className:"col-span-3",children:e.jsx(J,{placeholder:"Select status"})}),e.jsxs(X,{children:[e.jsx(M,{value:"available",children:"Available"}),e.jsx(M,{value:"maintenance",children:"Maintenance"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[e.jsx(k,{htmlFor:"images",className:"text-right pt-2",children:"Images *"}),e.jsx("div",{className:"col-span-3",children:e.jsx(ye,{mode:_?"edit":"create",existingGeneralImages:r._existingImages,newGeneralPreviews:r._newImagePreviews,onDeleteExisting:D,onDeleteNew:O,onAddNewSafe:A,localError:m||I.images})})]})]})]}),i&&e.jsxs(re,{children:[e.jsxs(xe,{className:"pb-4",children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5"}),"Bulk Room Creation"]}),e.jsx(he,{children:"Create multiple rooms at once"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Room Number Range"}),$>0&&e.jsxs(Ee,{variant:"secondary",className:"text-xs",children:[$," rooms"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"start_room",className:"text-xs font-medium",children:"Start *"}),e.jsx(se,{id:"start_room",value:r.start_room,onChange:s=>f("start_room",s.target.value),className:"h-8 text-sm",placeholder:"e.g., 101"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"end_room",className:"text-xs font-medium",children:"End *"}),e.jsx(se,{id:"end_room",value:r.end_room,onChange:s=>f("end_room",s.target.value),className:"h-8 text-sm",placeholder:"e.g., 110"})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Specifications"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"room_type_id_bulk",className:"text-xs font-medium",children:"Type *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Y,{value:String(r.room_type_id||""),onValueChange:s=>f("room_type_id",s===""?null:Number(s)),children:[e.jsx(W,{className:"h-8 text-sm flex-1",children:e.jsx(J,{placeholder:"Select type"})}),e.jsx(X,{children:l.map(s=>e.jsx(M,{value:String(s.id),children:s.name},s.id))})]}),e.jsx(N,{type:"button",variant:"outline",size:"sm",onClick:()=>a(!0),children:"Add Type"})]})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"status_bulk",className:"text-xs font-medium",children:"Status *"}),e.jsxs(Y,{value:r.status||"available",onValueChange:s=>f("status",s),children:[e.jsx(W,{className:"h-8 text-sm",children:e.jsx(J,{placeholder:"Status"})}),e.jsxs(X,{children:[e.jsx(M,{value:"available",children:"Available"}),e.jsx(M,{value:"maintenance",children:"Maintenance"})]})]})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Images *"}),e.jsx(ye,{mode:"create",existingGeneralImages:[],newGeneralPreviews:r._newImagePreviews,onDeleteExisting:()=>{},onDeleteNew:O,onAddNewSafe:A,localError:m||I.images}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Images added here will be applied to ALL rooms created in this batch."})]})]})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[!_&&e.jsxs(re,{className:"flex flex-row items-center space-x-2 p-2 rounded-lg",children:[e.jsx("span",{className:`text-sm ${i?"font-medium":"text-muted-foreground"}`,children:"Bulk Rooms"}),e.jsx("button",{type:"button",onClick:()=>q(!i),className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 bg-muted",role:"switch","aria-checked":i,children:e.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-background shadow ring-0 transition duration-200 ease-in-out ${i?"translate-x-5":"translate-x-0"}`})})]}),_&&e.jsx("div",{}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(N,{type:"button",variant:"outline",onClick:R,children:"Cancel"}),e.jsx(N,{type:"submit",disabled:T||!L,children:T?"Saving...":_?"Update Room":"Create Room"})]})]})]}),e.jsx(G,{open:d,onOpenChange:a,children:e.jsxs(z,{className:"sm:max-w-md",children:[e.jsx(U,{children:e.jsx(V,{children:"Add Room Type"})}),e.jsx(ne,{onSuccess:K,onCancel:()=>a(!1)})]})})]})},De=({isOpen:l,onOpenChange:t,onConfirm:x,room:u,entityLabel:n,entityValue:i})=>{const j=n??(u?"Room":"Item"),d=i??(u?u.room_number:"");return e.jsx(G,{open:l,onOpenChange:t,children:e.jsxs(z,{children:[e.jsxs(U,{children:[e.jsx(V,{children:"Confirm Deletion"}),e.jsxs(ge,{children:["Are you sure you want to delete ",j,d?" ":"",d&&e.jsx("strong",{children:d}),"? This action cannot be undone."]})]}),e.jsxs(je,{children:[e.jsx(N,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsx(N,{variant:"destructive",onClick:x,children:"Delete"})]})]})})},Ye=({paginationData:l,buildPaginationUrl:t,router:x})=>{const{from:u,to:n,total:i,prev_page_url:j,next_page_url:d}=l,a=m=>{m&&x.get(t(m),{},{preserveState:!0,replace:!0})};return e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",u," to ",n," of ",i," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>a(j),disabled:!j,children:"Previous"}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>a(d),disabled:!d,children:"Next"})]})]})},We=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(l||0)),Je=({roomTypes:l=[]})=>{const[t,x]=c.useState("name"),[u,n]=c.useState("asc"),i=c.useMemo(()=>{const h=[...l],p=u==="asc"?1:-1;return h.sort((v,C)=>t==="capacity"?(Number(v.capacity)-Number(C.capacity))*p:t==="price_per_night"?(Number(v.price_per_night)-Number(C.price_per_night))*p:String(v.name).localeCompare(String(C.name))*p)},[l,t,u]),j=h=>{t===h?n(p=>p==="asc"?"desc":"asc"):(x(h),n("asc"))},d=({field:h,children:p,className:v=""})=>e.jsx(B,{className:`cursor-pointer ${v}`,onClick:()=>j(h),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:p}),t===h&&e.jsx(Ce,{className:`h-3 w-3 ${u==="asc"?"":"rotate-180"}`})]})}),[a,m]=c.useState(!1),{data:o,setData:_,post:r,processing:f,errors:Z,reset:T,clearErrors:I,setDefaults:E}=de({name:"",capacity:"",price_per_night:""}),q=()=>{E({name:"",capacity:"",price_per_night:""}),T(),I(),m(!0)},A=h=>{h.preventDefault(),r(route("room-types.store"),{preserveScroll:!0,onSuccess:()=>{T(),m(!1),P.reload({only:["roomTypes"]})}})},[O,D]=c.useState(!1),[F,R]=c.useState(null),{data:te,setData:$,put:K,processing:L,errors:s,reset:g,clearErrors:S,setDefaults:y}=de({name:"",capacity:"",price_per_night:""}),w=h=>{y({name:"",capacity:"",price_per_night:""}),g(),S(),R(h),$({name:h.name??"",capacity:h.capacity??"",price_per_night:h.price_per_night??""}),D(!0)},le=h=>{h.preventDefault(),F&&K(route("room-types.update",F.id),{preserveScroll:!0,onSuccess:()=>{D(!1),R(null),g(),P.reload({only:["roomTypes"]})}})},[oe,Q]=c.useState(!1),[ee,ae]=c.useState(null),ie=h=>{ae(h),Q(!0)},ce=()=>{ee&&P.delete(route("room-types.destroy",ee.id),{preserveScroll:!0,onSuccess:()=>{Q(!1),ae(null),P.reload({only:["roomTypes"]})}})};return c.useEffect(()=>{a||T()},[a]),c.useEffect(()=>{O||(R(null),g())},[O]),e.jsxs("div",{className:"mt-10",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Room Types"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage room type catalog"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(N,{onClick:q,className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"})," Add Type"]})})]}),e.jsx("div",{className:"rounded-md border overflow-hidden",children:e.jsxs(Te,{children:[e.jsx(Re,{children:e.jsxs(H,{children:[e.jsx(B,{className:"w-8"}),e.jsx(d,{field:"name",children:"Name"}),e.jsx(d,{field:"capacity",className:"w-40",children:"Capacity"}),e.jsx(d,{field:"price_per_night",className:"w-48",children:"Price/Night"}),e.jsx(B,{className:"w-40 text-right",children:"Actions"})]})}),e.jsx(Ie,{children:i.length?i.map(h=>e.jsxs(H,{children:[e.jsx(b,{}),e.jsx(b,{children:e.jsx("span",{className:"font-medium",children:h.name})}),e.jsxs(b,{children:[h.capacity," People"]}),e.jsx(b,{children:We(h.price_per_night)}),e.jsx(b,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(N,{size:"sm",variant:"ghost",onClick:()=>w(h),className:"inline-flex gap-1 bg-secondary text-secondary-foreground",title:"Edit",children:e.jsx(we,{className:"h-4 w-4"})}),e.jsx(N,{size:"sm",variant:"ghost",className:"inline-flex gap-1 bg-destructive text-destructive-foreground",onClick:()=>ie(h),title:"Delete",children:e.jsx(Se,{className:"h-4 w-4"})})]})})]},h.id)):e.jsx(H,{children:e.jsx(b,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No room types found"})})})]})}),e.jsx(G,{open:a,onOpenChange:m,children:e.jsx(z,{className:"sm:max-w-[425px]",children:e.jsxs("form",{onSubmit:A,children:[e.jsx(U,{children:e.jsx(V,{children:"Add Room Type"})}),e.jsx(ne,{data:o,setData:_,errors:Z}),e.jsxs(je,{className:"gap-2",children:[e.jsx(N,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(N,{type:"submit",disabled:f,children:f?"Saving...":"Save Type"})]})]})})}),e.jsx(G,{open:O,onOpenChange:D,children:e.jsx(z,{className:"sm:max-w-[425px]",children:e.jsxs("form",{onSubmit:le,children:[e.jsx(U,{children:e.jsx(V,{children:"Edit Room Type"})}),e.jsx(ne,{data:te,setData:$,errors:s}),e.jsxs(je,{className:"gap-2",children:[e.jsx(N,{type:"button",variant:"outline",onClick:()=>D(!1),children:"Cancel"}),e.jsx(N,{type:"submit",disabled:L,children:L?"Saving...":"Save Changes"})]})]})})}),e.jsx(De,{isOpen:oe,onOpenChange:Q,onConfirm:ce,entityLabel:"Room Type",entityValue:ee?.name??""})]})};function Xe(){const{rooms:l,roomTypes:t,filters:x,flash:u}=Pe().props,[n,i]=c.useState(x.search||""),[j,d]=c.useState(x.status||"all"),[a,m]=c.useState(x.room_type_id||"all"),[o,_]=c.useState(x.sort_by||"room_number"),[r,f]=c.useState(x.sort_direction||"asc"),[Z,T]=c.useState(!1),[I,E]=c.useState(!1),[q,A]=c.useState(!1),[O,D]=c.useState(!1),[F,R]=c.useState(null),[te,$]=c.useState([]),[K,L]=c.useState(!1);c.useEffect(()=>{u?.success&&Ne.success(u.success),u?.error&&Ne.error(u.error)},[u]),c.useEffect(()=>{const p=setTimeout(()=>s(1),500);return()=>clearTimeout(p)},[n,j,a,o,r]);const s=(p=x.page||1)=>{P.get(route("rooms.index"),{search:n,status:j==="all"?"":j,room_type_id:a==="all"?"":a,sort_by:o,sort_direction:r,page:p},{preserveState:!0,replace:!0})},g=p=>{o===p?f(v=>v==="asc"?"desc":"asc"):(_(p),f("asc"))},S=()=>{L(!1),T(!0)},y=p=>{R(p),E(!0)},w=p=>{R(p),A(!0)},le=()=>T(!1),oe=()=>{E(!1),R(null)},Q=()=>{P.delete(route("rooms.destroy",F.id),{onSuccess:()=>{A(!1),R(null)}})},ee=()=>{D(!1),P.reload({only:["roomTypes"]})},ae=()=>{i(""),d("all"),m("all"),_("room_number"),f("asc")},ie=p=>$(v=>v.includes(p)?v.filter(C=>C!==p):[...v,p]),ce=p=>{if(!p)return null;const v=new URL(p,window.location.origin),C=new URLSearchParams(v.search);return C.set("search",n),C.set("status",j==="all"?"":j),C.set("room_type_id",a==="all"?"":a),C.set("sort_by",o),C.set("sort_direction",r),`${v.pathname}?${C.toString()}`},h=p=>L(p);return e.jsxs("div",{className:"container mx-auto py-2 px-4",children:[e.jsxs(re,{className:"mb-8",children:[e.jsx(Le,{onAddRoom:S}),e.jsxs(pe,{children:[e.jsx(Ge,{searchTerm:n,setSearchTerm:i,selectedStatus:j,setSelectedStatus:d,selectedTypeId:a,setSelectedTypeId:m,roomTypes:t,clearFilters:ae}),e.jsx(Ue,{rooms:l.data,expandedRows:te,toggleRow:ie,openEditModal:y,openDeleteModal:w,sortBy:o,sortDirection:r,handleSort:g}),e.jsx(Ye,{paginationData:l,buildPaginationUrl:ce,router:P})]})]}),e.jsx(Je,{roomTypes:t}),e.jsx(G,{open:Z,onOpenChange:T,children:e.jsxs(z,{className:`${K?"sm:max-w-4xl":"sm:max-w-2xl"} max-h-[90vh] overflow-y-auto`,children:[e.jsxs(U,{children:[e.jsx(V,{children:"Create New Room"}),e.jsx(ge,{children:"Add a new room to the hotel. You can create a single room or a range of rooms at once."})]}),e.jsx(ve,{roomTypes:t,onSuccess:le,onCancel:()=>T(!1),onModeChange:h})]})}),e.jsx(G,{open:I,onOpenChange:E,children:e.jsxs(z,{className:"sm:max-w-2xl",children:[e.jsxs(U,{children:[e.jsx(V,{children:"Edit Room"}),e.jsx(ge,{children:"Update the room details. Note: You cannot edit a range of rooms at once."})]}),e.jsx(ve,{roomTypes:t,initialData:F,onSuccess:oe,onCancel:()=>{E(!1),R(null)}})]})}),e.jsx(De,{isOpen:q,onOpenChange:A,onConfirm:Q,room:F}),e.jsx(G,{open:O,onOpenChange:D,children:e.jsxs(z,{className:"sm:max-w-md",children:[e.jsx(U,{children:e.jsx(V,{children:"Add Room Type"})}),e.jsx(ne,{onSuccess:ee,onCancel:()=>D(!1)})]})})]})}Xe.layout=l=>e.jsx(Ae,{children:l});export{Xe as default};
