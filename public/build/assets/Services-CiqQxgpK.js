import{r as h,j as e,L as fe,b as Z,c as be,u as le,R as Ee}from"./app-Xum8xYk4.js";import{c as Ne,B as f}from"./button-D_pCvGFT.js";import{C as U,a as se,b as te,c as ne,d as V}from"./card-_ENwegIX.js";import{P as ve,T as ye,t as I}from"./index-B0xz6GqK.js";import{X as Me,d as Le,A as $e}from"./AuthenticatedLayout-C6bPXZFp.js";import{B as P}from"./badge-CfzvdEf6.js";import{I as we,L as xe}from"./label-CALARFfE.js";import{S as X,a as J,b as W,c as K,d as $}from"./select-DaGNP5ZC.js";import{S as ze,D as R,b as B,c as q,d as H,e as ie,A as Re,f as ee}from"./dialog-DROVjM-Y.js";import{F as he}from"./funnel-DrYU1sAy.js";import{C as Y}from"./circle-check-DJAPOfsO.js";import{T as L,a as w,b as ce,c as oe,d as O,e as de}from"./table-CoqkGrDp.js";import{S as ue}from"./scroll-area-CU0gyLji.js";import{C as Be}from"./chevron-down-BNbL4uHU.js";import{C as qe}from"./circle-check-big-D-tkWdJI.js";import{I as pe}from"./info-C1KcLEf3.js";import{C as He}from"./circle-question-mark-DyKAFYy1.js";import{S as Qe}from"./separator-CL31ojOp.js";import{S as Ue}from"./star-BcgftNje.js";import{T as Ve}from"./trending-up-Eysniktq.js";import{L as je}from"./loader-circle-Bpb0qW-w.js";import{T as Ge}from"./textarea-CmwlULe-.js";import{P as Xe}from"./plus-DObaf2Oy.js";/* empty css            */import"./index-v5_tpC5X.js";import"./index-CbZI8xg4.js";import"./index-BBYHTZfh.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"m22 11-1.296-1.296a2.4 2.4 0 0 0-3.408 0L11 16",key:"9kzy35"}],["path",{d:"M4 8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2",key:"1t0f0t"}],["circle",{cx:"13",cy:"7",r:"1",fill:"currentColor",key:"1obus6"}],["rect",{x:"8",y:"2",width:"14",height:"14",rx:"2",key:"1gvhby"}]],We=Ne("images",Je);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Ye=Ne("list",Ke),Ze=({searchTerm:s,setSearchTerm:r,selectedType:a,setSelectedType:o,selectedFulfillment:b,setSelectedFulfillment:u,selectedOfferingSession:d,setSelectedOfferingSession:N,categories:p=[],selectedCategory:i,setSelectedCategory:S,clearFilters:D,filterOptions:x})=>{const[c,n]=h.useState(!1),k=t=>t==="per_unit"?"Per Unit":t==="selectable"?"Selectable":t==="multiple_options"?"Multiple Options":t==="free"?"Free":"Fixed Price",j=t=>t==="staff_assisted"?"Staff Assisted":"Direct",_=t=>t==="pre_checkin"?"Pre Check-in":t==="post_checkin"?"Post Check-in":"Pre Checkout",A=x?.types??["fixed","per_unit","selectable","multiple_options","free"],E=x?.fulfillment_types??["direct","staff_assisted"],F=x?.offering_sessions??["pre_checkin","post_checkin","pre_checkout"],T=()=>a!=="all"||b!=="all"||d!=="all"||i&&i!=="all",z=()=>{let t=0;return a!=="all"&&t++,b!=="all"&&t++,d!=="all"&&t++,i&&i!=="all"&&t++,t},M=()=>{const t=[];if(a!=="all"&&t.push(k(a)),b!=="all"&&t.push(j(b)),d!=="all"&&t.push(_(d)),i&&i!=="all"){const C=p.find(Q=>String(Q.id)===i);t.push(C?C.name:`Category ID: ${i}`)}return t},m=t=>{switch(t){case"category":return i&&i!=="all";case"type":return a!=="all";case"fulfillment":return b!=="all";case"session":return d!=="all";default:return!1}};return e.jsx("div",{className:"flex flex-col gap-3 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ze,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(we,{placeholder:"Search services...",value:s,onChange:t=>r(t.target.value),className:"pl-10"})]}),e.jsxs(R,{open:c,onOpenChange:n,children:[e.jsxs(f,{variant:"outline",className:"flex items-center gap-2 min-w-[120px] justify-between",onClick:()=>n(!0),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4"}),"Filters"]}),T()&&e.jsx("span",{className:"bg-green-600 text-white text-xs rounded-full px-2 py-0.5",children:z()})]}),e.jsxs(B,{className:"sm:max-w-[500px] rounded-xl p-0 overflow-hidden",style:{maxHeight:"85vh",marginTop:"5vh",marginBottom:"5vh",display:"flex",flexDirection:"column"},children:[e.jsxs(q,{className:"p-4 pb-2 border-b",children:[e.jsxs(H,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5 text-green-600"}),"Filter Services"]}),e.jsx(ie,{className:"text-sm text-muted-foreground",children:"Adjust filters to refine your service list."})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-5",children:[T()&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:[e.jsx("div",{className:"text-xs font-medium text-green-800 mb-1",children:"Active Filters:"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:M().map((t,C)=>e.jsx(P,{className:"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full",children:t},C))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("label",{className:"text-sm font-semibold",children:"Category"}),m("category")&&e.jsx(Y,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(X,{value:i==="all"||!i?"all":String(i),onValueChange:S,children:[e.jsx(J,{className:`w-full h-9 text-sm ${m("category")?"border-green-500 bg-green-50":""}`,children:e.jsx(W,{placeholder:"Select category"})}),e.jsxs(K,{children:[e.jsx($,{value:"all",children:"All Categories"}),p.map(t=>e.jsx($,{value:String(t.id),children:t.name},t.id))]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("label",{className:"text-sm font-semibold",children:"Type"}),m("type")&&e.jsx(Y,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(X,{value:a,onValueChange:o,children:[e.jsx(J,{className:`w-full h-9 text-sm ${m("type")?"border-green-500 bg-green-50":""}`,children:e.jsx(W,{placeholder:"Select type"})}),e.jsxs(K,{children:[e.jsx($,{value:"all",children:"All Types"}),A.map(t=>e.jsx($,{value:t,children:k(t)},t))]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("label",{className:"text-sm font-semibold",children:"Fulfillment"}),m("fulfillment")&&e.jsx(Y,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(X,{value:b,onValueChange:u,children:[e.jsx(J,{className:`w-full h-9 text-sm ${m("fulfillment")?"border-green-500 bg-green-50":""}`,children:e.jsx(W,{placeholder:"Select fulfillment"})}),e.jsxs(K,{children:[e.jsx($,{value:"all",children:"All Fulfillments"}),E.map(t=>e.jsx($,{value:t,children:j(t)},t))]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("label",{className:"text-sm font-semibold",children:"Session"}),m("session")&&e.jsx(Y,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(X,{value:d,onValueChange:N,children:[e.jsx(J,{className:`w-full h-9 text-sm ${m("session")?"border-green-500 bg-green-50":""}`,children:e.jsx(W,{placeholder:"Select session"})}),e.jsxs(K,{children:[e.jsx($,{value:"all",children:"All Sessions"}),F.map(t=>e.jsx($,{value:t,children:_(t)},t))]})]})]})]}),e.jsxs("div",{className:"p-4 border-t bg-muted/30 flex justify-between items-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Filters apply automatically"}),e.jsxs(f,{variant:"ghost",size:"sm",onClick:()=>{D(),n(!1)},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Clear All"]})]})]})]})]})})},es=({service:s,isExpanded:r,onToggle:a,onDelete:o,onOpenImages:b,formatPrice:u,getTypeBadge:d,getFulfillmentBadge:N,getOfferingSessionBadge:p})=>{const i=s.type==="multiple_options",S=()=>s.type==="selectable"||i?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm",children:"Multiple options"}),e.jsx(pe,{className:"h-3 w-3 text-muted-foreground"})]}):!s.price||Number(s.price)===0?e.jsx("span",{className:"inline-flex text-xs font-medium px-2 py-1 rounded border border-emerald-200 bg-emerald-50 text-emerald-700",children:"Free"}):e.jsx("span",{className:"font-medium",children:u(s.price)}),D=()=>s.category?e.jsx(P,{variant:"outline",className:"text-xs",children:s.category.name}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"None"}),x=s.has_active_questions&&s.active_question?.questions_json?.length>0,c=(s.type==="selectable"||i)&&Array.isArray(s.options)&&s.options.length>0,n=({options:m})=>e.jsx("div",{className:"flex flex-wrap gap-2",children:m.map((t,C)=>e.jsxs(P,{variant:"outline",className:"text-xs px-2 py-1 flex flex-col items-start",children:[e.jsx("span",{className:"mr-1 font-medium",children:t.name}),e.jsx("span",{className:"text-muted-foreground",children:u(t.price)})]},C))}),k=({options:m})=>e.jsx("div",{className:"rounded-md border bg-background",children:e.jsx(ue,{className:"max-h-56",children:e.jsxs(ce,{children:[e.jsx(oe,{children:e.jsxs(L,{children:[e.jsx(O,{className:"py-2",children:"Option"}),e.jsx(O,{className:"py-2 text-right",children:"Price"})]})}),e.jsx(de,{children:m.map((t,C)=>e.jsxs(L,{children:[e.jsx(w,{className:"text-sm py-2",children:t.name}),e.jsx(w,{className:"text-right font-medium py-2",children:u(t.price)})]},C))})]})})}),j=({questions:m})=>e.jsx("ol",{className:"list-decimal ml-4 space-y-1",children:m.map((t,C)=>e.jsx("li",{className:"text-sm",children:t},C))}),_=({questions:m})=>e.jsx("div",{className:"rounded-md border bg-background",children:e.jsx(ue,{className:"max-h-56 p-3",children:e.jsx("ol",{className:"list-decimal ml-4 space-y-1",children:m.map((t,C)=>e.jsx("li",{className:"text-sm",children:t},C))})})}),A=c&&s.options.length<=4,E=c&&s.options.length>4,F=s.active_question?.questions_json??[],T=x&&F.length<=5,z=x&&F.length>5,M=!c&&!x;return e.jsxs(e.Fragment,{children:[e.jsxs(L,{className:"cursor-pointer hover:bg-muted/50",onClick:a,children:[e.jsx(w,{children:e.jsx(f,{variant:"ghost",size:"sm",children:r?e.jsx(Be,{className:"h-4 w-4"}):e.jsx(Le,{className:"h-4 w-4"})})}),e.jsx(w,{className:"font-medium",children:s.name}),e.jsx(w,{children:d(s.type,s.unit_name)}),e.jsx(w,{children:N(s.fulfillment_type)}),e.jsx(w,{children:p(s.offering_session)}),e.jsx(w,{children:D()}),e.jsx(w,{children:S()}),e.jsx(w,{children:x?e.jsxs(P,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 flex items-center gap-1",children:[e.jsx(qe,{className:"h-3 w-3"}),"Questions"]}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"None"})}),e.jsx(w,{onClick:m=>m.stopPropagation(),children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(f,{asChild:!0,variant:"ghost",size:"sm",className:"bg-secondary text-secondary-foreground",children:e.jsx(fe,{href:route("services.edit",s.id),onClick:m=>m.stopPropagation(),children:e.jsx(ve,{className:"h-4 w-4"})})}),e.jsx(f,{variant:"ghost",size:"sm",onClick:o,className:"bg-destructive text-destructive-foreground",children:e.jsx(ye,{className:"h-4 w-4"})})]})})]}),r&&e.jsx(L,{children:e.jsx(w,{colSpan:9,className:"p-0",children:e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"text-xs text-muted-foreground leading-tight",children:[e.jsx("div",{className:"font-medium text-sm text-foreground",children:s.name}),e.jsxs("div",{className:"mt-0.5",children:["ID #",s.id]})]}),e.jsxs(f,{type:"button",variant:"outline",size:"sm",className:"flex items-center gap-1 text-xs",onClick:m=>{m.stopPropagation(),b(s)},children:[e.jsx(We,{className:"h-4 w-4"}),"View Images"]})]}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[e.jsxs("div",{className:"bg-white rounded-md border shadow-sm p-3 md:col-span-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"bg-indigo-100 p-1.5 rounded-full",children:e.jsx(pe,{className:"h-4 w-4 text-indigo-600"})}),e.jsx("h3",{className:"text-sm font-semibold",children:"Service Info"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.description_html?e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:s.description_html}}):e.jsx("span",{children:"No description."})})]}),c&&e.jsxs("div",{className:"bg-white rounded-md border shadow-sm p-3 md:col-span-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"bg-green-100 p-1.5 rounded-full",children:e.jsx(Ye,{className:"h-4 w-4 text-green-600"})}),e.jsx("h3",{className:"text-sm font-semibold",children:i?"Available Options (Multi-Select)":"Available Options"}),i&&e.jsx(P,{variant:"outline",className:"ml-auto bg-fuchsia-50 text-fuchsia-700 border-fuchsia-200",children:"Multi-Select"})]}),A&&e.jsx(n,{options:s.options}),E&&e.jsx(k,{options:s.options})]}),x&&e.jsxs("div",{className:"bg-white rounded-md border shadow-sm p-3 md:col-span-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"bg-purple-100 p-1.5 rounded-full",children:e.jsx(He,{className:"h-4 w-4 text-purple-600"})}),e.jsx("h3",{className:"text-sm font-semibold",children:"Custom Questions"})]}),T&&e.jsx(j,{questions:F}),z&&e.jsx(_,{questions:F})]})]}),M&&e.jsx("div",{className:"mt-2 text-xs text-muted-foreground"})]})})},`${s.id}-details`)]})},ss=({services:s=[],expandedRows:r=[],toggleRow:a,openDeleteModal:o,openImagesModal:b,formatPrice:u,formatType:d,formatFulfillment:N,sortBy:p,sortDirection:i,handleSort:S,getTypeBadge:D,getFulfillmentBadge:x,getOfferingSessionBadge:c})=>{const n=({field:j,children:_})=>e.jsx(O,{className:"cursor-pointer select-none",onClick:()=>S(j),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:_}),p===j&&e.jsx(Re,{className:`h-3 w-3 transition-transform ${i==="asc"?"rotate-180":""}`})]})}),k=Array.isArray(r)?r:[];return e.jsx("div",{className:"rounded-md border overflow-x-auto",children:e.jsxs(ce,{className:"min-w-[1000px]",children:[e.jsx(oe,{children:e.jsxs(L,{children:[e.jsx(O,{className:"w-8"}),e.jsx(n,{field:"name",children:"Name"}),e.jsx(n,{field:"type",children:"Type"}),e.jsx(n,{field:"fulfillment_type",children:"Fulfillment"}),e.jsx(n,{field:"offering_session",children:"Session"}),e.jsx(n,{field:"category_id",children:"Category"}),e.jsx(n,{field:"price",children:"Price"}),e.jsx(O,{children:"Questions"}),e.jsx(O,{children:"Actions"})]})}),e.jsx(de,{children:Array.isArray(s)&&s.length>0?s.map(j=>e.jsx(es,{service:j,isExpanded:k.includes(j.id),onToggle:()=>a?.(j.id),onDelete:_=>{_?.stopPropagation?.(),o?.(j)},onOpenImages:_=>b?.(_),formatPrice:u,formatType:d,formatFulfillment:N,getTypeBadge:D,getFulfillmentBadge:x,getOfferingSessionBadge:c},j.id)):e.jsx(L,{children:e.jsx(w,{colSpan:9,className:"text-center py-8 text-muted-foreground text-sm",children:"No services found"})})})]})})},ts=({isOpen:s,onOpenChange:r,onConfirm:a,service:o})=>o?e.jsx(R,{open:s,onOpenChange:r,children:e.jsxs(B,{children:[e.jsxs(q,{children:[e.jsx(H,{children:"Confirm Deletion"}),e.jsxs(ie,{children:["Are you sure you want to delete the service"," ",e.jsx("strong",{children:o.name}),"? This action cannot be undone."]})]}),e.jsxs(ee,{children:[e.jsx(f,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(f,{variant:"destructive",onClick:a,children:"Delete"})]})]})}):null,as=({paginationData:s,buildPaginationUrl:r})=>{const{from:a,to:o,total:b,prev_page_url:u,next_page_url:d}=s,N=p=>{p&&Z.get(r(p),{},{preserveState:!0,replace:!0})};return e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",a," to ",o," of ",b," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:()=>N(u),disabled:!u,children:"Previous"}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>N(d),disabled:!d,children:"Next"})]})]})},rs=({popularService:s,profitableService:r,formatPrice:a})=>e.jsxs(U,{children:[e.jsxs(se,{children:[e.jsx(te,{children:"Highlight Layanan"}),e.jsx(ne,{children:"Layanan paling populer dan paling menguntungkan."})]}),e.jsxs(V,{className:"space-y-4",children:[s?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4 text-yellow-500"}),e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Paling Populer"})]}),e.jsx("p",{className:"text-lg font-semibold",children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.orders_count," pesanan"]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Data populer tidak tersedia."}),e.jsx(Qe,{}),r?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4 text-emerald-500"}),e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Paling Menguntungkan"})]}),e.jsx("p",{className:"text-lg font-semibold",children:r.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a(r.revenue)," pendapatan"]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Data keuntungan tidak tersedia."})]})]});function ls({data:s}){const r=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(a);return e.jsxs(U,{className:"md:col-span-2",children:[e.jsxs(se,{children:[e.jsx(te,{children:"Layanan Terlaris"}),e.jsx(ne,{children:"Peringkat berdasarkan pendapatan selama 7 hari terakhir"})]}),e.jsx(V,{children:e.jsxs(ce,{children:[e.jsx(oe,{children:e.jsxs(L,{children:[e.jsx(O,{className:"w-[80px]",children:"Peringkat"}),e.jsx(O,{children:"Nama Layanan"}),e.jsx(O,{className:"text-right",children:"Jumlah Pesanan"}),e.jsx(O,{className:"text-right",children:"Total Pendapatan"})]})}),e.jsx(de,{children:s&&s.length>0?s.map(a=>e.jsxs(L,{children:[e.jsx(w,{className:"font-medium text-center",children:a.rank}),e.jsx(w,{className:"font-medium",children:a.serviceName}),e.jsx(w,{className:"text-right",children:a.orderCount}),e.jsx(w,{className:"text-right",children:r(a.totalRevenue)})]},a.rank)):e.jsx(L,{children:e.jsx(w,{colSpan:4,className:"h-24 text-center",children:"Belum ada data pendapatan layanan dalam 7 hari terakhir."})})})]})})]})}function ns({open:s,onOpenChange:r,serviceMeta:a}){const[o,b]=h.useState(!1),[u,d]=h.useState(null),[N,p]=h.useState([]),[i,S]=h.useState([]);h.useEffect(()=>{if(!s||!a?.id)return;(async()=>{b(!0),d(null);try{const n=await fetch(route("services.images",a.id),{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!n.ok)throw new Error(`Request failed with status ${n.status}`);const k=await n.json();p(Array.isArray(k.images)?k.images:[]),S(Array.isArray(k.optionImages)?k.optionImages:[])}catch(n){console.error("Failed to load images",n),d("Couldn't load images for this service."),p([]),S([])}finally{b(!1)}})()},[s,a?.id]);const D=()=>e.jsx("div",{className:"w-24 h-24 rounded-md border bg-muted/40 relative overflow-hidden animate-pulse",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(je,{className:"w-5 h-5 animate-spin text-muted-foreground/70"})})}),x=()=>e.jsxs("div",{className:"rounded-md border bg-white p-2 flex flex-col items-center animate-pulse",children:[e.jsx("div",{className:"w-24 h-24 flex-shrink-0 rounded-md overflow-hidden mb-2 bg-muted/40 relative",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(je,{className:"w-5 h-5 animate-spin text-muted-foreground/70"})})}),e.jsxs("div",{className:"w-full flex flex-col items-center gap-1",children:[e.jsx("div",{className:"h-3 w-20 bg-muted/30 rounded"}),e.jsx("div",{className:"h-2 w-16 bg-muted/20 rounded"})]})]});return e.jsx(R,{open:s,onOpenChange:r,children:e.jsxs(B,{className:"max-w-2xl max-h-[85vh] flex flex-col p-0 overflow-hidden",children:[e.jsx("div",{className:"px-5 py-4 border-b bg-gradient-to-br from-muted/30 to-background",children:e.jsxs(q,{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(H,{className:"text-lg font-semibold",children:a?.name??"Service Images"})}),e.jsx(ie,{className:"text-sm text-muted-foreground",children:"Preview gallery for guest-facing view"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-4",children:e.jsxs("div",{className:"space-y-6",children:[u&&!o&&e.jsx("div",{className:"text-center py-3 px-4 bg-red-50 border border-red-100 rounded-md text-red-600",children:u}),e.jsxs("section",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold",children:"Service Images"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"General visuals"})]}),e.jsx(P,{variant:"outline",children:"General"})]}),o?e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(D,{}),e.jsx(D,{}),e.jsx(D,{})]}):N.length===0?e.jsx("div",{className:"py-6 text-center text-muted-foreground border border-dashed rounded-md",children:"No general images uploaded."}):e.jsx("div",{className:"flex flex-wrap gap-3",children:N.map((c,n)=>e.jsx("div",{className:"w-24 h-24 rounded-md border bg-white shadow-sm overflow-hidden relative",children:e.jsx("img",{src:c.url??`/storage/${c.image_path}`,alt:c.caption||`Service image ${n+1}`,className:"object-cover w-full h-full"})},c.id??n))})]}),e.jsxs("section",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold",children:"Option Images"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Each option has its own thumbnail"})]}),e.jsx(P,{variant:"outline",children:"Per Option"})]}),o?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[e.jsx(x,{}),e.jsx(x,{})]}):i.length===0?e.jsx("div",{className:"py-6 text-center text-muted-foreground border border-dashed rounded-md",children:"No option-specific images uploaded."}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:i.map((c,n)=>e.jsxs("div",{className:"rounded-md border bg-white p-2 flex flex-col items-center",children:[e.jsx("div",{className:"w-24 h-24 flex-shrink-0 rounded-md overflow-hidden mb-2 bg-muted/20",children:e.jsx("img",{src:c.url??`/storage/${c.image_path}`,alt:c.option_name||"Option image",className:"object-contain w-full h-full"})}),e.jsxs("div",{className:"flex-1 min-w-0 w-full text-center",children:[e.jsx("div",{className:"font-medium text-slate-800 text-sm truncate",children:c.option_name||c.option_key||`Option ${n+1}`}),c.caption&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:c.caption})]})]},c.id??n))})]})]})})]})})}const ge=({data:s,setData:r,errors:a})=>e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(xe,{htmlFor:"name",className:"text-right",children:"Name *"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(we,{id:"name",type:"text",value:s.name??"",onChange:o=>r("name",o.target.value),className:a?.name?"border-red-500":"",placeholder:"e.g., Dining & Beverages"}),a?.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.name})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[e.jsx(xe,{htmlFor:"description",className:"text-right mt-1",children:"Description"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(Ge,{id:"description",value:s.description??"",onChange:o=>r("description",o.target.value),className:a?.description?"border-red-500":"",placeholder:"Briefly describe this service category...",rows:3}),a?.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.description})]})]})]}),is=({categories:s})=>{const{flash:r}=be().props,[a,o]=h.useState(null),[b,u]=h.useState(!1),[d,N]=h.useState(null),{data:p,setData:i,errors:S,post:D,processing:x,reset:c,clearErrors:n}=le({name:"",slug:"",description:""}),{data:k,setData:j,errors:_,put:A,processing:E,reset:F,clearErrors:T}=le({name:"",slug:"",description:""}),{delete:z,processing:M}=le(),m=v=>{o(v),j({name:v.name,slug:v.slug,description:v.description||""})},t=v=>{v.preventDefault(),D(route("service-categories.store"),{onSuccess:()=>{u(!1),c(),n(),I.success("Category created successfully")},onError:re=>{I.error("Failed to create category")}})},C=v=>{v.preventDefault(),A(route("service-categories.update",a.id),{onSuccess:()=>{o(null),F(),T(),I.success("Category updated successfully")},onError:re=>{I.error("Failed to update category")}})},Q=v=>{N(v)},ae=()=>{d&&z(route("service-categories.destroy",d.id),{onSuccess:()=>{N(null),I.success("Category deleted successfully")},onError:()=>{I.error("Failed to delete category")}})};return Ee.useEffect(()=>{r.success&&I.success(r.success),r.error&&I.error(r.error)},[r]),e.jsxs(U,{className:"mt-8",children:[e.jsxs(se,{className:"flex flex-row items-center justify-between",children:[e.jsx(te,{className:"text-xl font-semibold",children:"Service Categories"}),e.jsxs(f,{onClick:()=>u(!0),children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"})," Add Category"]})]}),e.jsx(V,{children:e.jsx("div",{className:"rounded-md border overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Name"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Description"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"Services"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium",children:"Actions"})]})}),e.jsxs("tbody",{children:[s.map(v=>e.jsxs("tr",{className:"border-b hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"py-3 px-4 font-medium",children:v.name}),e.jsx("td",{className:"py-3 px-4",children:v.description||"-"}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs(P,{variant:"outline",className:"ml-auto border-blue-200 bg-blue-100 text-blue-800 text-xs",children:[v.services_count||0," Services"]})}),e.jsx("td",{className:"py-3 px-4 text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>m(v),className:"bg-secondary text-secondary-foreground",children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>Q(v),className:"bg-destructive text-destructive-foreground",children:e.jsx(ye,{className:"h-4 w-4"})})]})})]},v.id)),s.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center py-8 text-muted-foreground",children:"No service categories found."})})]})]})})}),e.jsx(R,{open:b,onOpenChange:u,children:e.jsxs(B,{className:"sm:max-w-[425px]",children:[e.jsx(q,{children:e.jsx(H,{children:"Add Service Category"})}),e.jsxs("form",{onSubmit:t,children:[e.jsx(ge,{data:p,setData:i,errors:S}),e.jsxs(ee,{className:"mt-4",children:[e.jsx(f,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(f,{type:"submit",disabled:x,children:x?"Creating...":"Create Category"})]})]})]})}),e.jsx(R,{open:!!a,onOpenChange:()=>o(null),children:e.jsxs(B,{className:"sm:max-w-[425px]",children:[e.jsx(q,{children:e.jsx(H,{children:"Edit Service Category"})}),a&&e.jsxs("form",{onSubmit:C,children:[e.jsx(ge,{data:k,setData:j,errors:_}),e.jsxs(ee,{className:"mt-4",children:[e.jsx(f,{type:"button",variant:"outline",onClick:()=>o(null),children:"Cancel"}),e.jsx(f,{type:"submit",disabled:E,children:E?"Saving...":"Save Changes"})]})]})]})}),e.jsx(R,{open:!!d,onOpenChange:()=>N(null),children:e.jsxs(B,{className:"sm:max-w-[425px]",children:[e.jsx(q,{children:e.jsx(H,{children:"Confirm Deletion"})}),e.jsxs("div",{className:"py-4",children:[e.jsxs("p",{children:['Are you sure you want to delete "',d?.name,'"?']}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"This action cannot be undone."})]}),e.jsxs(ee,{children:[e.jsx(f,{variant:"outline",onClick:()=>N(null),children:"Cancel"}),e.jsx(f,{variant:"destructive",onClick:ae,disabled:M,children:M?"Deleting...":"Delete"})]})]})})]})};function cs(){const{services:s,filters:r,flash:a,insights:o,filterOptions:b,categories:u}=be().props,[d,N]=h.useState(r.search||""),[p,i]=h.useState(r.type||"all"),[S,D]=h.useState(r.fulfillment_type||"all"),[x,c]=h.useState(r.offering_session||"all"),[n,k]=h.useState(r.category_id||"all"),[j,_]=h.useState(r.sort_by||"created_at"),[A,E]=h.useState(r.sort_direction||"desc"),[F,T]=h.useState(!1),[z,M]=h.useState(!1),[m,t]=h.useState(null),[C,Q]=h.useState(null),[ae,v]=h.useState([]);h.useEffect(()=>{a?.success&&I.success(a.success),a?.error&&I.error(a.error)},[a]),h.useEffect(()=>{const l=setTimeout(()=>re(),500);return()=>clearTimeout(l)},[d,p,S,x,n,j,A]);const re=(l=1)=>{Z.get(route("services.index"),{search:d,type:p==="all"?"":p,fulfillment_type:S==="all"?"":S,offering_session:x==="all"?"":x,category_id:n==="all"?"":n,sort_by:j,sort_direction:A,page:l},{preserveState:!0,replace:!0})},Se=l=>{_(l),E(A==="asc"?"desc":"asc")},Ce=l=>{t({id:l.id,name:l.name,type:l.type}),M(!0)},ke=l=>{Q(l),T(!0)},_e=l=>v(g=>g.includes(l)?g.filter(y=>y!==l):[...g,l]),De=()=>{N(""),i("all"),D("all"),c("all"),k("all"),_("created_at"),E("desc")},me=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(l||0),Ae=(l,g)=>{let y=l;switch(l){case"fixed":y="Fixed";break;case"per_unit":y=`Per Unit ${g?`(${g})`:""}`;break;case"selectable":y="Select";break;case"multiple_options":y="Multi-Select";break;default:y=l}const Oe={fixed:"bg-blue-100 text-blue-800 border-blue-200",per_unit:"bg-emerald-100 text-emerald-800 border-emerald-200",selectable:"bg-violet-100 text-violet-800 border-violet-200",multiple_options:"bg-fuchsia-100 text-fuchsia-800 border-fuchsia-200",free:"bg-rose-100 text-rose-800 border-rose-200"}[l]||"bg-gray-100 text-gray-800 border-gray-200";return e.jsx(P,{className:`capitalize text-xs font-medium w-28 justify-center ${Oe}`,variant:"outline",children:y})},Pe=l=>{let g=l;switch(l){case"direct":g="Direct";break;case"staff_assisted":g="Staff Assisted";break;default:g=l}const G={direct:"bg-slate-100 text-slate-800 border-slate-200",staff_assisted:"bg-amber-100 text-amber-800 border-amber-200"}[l]||"bg-gray-100 text-gray-800 border-gray-200";return e.jsx(P,{className:`capitalize text-xs font-medium w-32 justify-center ${G}`,variant:"outline",children:g})},Fe=l=>{let g=l?l.replace("_"," "):"N/A";switch(l){case"pre_checkin":g="Pre Check-in";break;case"post_checkin":g="Post Check-in";break;case"pre_checkout":g="Pre Checkout";break;case"free":g="Free";break;default:g=l}const G={pre_checkin:"bg-indigo-100 text-indigo-800 border-indigo-200",post_checkin:"bg-green-100 text-green-800 border-green-200",pre_checkout:"bg-orange-100 text-orange-800 border-orange-200",free:"bg-rose-100 text-rose-800 border-rose-200"}[l]||"bg-gray-100 text-gray-800 border-gray-200";return e.jsx(P,{className:`capitalize text-xs font-medium w-32 justify-center ${G}`,variant:"outline",children:g})},Te=l=>{if(!l)return null;const g=new URL(l),y=new URLSearchParams(g.search);return y.set("search",d),y.set("type",p==="all"?"":p),y.set("fulfillment_type",S==="all"?"":S),y.set("offering_session",x==="all"?"":x),y.set("category_id",n==="all"?"":n),y.set("sort_by",j),y.set("sort_direction",A),`${g.pathname}?${y.toString()}`},Ie=()=>{Z.delete(route("services.destroy",C.id),{onSuccess:()=>T(!1)})};return e.jsxs("div",{className:"container mx-auto py-2 px-4",children:[e.jsxs(U,{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Services Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage all services available for guests."})]}),e.jsx(fe,{href:route("services.create"),children:e.jsx(f,{children:"+ Add Service"})})]}),e.jsxs(V,{children:[e.jsx(Ze,{searchTerm:d,setSearchTerm:N,selectedType:p,setSelectedType:i,selectedFulfillment:S,setSelectedFulfillment:D,selectedOfferingSession:x,setSelectedOfferingSession:c,categories:u||[],selectedCategory:n,setSelectedCategory:k,clearFilters:De,filterOptions:b}),e.jsx(ss,{services:s.data,expandedRows:ae,toggleRow:_e,openDeleteModal:ke,openImagesModal:Ce,formatPrice:me,sortBy:j,sortDirection:A,handleSort:Se,getTypeBadge:Ae,getFulfillmentBadge:Pe,getOfferingSessionBadge:Fe}),e.jsx(as,{paginationData:s,buildPaginationUrl:Te,router:Z})]})]}),e.jsx(is,{categories:u||[]}),e.jsxs(U,{className:"mt-8",children:[e.jsxs(se,{children:[e.jsx(te,{className:"text-2xl font-bold",children:"Services Insights"}),e.jsx(ne,{children:"Insights from your services data"})]}),e.jsxs(V,{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(rs,{popularService:o.mostPopular,profitableService:o.highestRevenue,formatPrice:me}),e.jsx(ls,{data:o.topServices})]})]}),e.jsx(ts,{isOpen:F,onOpenChange:T,onConfirm:Ie,service:C}),e.jsx(ns,{open:z,onOpenChange:M,serviceMeta:m})]})}cs.layout=s=>e.jsx($e,{children:s});export{cs as default};
