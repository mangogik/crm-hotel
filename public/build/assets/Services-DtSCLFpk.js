import{r as h,j as e,b as P,c as Re,u as Me}from"./app-EWpIB3HM.js";import{c as Ee,a as ze,B as u}from"./button-H6AwmmAM.js";import{a as z,b as U,c as L,C as O,d as A}from"./card-RKJWBewB.js";import{P as oe,C as Ue,e as Le,T as Be,D as V,b as J,c as X,d as q,f as G,g as K,t as ne}from"./index-CkhVk1HJ.js";import{X as de,A as He}from"./AuthenticatedLayout-DQWAbSsw.js";import{T as w,a as p,b as me,c as xe,d as C,e as he,B as le}from"./badge-CSf3a6Wm.js";import{I as y}from"./index-BIX3n7Yj.js";import{S as $e,a as I,b as R,F as ie,c as M,d as E,e as j,C as Ve,A as Je}from"./select-DuMT9J0t.js";import{L as v}from"./label-CzG679bL.js";import{a as Xe}from"./index-CaT8ubQ7.js";import{S as qe}from"./star-BU5qQns6.js";import{T as Ge}from"./trending-up-CE0nRqYq.js";/* empty css            */import"./index-6H-wcPrJ.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Qe=Ee("info",Ke);var We="Separator",re="horizontal",Ye=["horizontal","vertical"],pe=h.forwardRef((s,n)=>{const{decorative:t,orientation:r=re,...m}=s,c=Ze(r)?r:re,o=t?{role:"none"}:{"aria-orientation":c==="vertical"?c:void 0,role:"separator"};return e.jsx(Xe.div,{"data-orientation":c,...o,...m,ref:n})});pe.displayName=We;function Ze(s){return Ye.includes(s)}var es=pe;function ss({className:s,orientation:n="horizontal",decorative:t=!0,...r}){return e.jsx(es,{"data-slot":"separator",decorative:t,orientation:n,className:ze("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...r})}const ts=({onAddService:s})=>e.jsx(z,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-2xl font-bold",children:"Services"}),e.jsx(L,{children:"Manage your service offerings"})]}),e.jsxs(u,{onClick:s,className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"})," Add Service"]})]})}),as=({searchTerm:s,setSearchTerm:n,selectedType:t,setSelectedType:r,selectedFulfillment:m,setSelectedFulfillment:c,clearFilters:l})=>e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(y,{placeholder:"Search services...",value:s,onChange:o=>n(o.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{value:t,onValueChange:r,children:[e.jsxs(R,{className:"w-[180px]",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),e.jsx(M,{placeholder:"Type"})]}),e.jsxs(E,{children:[e.jsx(j,{value:"all",children:"All Types"}),e.jsx(j,{value:"fixed",children:"Fixed Price"}),e.jsx(j,{value:"per_unit",children:"Per Unit"}),e.jsx(j,{value:"selectable",children:"Selectable"})]})]}),e.jsxs(I,{value:m,onValueChange:c,children:[e.jsxs(R,{className:"w-[180px]",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),e.jsx(M,{placeholder:"Fulfillment"})]}),e.jsxs(E,{children:[e.jsx(j,{value:"all",children:"All Fulfillments"}),e.jsx(j,{value:"direct",children:"Direct"}),e.jsx(j,{value:"staff_assisted",children:"Staff Assisted"})]})]}),e.jsxs(u,{variant:"outline",onClick:l,className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4"})," Clear Sort & Filters"]})]})]}),ns=({service:s,isExpanded:n,onToggle:t,onEdit:r,onDelete:m,formatPrice:c,formatType:l,formatFulfillment:o,getTypeBadge:d,getFulfillmentBadge:_})=>e.jsxs(e.Fragment,{children:[e.jsxs(w,{className:"cursor-pointer hover:bg-muted/50",onClick:t,children:[e.jsx(p,{children:e.jsx(u,{variant:"ghost",size:"sm",children:n?e.jsx(Ve,{className:"h-4 w-4"}):e.jsx(Ue,{className:"h-4 w-4"})})}),e.jsx(p,{className:"font-medium",children:s.name}),e.jsx(p,{children:d(s.type,s.unit_name)}),e.jsx(p,{children:_(s.fulfillment_type)}),e.jsx(p,{children:s.type==="selectable"?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm",children:"Multiple options"}),e.jsx(Qe,{className:"h-3 w-3 text-muted-foreground"})]}):c(s.price)}),e.jsx(p,{onClick:g=>g.stopPropagation(),children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(u,{variant:"ghost",size:"sm",onClick:r,className:"bg-secondary text-secondary-foreground",children:e.jsx(Le,{className:"h-4 w-4"})}),e.jsx(u,{variant:"ghost",size:"sm",onClick:m,className:"bg-destructive text-destructive-foreground",children:e.jsx(Be,{className:"h-4 w-4"})})]})})]}),n&&e.jsx(w,{children:e.jsx(p,{colSpan:6,className:"p-4 bg-muted/20",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description||"No description provided."})]}),s.type==="selectable"&&s.options?.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Available Options:"}),e.jsx("div",{className:"space-y-2",children:s.options.map((g,T)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-background border rounded",children:[e.jsx("span",{children:g.name}),e.jsx("span",{className:"font-medium",children:c(g.price)})]},T))})]})]})})},`${s.id}-details`)]}),ls=({services:s,expandedRows:n,toggleRow:t,openEditModal:r,openDeleteModal:m,formatPrice:c,formatType:l,formatFulfillment:o,sortBy:d,sortDirection:_,handleSort:g,getTypeBadge:T,getFulfillmentBadge:b})=>{const S=({field:f,children:D})=>e.jsx(C,{className:"cursor-pointer",onClick:()=>g(f),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:D}),d===f&&e.jsx(Je,{className:`h-3 w-3 ${_==="asc"?"rotate-180":""}`})]})});return e.jsx("div",{className:"rounded-md border",children:e.jsxs(me,{children:[e.jsx(xe,{children:e.jsxs(w,{children:[e.jsx(C,{className:"w-8"}),e.jsx(S,{field:"name",children:"Name"}),e.jsx(S,{field:"type",children:"Type"}),e.jsx(S,{field:"fulfillment_type",children:"Fulfillment"}),e.jsx(S,{field:"price",children:"Price"}),e.jsx(C,{children:"Actions"})]})}),e.jsx(he,{children:s.length>0?s.map(f=>e.jsx(ns,{service:f,isExpanded:n.includes(f.id),onToggle:()=>t(f.id),onEdit:()=>r(f),onDelete:()=>m(f),formatPrice:c,formatType:l,formatFulfillment:o,getTypeBadge:T,getFulfillmentBadge:b},f.id)):e.jsx(w,{children:e.jsx(p,{colSpan:6,className:"text-center py-8",children:"No services found"})})})]})})},ce=({data:s,setData:n,errors:t,addOption:r,removeOption:m,updateOption:c})=>e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(v,{htmlFor:"name",className:"text-right",children:"Name *"}),e.jsx(y,{id:"name",value:s.name,onChange:l=>n("name",l.target.value),className:"col-span-3"}),t.name&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.name})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(v,{htmlFor:"description",className:"text-right",children:"Description"}),e.jsx(y,{id:"description",value:s.description,onChange:l=>n("description",l.target.value),className:"col-span-3"}),t.description&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.description})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(v,{htmlFor:"type",className:"text-right",children:"Type *"}),e.jsxs(I,{value:s.type,onValueChange:l=>n("type",l),children:[e.jsx(R,{className:"col-span-3",children:e.jsx(M,{placeholder:"Select type"})}),e.jsxs(E,{children:[e.jsx(j,{value:"fixed",children:"Fixed Price"}),e.jsx(j,{value:"per_unit",children:"Per Unit"}),e.jsx(j,{value:"selectable",children:"Selectable Options"})]})]}),t.type&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.type})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(v,{htmlFor:"fulfillment_type",className:"text-right",children:"Fulfillment *"}),e.jsxs(I,{value:s.fulfillment_type,onValueChange:l=>n("fulfillment_type",l),children:[e.jsx(R,{className:"col-span-3",children:e.jsx(M,{placeholder:"Select fulfillment"})}),e.jsxs(E,{children:[e.jsx(j,{value:"direct",children:"Direct"}),e.jsx(j,{value:"staff_assisted",children:"Staff Assisted"})]})]}),t.fulfillment_type&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.fulfillment_type})]}),s.type==="fixed"&&e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(v,{htmlFor:"price",className:"text-right",children:"Price *"}),e.jsx(y,{id:"price",type:"number",min:"0",step:"0.01",value:s.price,onChange:l=>n("price",l.target.value),className:"col-span-3"}),t.price&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.price})]}),s.type==="per_unit"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(v,{htmlFor:"unit_name",className:"text-right",children:"Unit Name *"}),e.jsx(y,{id:"unit_name",value:s.unit_name,onChange:l=>n("unit_name",l.target.value),className:"col-span-3"}),t.unit_name&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.unit_name})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(v,{htmlFor:"price",className:"text-right",children:"Price per Unit *"}),e.jsx(y,{id:"price",type:"number",min:"0",step:"0.01",value:s.price,onChange:l=>n("price",l.target.value),className:"col-span-3"}),t.price&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.price})]})]}),s.type==="selectable"&&e.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[e.jsx(v,{className:"text-right pt-2",children:"Options *"}),e.jsxs("div",{className:"col-span-3 space-y-2",children:[s.options.map((l,o)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[e.jsx(y,{placeholder:"Option name",value:l.name,onChange:d=>c(o,"name",d.target.value),className:"col-span-5"}),e.jsx(y,{type:"number",placeholder:"Price",min:"0",step:"0.01",value:l.price,onChange:d=>c(o,"price",d.target.value),className:"col-span-5"}),e.jsx(u,{type:"button",variant:"outline",size:"sm",onClick:()=>m(o),disabled:s.options.length<=1,className:"col-span-2",children:e.jsx(de,{className:"h-4 w-4"})})]},o)),e.jsxs(u,{type:"button",variant:"outline",size:"sm",onClick:r,className:"mt-2",children:[e.jsx(oe,{className:"h-4 w-4 mr-1"})," Add Option"]}),t.options&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.options})]})]})]}),is=({isOpen:s,onOpenChange:n,onConfirm:t,service:r})=>r?e.jsx(V,{open:s,onOpenChange:n,children:e.jsxs(J,{children:[e.jsxs(X,{children:[e.jsx(q,{children:"Confirm Deletion"}),e.jsxs(G,{children:["Are you sure you want to delete the service"," ",e.jsx("strong",{children:r.name}),"? This action cannot be undone."]})]}),e.jsxs(K,{children:[e.jsx(u,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(u,{variant:"destructive",onClick:t,children:"Delete"})]})]})}):null,rs=({paginationData:s,buildPaginationUrl:n})=>{const{from:t,to:r,total:m,prev_page_url:c,next_page_url:l}=s,o=d=>{d&&P.get(n(d),{},{preserveState:!0,replace:!0})};return e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",t," to ",r," of ",m," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(u,{variant:"outline",size:"sm",onClick:()=>o(c),disabled:!c,children:"Previous"}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>o(l),disabled:!l,children:"Next"})]})]})},cs=({popularService:s,profitableService:n,formatPrice:t})=>e.jsxs(O,{children:[e.jsxs(z,{children:[e.jsx(U,{children:"Highlight Layanan"}),e.jsx(L,{children:"Layanan paling populer dan paling menguntungkan."})]}),e.jsxs(A,{className:"space-y-4",children:[s?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-4 w-4 text-yellow-500"}),e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Paling Populer"})]}),e.jsx("p",{className:"text-lg font-semibold",children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.orders_count," pesanan"]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Data populer tidak tersedia."}),e.jsx(ss,{}),n?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-4 w-4 text-emerald-500"}),e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Paling Menguntungkan"})]}),e.jsx("p",{className:"text-lg font-semibold",children:n.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t(n.revenue)," pendapatan"]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Data keuntungan tidak tersedia."})]})]});function os({data:s}){const n=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t);return e.jsxs(O,{className:"md:col-span-2",children:[e.jsxs(z,{children:[e.jsx(U,{children:"Layanan Terlaris"}),e.jsx(L,{children:"Peringkat berdasarkan pendapatan selama 7 hari terakhir"})]}),e.jsx(A,{children:e.jsxs(me,{children:[e.jsx(xe,{children:e.jsxs(w,{children:[e.jsx(C,{className:"w-[80px]",children:"Peringkat"}),e.jsx(C,{children:"Nama Layanan"}),e.jsx(C,{className:"text-right",children:"Jumlah Pesanan"}),e.jsx(C,{className:"text-right",children:"Total Pendapatan"})]})}),e.jsx(he,{children:s&&s.length>0?s.map(t=>e.jsxs(w,{children:[e.jsx(p,{className:"font-medium text-center",children:t.rank}),e.jsx(p,{className:"font-medium",children:t.serviceName}),e.jsx(p,{className:"text-right",children:t.orderCount}),e.jsx(p,{className:"text-right",children:n(t.totalRevenue)})]},t.rank)):e.jsx(w,{children:e.jsx(p,{colSpan:4,className:"h-24 text-center",children:"Belum ada data pendapatan layanan dalam 7 hari terakhir."})})})]})})]})}function ds(){const{services:s,filters:n,flash:t,insights:r}=Re().props,[m,c]=h.useState(n.search||""),[l,o]=h.useState(n.type||"all"),[d,_]=h.useState(n.fulfillment_type||"all"),[g,T]=h.useState(n.sort_by||"created_at"),[b,S]=h.useState(n.sort_direction||"desc"),[f,D]=h.useState(!1),[ue,B]=h.useState(!1),[je,H]=h.useState(!1),[$,Q]=h.useState(null),[ge,fe]=h.useState([]),{data:k,setData:F,post:Ne,put:ve,processing:W,errors:Y,reset:ye,clearErrors:Z}=Me({name:"",description:"",type:"fixed",fulfillment_type:"direct",price:"",unit_name:"",options:[{name:"",price:""}]});h.useEffect(()=>{t?.success&&ne.success(t.success),t?.error&&ne.error(t.error)},[t]),h.useEffect(()=>{const a=setTimeout(()=>be(),500);return()=>clearTimeout(a)},[m,l,d,g,b]);const be=(a=1)=>{P.get(route("services.index"),{search:m,type:l==="all"?"":l,fulfillment_type:d==="all"?"":d,sort_by:g,sort_direction:b,page:a},{preserveState:!0,replace:!0})},Se=a=>{T(a),S(b==="asc"?"desc":"asc")},Ce=()=>{ye(),Z(),D(!0)},we=a=>{F({name:a.name,description:a.description||"",type:a.type,fulfillment_type:a.fulfillment_type,price:a.price||"",unit_name:a.unit_name||"",options:a.options&&a.options.length>0?a.options:[{name:"",price:""}]}),Z(),Q(a),B(!0)},_e=a=>{Q(a),H(!0)},Te=a=>{a.preventDefault(),Ne(route("services.store"),{onSuccess:()=>D(!1)})},ke=a=>{a.preventDefault(),ve(route("services.update",$.id),{onSuccess:()=>B(!1)})},Fe=()=>{P.delete(route("services.destroy",$.id),{onSuccess:()=>H(!1)})},De=()=>{c(""),o("all"),_("all"),T("created_at"),S("desc")},ee=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a||0),Pe=a=>fe(x=>x.includes(a)?x.filter(i=>i!==a):[...x,a]),Oe=(a,x)=>{let i="outline",N=a;switch(a){case"fixed":i="success",N="Fixed";break;case"per_unit":i="info",N=`Per Unit ${x?`(${x})`:""}`;break;case"selectable":i="warning",N="Selectable";break;default:N=a}return e.jsx(le,{variant:i,className:"capitalize px-2 py-1 text-xs font-medium",children:N})},Ae=a=>{let x="outline",i=a;switch(a){case"direct":x="secondary",i="Direct";break;case"staff_assisted":x="default",i="Staff Assisted";break;default:i=a}return e.jsx(le,{variant:x,className:"capitalize px-2 py-1 text-xs font-medium",children:i})},se=()=>F("options",[...k.options,{name:"",price:""}]),te=a=>{k.options.length>1&&F("options",k.options.filter((x,i)=>i!==a))},ae=(a,x,i)=>{const N=[...k.options];N[a][x]=i,F("options",N)},Ie=a=>{if(!a)return null;const x=new URL(a),i=new URLSearchParams(x.search);return i.set("search",m),i.set("type",l==="all"?"":l),i.set("fulfillment_type",d==="all"?"":d),i.set("sort_by",g),i.set("sort_direction",b),`${x.pathname}?${i.toString()}`};return e.jsxs("div",{className:"container mx-auto py-2 px-4",children:[e.jsxs(O,{className:"mb-8",children:[e.jsx(ts,{onAddService:Ce}),e.jsxs(A,{children:[e.jsx(as,{searchTerm:m,setSearchTerm:c,selectedType:l,setSelectedType:o,selectedFulfillment:d,setSelectedFulfillment:_,clearFilters:De}),e.jsx(ls,{services:s.data,expandedRows:ge,toggleRow:Pe,openEditModal:we,openDeleteModal:_e,getTypeBadge:Oe,getFulfillmentBadge:Ae,formatPrice:ee,sortBy:g,sortDirection:b,handleSort:Se}),e.jsx(rs,{paginationData:s,buildPaginationUrl:Ie,router:P})]})]}),e.jsxs(O,{children:[e.jsxs(z,{children:[e.jsx(U,{className:"text-2xl font-bold",children:"Services Insights"}),e.jsx(L,{children:"Insights from your services data"})]}),e.jsxs(A,{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(cs,{popularService:r.mostPopular,profitableService:r.highestRevenue,formatPrice:ee}),e.jsx(os,{data:r.topServices})]})]}),e.jsx(V,{open:f,onOpenChange:D,children:e.jsxs(J,{className:"sm:max-w-[600px]",children:[e.jsxs(X,{children:[e.jsx(q,{children:"Create New Service"}),e.jsx(G,{children:"Add a new service to your offerings"})]}),e.jsxs("form",{onSubmit:Te,children:[e.jsx(ce,{data:k,setData:F,errors:Y,addOption:se,removeOption:te,updateOption:ae}),e.jsx(K,{className:"mt-4",children:e.jsx(u,{type:"submit",disabled:W,children:"Create Service"})})]})]})}),e.jsx(V,{open:ue,onOpenChange:B,children:e.jsxs(J,{className:"sm:max-w-[600px]",children:[e.jsxs(X,{children:[e.jsx(q,{children:"Edit Service"}),e.jsx(G,{children:"Update service information"})]}),e.jsxs("form",{onSubmit:ke,children:[e.jsx(ce,{data:k,setData:F,errors:Y,addOption:se,removeOption:te,updateOption:ae}),e.jsx(K,{className:"mt-4",children:e.jsx(u,{type:"submit",disabled:W,children:"Update Service"})})]})]})}),e.jsx(is,{isOpen:je,onOpenChange:H,onConfirm:Fe,service:$})]})}ds.layout=s=>e.jsx(He,{children:s});export{ds as default};
