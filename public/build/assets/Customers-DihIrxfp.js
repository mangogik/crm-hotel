import{a as xe,r as n,u as pe,b as k,j as e}from"./app-DkoREvhI.js";import{B as d}from"./createLucideIcon-CId_UG7q.js";import{L as o,I as r}from"./check-D-XOZEEh.js";import{C as ue,a as ge,b as je,c as Ne,d as ve,T as Ce,e as _e,f as F,g as J,h as fe,i as m,B as ke}from"./badge-D8sRwdKu.js";import{t as K,D as P,a as T,P as ye,b as E,c as A,d as M,e as O,f as B,S as Se,g as be,h as we,F as De,i as Fe,j as Pe,k as Te,l as Ee,T as Ae,A as Me}from"./index-DstjHtLW.js";import{X as Oe,A as Be}from"./AuthenticatedLayout-XJm90pwO.js";import{C as Q}from"./calendar-BHyUSKDF.js";/* empty css            */import"./index-C3q6v-G_.js";import"./index-_cVg8tae.js";function Ie(){const{customers:c,filters:h,flash:u}=xe().props,[N,I]=n.useState(h.search||""),[x,U]=n.useState(h.passport_country||"all"),[v,H]=n.useState(h.checkin_date||""),[C,L]=n.useState(h.checkout_date||""),[g,z]=n.useState(h.sort_by||"created_at"),[j,y]=n.useState(h.sort_direction||"desc"),[W,S]=n.useState(!1),[Y,b]=n.useState(!1),[Z,_]=n.useState(!1),[f,R]=n.useState(null),[ee,se]=n.useState(["all"]),[V,w]=n.useState(h.page||1),{data:i,setData:l,post:ae,put:te,processing:q,errors:t,reset:D,clearErrors:X}=pe({name:"",email:"",phone:"",passport_country:"",checkin_at:"",checkout_at:"",notes:""});n.useEffect(()=>{const s=[...new Set(c.data.map(a=>a.passport_country).filter(Boolean))];se(["all",...s])},[c]),n.useEffect(()=>{u?.success&&K.success(u.success),u?.error&&K.error(u.error)},[u]),n.useEffect(()=>{const s=setTimeout(()=>{re()},500);return()=>clearTimeout(s)},[N,x,v,C,g,j,V]);const re=()=>{k.get(route("customers.index"),{search:N,passport_country:x==="all"?"":x,checkin_date:v,checkout_date:C,sort_by:g,sort_direction:j,per_page:h.per_page,page:V},{preserveState:!0,replace:!0})},ce=s=>{g===s?y(j==="asc"?"desc":"asc"):(z(s),y("asc"))},le=()=>{D(),X(),S(!0)},ne=s=>{l({name:s.name,email:s.email,phone:s.phone,passport_country:s.passport_country,checkin_at:s.checkin_at,checkout_at:s.checkout_at,notes:s.notes}),X(),R(s),b(!0)},ie=s=>{R(s),_(!0)},oe=s=>{s.preventDefault(),ae(route("customers.store"),{onSuccess:()=>{S(!1),D()},onError:a=>{console.error(a)}})},de=s=>{s.preventDefault(),te(route("customers.update",f.id),{onSuccess:()=>{b(!1),D()},onError:a=>{console.error(a)}})},he=()=>{k.delete(route("customers.destroy",f.id),{onSuccess:()=>{_(!1)},onError:s=>{console.error(s)}})},me=()=>{I(""),U("all"),H(""),L(""),z("created_at"),y("desc"),w(1)},$=s=>s?new Date(s).toLocaleDateString():"N/A",p=({field:s,children:a})=>e.jsx(J,{className:"cursor-pointer",onClick:()=>ce(s),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:a}),g===s&&e.jsx(Me,{className:`h-3 w-3 ${j==="asc"?"rotate-180":""}`})]})}),G=s=>{if(!s)return null;const a=new URL(s,window.location.origin);return a.searchParams.set("search",N),a.searchParams.set("passport_country",x==="all"?"":x),a.searchParams.set("checkin_date",v),a.searchParams.set("checkout_date",C),a.searchParams.set("sort_by",g),a.searchParams.set("sort_direction",j),a.searchParams.set("per_page",h.per_page),a.pathname+"?"+a.searchParams.toString()};return e.jsx("div",{className:"container mx-auto py-2 px-4",children:e.jsxs(ue,{className:"mb-8",children:[e.jsx(ge,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(je,{className:"text-2xl font-bold",children:"Customers"}),e.jsx(Ne,{children:"Manage your customer database"})]}),e.jsxs(P,{open:W,onOpenChange:S,children:[e.jsx(T,{asChild:!0,children:e.jsxs(d,{onClick:le,className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"})," Add Customer"]})}),e.jsxs(E,{className:"sm:max-w-[425px]",children:[e.jsxs(A,{children:[e.jsx(M,{children:"Create New Customer"}),e.jsx(O,{children:"Add a new customer to your database"})]}),e.jsxs("form",{onSubmit:oe,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"name",className:"text-right",children:"Name *"}),e.jsx(r,{id:"name",value:i.name,onChange:s=>l("name",s.target.value),className:"col-span-3"}),t.name&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.name})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"email",className:"text-right",children:"Email"}),e.jsx(r,{id:"email",type:"email",value:i.email,onChange:s=>l("email",s.target.value),className:"col-span-3"}),t.email&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.email})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"phone",className:"text-right",children:"Phone"}),e.jsx(r,{id:"phone",value:i.phone,onChange:s=>l("phone",s.target.value),className:"col-span-3"}),t.phone&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.phone})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"passport_country",className:"text-right",children:"Country"}),e.jsx(r,{id:"passport_country",value:i.passport_country,onChange:s=>l("passport_country",s.target.value),className:"col-span-3"}),t.passport_country&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.passport_country})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"checkin_at",className:"text-right",children:"Check-in"}),e.jsx(r,{id:"checkin_at",type:"date",value:i.checkin_at,onChange:s=>l("checkin_at",s.target.value),className:"col-span-3"}),t.checkin_at&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.checkin_at})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"checkout_at",className:"text-right",children:"Check-out"}),e.jsx(r,{id:"checkout_at",type:"date",value:i.checkout_at,onChange:s=>l("checkout_at",s.target.value),className:"col-span-3"}),t.checkout_at&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.checkout_at})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"notes",className:"text-right",children:"Notes"}),e.jsx(r,{id:"notes",value:i.notes,onChange:s=>l("notes",s.target.value),className:"col-span-3"})]})]}),e.jsx(B,{children:e.jsx(d,{type:"submit",disabled:q,children:"Create Customer"})})]})]})]})]})}),e.jsxs(ve,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(r,{placeholder:"Search customers...",value:N,onChange:s=>I(s.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(be,{value:x,onValueChange:U,children:[e.jsxs(we,{className:"w-[180px]",children:[e.jsx(De,{className:"mr-2 h-4 w-4"}),e.jsx(Fe,{placeholder:"Country"})]}),e.jsx(Pe,{children:ee.map(s=>e.jsx(Te,{value:s,children:s==="all"?"All Countries":s},s))})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(r,{type:"date",placeholder:"Check-in",value:v,onChange:s=>H(s.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(r,{type:"date",placeholder:"Check-out",value:C,onChange:s=>L(s.target.value),className:"pl-10"})]}),e.jsxs(d,{variant:"outline",onClick:me,className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"})," Clear Sort & Filters"]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Ce,{children:[e.jsx(_e,{children:e.jsxs(F,{children:[e.jsx(p,{field:"name",children:"Name"}),e.jsx(p,{field:"email",children:"Email"}),e.jsx(p,{field:"phone",children:"Phone"}),e.jsx(p,{field:"passport_country",children:"Country"}),e.jsx(p,{field:"checkin_at",children:"Check-in"}),e.jsx(p,{field:"checkout_at",children:"Check-out"}),e.jsx(J,{children:"Actions"})]})}),e.jsx(fe,{children:c.data.length>0?c.data.map(s=>e.jsxs(F,{children:[e.jsx(m,{className:"font-medium",children:s.name}),e.jsx(m,{children:s.email||"N/A"}),e.jsx(m,{children:s.phone||"N/A"}),e.jsx(m,{children:s.passport_country&&e.jsx(ke,{variant:"outline",children:s.passport_country})}),e.jsx(m,{children:$(s.checkin_at)}),e.jsx(m,{children:$(s.checkout_at)}),e.jsx(m,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(P,{open:Y&&f?.id===s.id,onOpenChange:a=>{a||b(!1)},children:[e.jsx(T,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>ne(s),children:e.jsx(Ee,{className:"h-4 w-4"})})}),e.jsxs(E,{className:"sm:max-w-[425px]",children:[e.jsxs(A,{children:[e.jsx(M,{children:"Edit Customer"}),e.jsx(O,{children:"Update customer information"})]}),e.jsxs("form",{onSubmit:de,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"edit-name",className:"text-right",children:"Name *"}),e.jsx(r,{id:"edit-name",value:i.name,onChange:a=>l("name",a.target.value),className:"col-span-3"}),t.name&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.name})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"edit-email",className:"text-right",children:"Email"}),e.jsx(r,{id:"edit-email",type:"email",value:i.email,onChange:a=>l("email",a.target.value),className:"col-span-3"}),t.email&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.email})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"edit-phone",className:"text-right",children:"Phone"}),e.jsx(r,{id:"edit-phone",value:i.phone,onChange:a=>l("phone",a.target.value),className:"col-span-3"}),t.phone&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.phone})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"edit-passport_country",className:"text-right",children:"Country"}),e.jsx(r,{id:"edit-passport_country",value:i.passport_country,onChange:a=>l("passport_country",a.target.value),className:"col-span-3"}),t.passport_country&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.passport_country})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"edit-checkin_at",className:"text-right",children:"Check-in"}),e.jsx(r,{id:"edit-checkin_at",type:"date",value:i.checkin_at,onChange:a=>l("checkin_at",a.target.value),className:"col-span-3"}),t.checkin_at&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.checkin_at})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"edit-checkout_at",className:"text-right",children:"Check-out"}),e.jsx(r,{id:"edit-checkout_at",type:"date",value:i.checkout_at,onChange:a=>l("checkout_at",a.target.value),className:"col-span-3"}),t.checkout_at&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:t.checkout_at})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"edit-notes",className:"text-right",children:"Notes"}),e.jsx(r,{id:"edit-notes",value:i.notes,onChange:a=>l("notes",a.target.value),className:"col-span-3"})]})]}),e.jsx(B,{children:e.jsx(d,{type:"submit",disabled:q,children:"Update Customer"})})]})]})]}),e.jsxs(P,{open:Z&&f?.id===s.id,onOpenChange:a=>{a||_(!1)},children:[e.jsx(T,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>ie(s),children:e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsxs(E,{children:[e.jsxs(A,{children:[e.jsx(M,{children:"Confirm Deletion"}),e.jsxs(O,{children:["Are you sure you want to delete"," ",s.name,"? This action cannot be undone."]})]}),e.jsxs(B,{children:[e.jsx(d,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),e.jsx(d,{variant:"destructive",onClick:he,children:"Delete"})]})]})]})]})})]},s.id)):e.jsx(F,{children:e.jsx(m,{colSpan:7,className:"text-center py-8",children:"No customers found"})})})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",c.from," to ",c.to," of"," ",c.total," customers"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(d,{variant:"outline",size:"sm",onClick:()=>{const s=c.current_page-1;w(s),k.get(G(c.prev_page_url),{},{preserveState:!0})},disabled:!c.prev_page_url,children:"Previous"}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>{const s=c.current_page+1;w(s),k.get(G(c.next_page_url),{},{preserveState:!0})},disabled:!c.next_page_url,children:"Next"})]})]})]})]})})}Ie.layout=c=>e.jsx(Be,{children:c});export{Ie as default};
