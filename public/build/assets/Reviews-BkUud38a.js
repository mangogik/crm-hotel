import{j as e,r as o,b as P,c as q}from"./app-CyNV4xla.js";import{b as H,c as X,C as L,a as G,d as U}from"./card-C7DOrj8d.js";import{S as T}from"./star-CSyX40Ho.js";import{c as J,B as f}from"./button-CxkxaUXA.js";import{C as E}from"./calendar-BADSFOZm.js";import{T as K}from"./trending-up-B3XyiEcp.js";import{I as $,L as I}from"./index-BzOwoEwx.js";import{S as Q,a as W,b as Y,c as Z,d as ee,e as w,D as se,f as ae,g as te,h as re,i as le,C as ne,A as ce}from"./select-D1oHE82z.js";import{X as oe,d as ie,U as de,A as me}from"./AuthenticatedLayout-_OcRwaJT.js";import{T as D,a as p,b as xe,c as he,d as A,e as ue}from"./table-COKPj6eX.js";import{M as je}from"./mail-C-iRKmjP.js";import{a as ge}from"./date-sUREfqb9.js";/* empty css            */import"./index-DnOCixzh.js";import"./index-CDm6i81c.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],k=J("message-square",pe),fe=({totals:s})=>{const t=[{title:"Average Rating",value:s?.avg_rating||0,icon:T,color:"text-yellow-600",bgColor:"bg-yellow-100",borderColor:"border-yellow-200",suffix:"/5"},{title:"Total Reviews",value:s?.total||0,icon:k,color:"text-blue-600",bgColor:"bg-blue-100",borderColor:"border-blue-200"},{title:"Today's Reviews",value:s?.today||0,icon:E,color:"text-green-600",bgColor:"bg-green-100",borderColor:"border-green-200"},{title:"Last 7 Days",value:s?.last7d||0,icon:K,color:"text-purple-600",bgColor:"bg-purple-100",borderColor:"border-purple-200"}];return e.jsxs("div",{className:"pb-4",children:[e.jsxs("div",{children:[e.jsx(H,{className:"text-2xl font-bold",children:"Customer Reviews"}),e.jsx(X,{children:"Monitor customer feedback and satisfaction metrics."})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 pt-6",children:t.map((a,r)=>e.jsxs(L,{className:`p-2 gap-1 border-b-8 ${a.borderColor}`,children:[e.jsxs(G,{className:"flex flex-row items-center justify-between p-2",children:[e.jsx(H,{className:"text-sm font-medium text-muted-foreground",children:a.title}),e.jsx("div",{className:`rounded-full p-1 border-2 ${a.bgColor}`,children:e.jsx(a.icon,{className:`h-4 w-4 ${a.color}`})})]}),e.jsx(U,{className:"px-2",children:e.jsxs("div",{className:"text-2xl font-bold",children:[a.value,a.suffix||""]})})]},r))})]})},be=({search:s,setSearch:t,dateFrom:a,setDateFrom:r,dateTo:n,setDateTo:b,minRating:m,setMinRating:x,clearFilters:l})=>{const[N,h]=o.useState(!1),[S,j]=o.useState(a),[y,u]=o.useState(n),_=()=>{r(S),b(y),h(!1)},g=()=>{j(""),u(""),r(""),b(""),h(!1)},R=()=>!a&&!n?"Review Date":a&&!n?a:a&&n?`${a} - ${n}`:"Review Date";return e.jsx(L,{className:"mb-6",children:e.jsx(U,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative md:w-1/2",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx($,{placeholder:"Search reviews or customers...",value:s,onChange:i=>t(i.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 md:w-1/2",children:[e.jsxs(W,{value:m?.toString()||"0",onValueChange:i=>x(parseInt(i)),children:[e.jsxs(Y,{className:"w-full sm:w-auto flex-grow",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),e.jsx(Z,{placeholder:"Min Rating"})]}),e.jsxs(ee,{children:[e.jsx(w,{value:"0",children:"All Ratings"}),e.jsx(w,{value:"1",children:"1+ Stars"}),e.jsx(w,{value:"2",children:"2+ Stars"}),e.jsx(w,{value:"3",children:"3+ Stars"}),e.jsx(w,{value:"4",children:"4+ Stars"}),e.jsx(w,{value:"5",children:"5 Stars"})]})]}),e.jsxs(se,{open:N,onOpenChange:h,children:[e.jsx(ae,{asChild:!0,children:e.jsxs(f,{variant:"outline",className:"w-full sm:w-auto flex-grow justify-center text-left font-normal",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),R()]})}),e.jsxs(te,{className:"sm:max-w-96",children:[e.jsx(re,{children:e.jsx(le,{children:"Select Created Date Range"})}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"date-from",children:"From"}),e.jsx($,{id:"date-from",type:"date",value:S,onChange:i=>j(i.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"date-to",children:"To"}),e.jsx($,{id:"date-to",type:"date",value:y,onChange:i=>u(i.target.value)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(f,{variant:"outline",onClick:g,children:"Clear"}),e.jsx(f,{onClick:_,children:"Apply"})]})]})]})]}),e.jsxs(f,{variant:"outline",onClick:l,className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"})," Clear"]})]})]})})})},M=({rating:s})=>e.jsxs("div",{className:"flex items-center",children:[[1,2,3,4,5].map(t=>e.jsx(T,{className:`h-4 w-4 ${t<=s?"text-yellow-500 fill-yellow-500":"text-gray-300"}`},t)),e.jsxs("span",{className:"ml-2 text-sm font-medium",children:[s,"/5"]})]}),B=({title:s,icon:t,headerBg:a,headerText:r,children:n})=>e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`p-2 rounded-full ${a}`,children:e.jsx(t,{className:`h-5 w-5 ${r}`})}),e.jsx("h3",{className:"text-lg font-semibold",children:s})]}),e.jsx("div",{className:"space-y-2",children:n})]}),C=({label:s,value:t,children:a})=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[s,":"]}),e.jsx("span",{className:"font-medium text-right",children:t??a??"â€”"})]}),Ne=({review:s,isExpanded:t,onToggle:a,formatDate:r})=>e.jsxs(e.Fragment,{children:[e.jsxs(D,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:a,children:[e.jsx(p,{className:"w-12",children:e.jsx(f,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:t?e.jsx(ne,{className:"h-4 w-4"}):e.jsx(ie,{className:"h-4 w-4"})})}),e.jsx(p,{className:"font-medium",children:s.customer?.name||"Unknown"}),e.jsx(p,{children:e.jsx(M,{rating:s.rating})}),e.jsx(p,{children:e.jsx("div",{className:"max-w-xs truncate",children:s.comment||e.jsx("span",{className:"text-muted-foreground",children:"No comment"})})}),e.jsx(p,{children:r(s.created_at)})]}),t&&e.jsx(D,{children:e.jsx(p,{colSpan:5,className:"p-0",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs(B,{title:"Customer Details",icon:de,headerBg:"bg-blue-100",headerText:"text-blue-600",children:[e.jsx(C,{label:"Name",value:s.customer?.name}),e.jsx(C,{label:"Email",value:s.customer?.email}),e.jsx(C,{label:"Phone",value:s.customer?.phone}),e.jsx(C,{label:"Country",value:s.customer?.passport_country})]}),e.jsxs(B,{title:"Review Details",icon:T,headerBg:"bg-yellow-100",headerText:"text-yellow-600",children:[e.jsx(C,{label:"Rating",children:e.jsx(M,{rating:s.rating})}),e.jsx(C,{label:"Created At",value:r(s.created_at)})]}),e.jsx(B,{title:"Comment",icon:je,headerBg:"bg-green-100",headerText:"text-green-600",children:e.jsx("div",{className:"bg-white p-4 rounded-lg border min-h-[150px]",children:s.comment?e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.comment}):e.jsx("p",{className:"text-muted-foreground text-sm",children:"No comment provided"})})})]})})})})]}),ve=({reviews:s,expandedRows:t,onToggle:a,handleSort:r,sortBy:n,sortDirection:b,formatDate:m})=>{const x=({field:l,children:N})=>e.jsx(A,{className:"cursor-pointer",onClick:()=>r(l),children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:N}),n===l&&e.jsx(ce,{className:`h-3 w-3 ${b==="asc"?"rotate-180":""}`})]})});return e.jsx("div",{className:"rounded-md border",children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsxs(D,{children:[e.jsx(A,{className:"w-12"}),e.jsx(x,{field:"customer",children:"Customer"}),e.jsx(x,{field:"rating",children:"Rating"}),e.jsx(A,{children:"Comment"}),e.jsx(x,{field:"created_at",children:"Review Date"})]})}),e.jsx(ue,{children:s?.length?s.map(l=>e.jsx(Ne,{review:l,isExpanded:t.includes(l.id),onToggle:()=>a(l.id),formatDate:m},l.id)):e.jsx(D,{children:e.jsx(p,{colSpan:5,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-muted-foreground",children:[e.jsx(k,{className:"h-12 w-12 mb-2"}),e.jsx("p",{children:"No reviews found"})]})})})})]})})},we=({paginationData:s,buildPaginationUrl:t})=>{const a=r=>{r&&P.get(t(r),{},{preserveState:!0,replace:!0})};return e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",s?.from," to ",s?.to," of ",s?.total," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:()=>a(s.prev_page_url),disabled:!s?.prev_page_url,children:"Previous"}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>a(s.next_page_url),disabled:!s?.next_page_url,children:"Next"})]})]})};function Ce(){const{reviews:s,filters:t,totals:a,flash:r}=q().props,[n,b]=o.useState([]),[m,x]=o.useState(t.search||""),[l,N]=o.useState(t.date_from||""),[h,S]=o.useState(t.date_to||""),[j,y]=o.useState(t.min_rating||0),[u,_]=o.useState(t.sort_by||"created_at"),[g,R]=o.useState(t.sort_direction||"desc");o.useEffect(()=>{const c={search:m,date_from:l,date_to:h,min_rating:j,sort_by:u,sort_direction:g};P.get(route("reviews.index"),c,{preserveState:!0,replace:!0})},[m,l,h,j,u,g]);const i=c=>{b(v=>v.includes(c)?v.filter(d=>d!==c):[...v,c])},z=c=>{u===c?R(g==="asc"?"desc":"asc"):(_(c),R("desc"))},F=()=>{x(""),N(""),S(""),y(0),_("created_at"),R("desc")},O=ge,V=c=>{if(!c)return null;const v=new URL(c),d=new URLSearchParams(v.search);return d.set("search",m),d.set("date_from",l),d.set("date_to",h),d.set("min_rating",j),d.set("sort_by",u),d.set("sort_direction",g),`${v.pathname}?${d.toString()}`};return e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx(fe,{totals:a}),e.jsx(L,{children:e.jsxs(U,{className:"pt-0",children:[e.jsx(be,{search:m,setSearch:x,dateFrom:l,setDateFrom:N,dateTo:h,setDateTo:S,minRating:j,setMinRating:y,clearFilters:F}),e.jsx(ve,{reviews:s.data,expandedRows:n,onToggle:i,handleSort:z,sortBy:u,sortDirection:g,formatDate:O}),e.jsx(we,{paginationData:s,buildPaginationUrl:V})]})})]})}Ce.layout=s=>e.jsx(me,{children:s});export{Ce as default};
