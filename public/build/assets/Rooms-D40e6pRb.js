import{j as e,c as xe,r as m,u as he,b as _}from"./app-EWpIB3HM.js";import{B as x}from"./button-H6AwmmAM.js";import{a as pe,b as je,c as ge,C as be,d as fe}from"./card-RKJWBewB.js";import{P as Ne,C as ve,e as ye,T as Se,D as T,b as P,c as F,d as M,f as Ce,g as k,t as V}from"./index-CkhVk1HJ.js";import{X as we,A as Re}from"./AuthenticatedLayout-DQWAbSsw.js";import{I as G}from"./index-BIX3n7Yj.js";import{S as _e,a as A,b as E,F as $,c as O,d as I,e as g,C as De,A as Te}from"./select-DuMT9J0t.js";import{T as N,a as h,B as Pe,b as Fe,c as Me,d as D,e as ke}from"./badge-CSf3a6Wm.js";import{L as X}from"./label-CzG679bL.js";/* empty css            */import"./index-6H-wcPrJ.js";import"./index-CaT8ubQ7.js";const Ae=({onAddRoom:a})=>e.jsx(pe,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(je,{className:"text-2xl font-bold",children:"Rooms"}),e.jsx(ge,{children:"Manage your hotel rooms"})]}),e.jsxs(x,{onClick:a,className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4"})," Add Room"]})]})}),Ee=({searchTerm:a,setSearchTerm:l,selectedStatus:n,setSelectedStatus:o,selectedType:t,setSelectedType:i,clearFilters:u})=>{const c=["all","Standard","Deluxe","Suite","Family Room","Penthouse"],d=["all","available","occupied","maintenance"];return e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(G,{placeholder:"Search by room number or type...",value:a,onChange:s=>l(s.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(A,{value:t,onValueChange:i,children:[e.jsxs(E,{className:"w-full md:w-[180px]",children:[e.jsx($,{className:"mr-2 h-4 w-4"}),e.jsx(O,{placeholder:"Room Type"})]}),e.jsx(I,{children:c.map(s=>e.jsx(g,{value:s,children:s==="all"?"All Types":s},s))})]}),e.jsxs(A,{value:n,onValueChange:o,children:[e.jsxs(E,{className:"w-full md:w-[180px]",children:[e.jsx($,{className:"mr-2 h-4 w-4"}),e.jsx(O,{placeholder:"Status"})]}),e.jsx(I,{children:d.map(s=>e.jsx(g,{value:s,className:"capitalize",children:s==="all"?"All Statuses":s},s))})]}),e.jsxs(x,{variant:"outline",onClick:u,className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4"})," Clear"]})]})]})},Oe=({room:a,isExpanded:l,onToggle:n,onEdit:o,onDelete:t})=>{const i=c=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(c||0),u=c=>{switch(c){case"available":return"success";case"occupied":return"destructive";case"maintenance":return"warning";default:return"outline"}};return e.jsxs(e.Fragment,{children:[e.jsxs(N,{className:"cursor-pointer hover:bg-muted/50",onClick:n,children:[e.jsx(h,{children:e.jsx(x,{variant:"ghost",size:"sm",children:l?e.jsx(De,{className:"h-4 w-4"}):e.jsx(ve,{className:"h-4 w-4"})})}),e.jsx(h,{className:"font-medium",children:a.room_number}),e.jsx(h,{children:a.room_type}),e.jsxs(h,{children:[a.capacity," People"]}),e.jsx(h,{children:i(a.price_per_night)}),e.jsx(h,{children:e.jsx(Pe,{variant:u(a.status),className:"capitalize",children:a.status})}),e.jsx(h,{onClick:c=>c.stopPropagation(),children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(x,{variant:"ghost",size:"sm",onClick:o,className:"bg-secondary text-secondary-foreground",children:e.jsx(ye,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"sm",onClick:t,className:"bg-destructive text-destructive-foreground",children:e.jsx(Se,{className:"h-4 w-4"})})]})})]}),l&&e.jsx(N,{children:e.jsx(h,{colSpan:7,className:"p-4 bg-muted/20",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No additional details for this room."})})},`${a.id}-details`)]})},Ie=({rooms:a,expandedRows:l,toggleRow:n,openEditModal:o,openDeleteModal:t,sortBy:i,sortDirection:u,handleSort:c})=>{const d=({field:s,children:b})=>e.jsx(D,{className:"cursor-pointer",onClick:()=>c(s),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:b}),i===s&&e.jsx(Te,{className:`h-3 w-3 ${u==="asc"?"":"rotate-180"}`})]})});return e.jsx("div",{className:"rounded-md border",children:e.jsxs(Fe,{children:[e.jsx(Me,{children:e.jsxs(N,{children:[e.jsx(D,{className:"w-8"}),e.jsx(d,{field:"room_number",children:"Room Number"}),e.jsx(d,{field:"room_type",children:"Type"}),e.jsx(d,{field:"capacity",children:"Capacity"}),e.jsx(d,{field:"price_per_night",children:"Price/Night"}),e.jsx(d,{field:"status",children:"Status"}),e.jsx(D,{children:"Actions"})]})}),e.jsx(ke,{children:a.length>0?a.map(s=>e.jsx(Oe,{room:s,isExpanded:l.includes(s.id),onToggle:()=>n(s.id),onEdit:()=>o(s),onDelete:()=>t(s)},s.id)):e.jsx(N,{children:e.jsx(h,{colSpan:7,className:"text-center py-8",children:"No rooms found"})})})]})})},q=({data:a,setData:l,errors:n})=>{const o=[{id:"room_number",label:"Room Number *",type:"text"},{id:"room_type",label:"Room Type *",type:"text"},{id:"capacity",label:"Capacity *",type:"number"},{id:"price_per_night",label:"Price per Night *",type:"number"}];return e.jsxs("div",{className:"grid gap-4 py-4",children:[o.map(t=>e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(X,{htmlFor:t.id,className:"text-left",children:t.label}),e.jsx(G,{id:t.id,type:t.type,value:a[t.id]||"",onChange:i=>l(t.id,i.target.value),className:"col-span-3",min:t.type==="number"?0:void 0}),n[t.id]&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:n[t.id]})]},t.id)),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(X,{htmlFor:"status",className:"text-right",children:"Status *"}),e.jsxs(A,{value:a.status||"available",onValueChange:t=>l("status",t),children:[e.jsx(E,{className:"col-span-3",children:e.jsx(O,{placeholder:"Select status"})}),e.jsxs(I,{children:[e.jsx(g,{value:"available",children:"Available"}),e.jsx(g,{value:"occupied",children:"Occupied"}),e.jsx(g,{value:"maintenance",children:"Maintenance"})]})]}),n.status&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:n.status})]})]})},Be=({isOpen:a,onOpenChange:l,onConfirm:n,room:o})=>o?e.jsx(T,{open:a,onOpenChange:l,children:e.jsxs(P,{children:[e.jsxs(F,{children:[e.jsx(M,{children:"Confirm Deletion"}),e.jsxs(Ce,{children:["Are you sure you want to delete Room ",e.jsx("strong",{children:o.room_number}),"? This action cannot be undone."]})]}),e.jsxs(k,{children:[e.jsx(x,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(x,{variant:"destructive",onClick:n,children:"Delete"})]})]})}):null,ze=({paginationData:a,buildPaginationUrl:l,router:n})=>{const{from:o,to:t,total:i,prev_page_url:u,next_page_url:c}=a,d=s=>{s&&n.get(l(s),{},{preserveState:!0,replace:!0})};return e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",o," to ",t," of ",i," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>d(u),disabled:!u,children:"Previous"}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>d(c),disabled:!c,children:"Next"})]})]})};function He(){const{rooms:a,filters:l,flash:n}=xe().props,[o,t]=m.useState(l.search||""),[i,u]=m.useState(l.status||"all"),[c,d]=m.useState(l.room_type||"all"),[s,b]=m.useState(l.sort_by||"room_number"),[f,v]=m.useState(l.sort_direction||"asc"),[J,y]=m.useState(!1),[K,S]=m.useState(!1),[Q,C]=m.useState(!1),[w,B]=m.useState(null),[W,Y]=m.useState([]),{data:z,setData:R,post:Z,put:ee,processing:H,errors:U,reset:se,clearErrors:L}=he({room_number:"",room_type:"",capacity:"",price_per_night:"",status:"available"});m.useEffect(()=>{n?.success&&V.success(n.success),n?.error&&V.error(n.error)},[n]),m.useEffect(()=>{const r=setTimeout(()=>ae(1),500);return()=>clearTimeout(r)},[o,i,c,s,f]);const ae=(r=l.page||1)=>{_.get(route("rooms.index"),{search:o,status:i==="all"?"":i,room_type:c==="all"?"":c,sort_by:s,sort_direction:f,page:r},{preserveState:!0,replace:!0})},te=r=>{s===r?v(p=>p==="asc"?"desc":"asc"):(b(r),v("asc"))},re=()=>{se(),L(),y(!0)},le=r=>{R({...r}),L(),B(r),S(!0)},ne=r=>{B(r),C(!0)},ce=r=>{r.preventDefault(),Z(route("rooms.store"),{onSuccess:()=>y(!1)})},oe=r=>{r.preventDefault(),ee(route("rooms.update",w.id),{onSuccess:()=>S(!1)})},ie=()=>{_.delete(route("rooms.destroy",w.id),{onSuccess:()=>C(!1)})},de=()=>{t(""),u("all"),d("all"),b("room_number"),v("asc")},me=r=>Y(p=>p.includes(r)?p.filter(j=>j!==r):[...p,r]),ue=r=>{if(!r)return null;const p=new URL(r),j=new URLSearchParams(p.search);return j.set("search",o),j.set("status",i==="all"?"":i),j.set("room_type",c==="all"?"":c),j.set("sort_by",s),j.set("sort_direction",f),`${p.pathname}?${j.toString()}`};return e.jsxs("div",{className:"container mx-auto py-2 px-4",children:[e.jsxs(be,{className:"mb-8",children:[e.jsx(Ae,{onAddRoom:re}),e.jsxs(fe,{children:[e.jsx(Ee,{searchTerm:o,setSearchTerm:t,selectedStatus:i,setSelectedStatus:u,selectedType:c,setSelectedType:d,clearFilters:de}),e.jsx(Ie,{rooms:a.data,expandedRows:W,toggleRow:me,openEditModal:le,openDeleteModal:ne,sortBy:s,sortDirection:f,handleSort:te}),e.jsx(ze,{paginationData:a,buildPaginationUrl:ue,router:_})]})]}),e.jsx(T,{open:J,onOpenChange:y,children:e.jsxs(P,{className:"sm:max-w-md",children:[e.jsx(F,{children:e.jsx(M,{children:"Create New Room"})}),e.jsxs("form",{onSubmit:ce,children:[e.jsx(q,{data:z,setData:R,errors:U}),e.jsx(k,{className:"mt-4",children:e.jsx(x,{type:"submit",disabled:H,children:"Create Room"})})]})]})}),e.jsx(T,{open:K,onOpenChange:S,children:e.jsxs(P,{className:"sm:max-w-md",children:[e.jsx(F,{children:e.jsx(M,{children:"Edit Room"})}),e.jsxs("form",{onSubmit:oe,children:[e.jsx(q,{data:z,setData:R,errors:U}),e.jsx(k,{className:"mt-4",children:e.jsx(x,{type:"submit",disabled:H,children:"Update Room"})})]})]})}),e.jsx(Be,{isOpen:Q,onOpenChange:C,onConfirm:ie,room:w})]})}He.layout=a=>e.jsx(Re,{children:a});export{He as default};
