import{j as e,a as R,b as we,r as u,u as Fe}from"./app-9mFn5Lru.js";import{c as Te,B as x}from"./button-BGM4I99h.js";import{a as De,b as ke,c as Pe,C as Ae,d as Oe}from"./card-DkGcV5mJ.js";import{P as te,C as Ue,a as Me,T as Ee,D as z,b as B,c as H,d as L,e as $,f as V,t as Y}from"./index-D3fCF_G-.js";import{X as le,A as Ie}from"./AuthenticatedLayout-BLijZNZ5.js";import{I as b}from"./index-DKoFm-4Z.js";import{S as Re,a as T,b as D,F as Z,c as k,d as P,e as j,C as ze,A as Be}from"./select-CWEfNaLG.js";import{T as A,a as S,b as He,c as Le,d as I,e as $e,B as ee}from"./badge-CSS6k1K8.js";import{L as y}from"./label-7MXExJKb.js";/* empty css            */import"./index-a9231Ibs.js";import"./index-CJNFW_8h.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Xe=Te("info",Ve),qe=({onAddService:t})=>e.jsx(De,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(ke,{className:"text-2xl font-bold",children:"Services"}),e.jsx(Pe,{children:"Manage your service offerings"})]}),e.jsxs(x,{onClick:t,className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"})," Add Service"]})]})}),Ge=({searchTerm:t,setSearchTerm:n,selectedType:l,setSelectedType:d,selectedFulfillment:h,setSelectedFulfillment:c,clearFilters:a})=>e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(b,{placeholder:"Search services...",value:t,onChange:r=>n(r.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{value:l,onValueChange:d,children:[e.jsxs(D,{className:"w-[180px]",children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),e.jsx(k,{placeholder:"Type"})]}),e.jsxs(P,{children:[e.jsx(j,{value:"all",children:"All Types"}),e.jsx(j,{value:"fixed",children:"Fixed Price"}),e.jsx(j,{value:"per_unit",children:"Per Unit"}),e.jsx(j,{value:"selectable",children:"Selectable"})]})]}),e.jsxs(T,{value:h,onValueChange:c,children:[e.jsxs(D,{className:"w-[180px]",children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),e.jsx(k,{placeholder:"Fulfillment"})]}),e.jsxs(P,{children:[e.jsx(j,{value:"all",children:"All Fulfillments"}),e.jsx(j,{value:"direct",children:"Direct"}),e.jsx(j,{value:"staff_assisted",children:"Staff Assisted"})]})]}),e.jsxs(x,{variant:"outline",onClick:a,className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4"})," Clear Sort & Filters"]})]})]}),Je=({service:t,isExpanded:n,onToggle:l,onEdit:d,onDelete:h,formatPrice:c,formatType:a,formatFulfillment:r,getTypeBadge:m,getFulfillmentBadge:N})=>e.jsxs(e.Fragment,{children:[e.jsxs(A,{className:"cursor-pointer hover:bg-muted/50",onClick:l,children:[e.jsx(S,{children:e.jsx(x,{variant:"ghost",size:"sm",children:n?e.jsx(ze,{className:"h-4 w-4"}):e.jsx(Ue,{className:"h-4 w-4"})})}),e.jsx(S,{className:"font-medium",children:t.name}),e.jsx(S,{children:m(t.type,t.unit_name)}),e.jsx(S,{children:N(t.fulfillment_type)}),e.jsx(S,{children:t.type==="selectable"?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm",children:"Multiple options"}),e.jsx(Xe,{className:"h-3 w-3 text-muted-foreground"})]}):c(t.price)}),e.jsx(S,{onClick:f=>f.stopPropagation(),children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(x,{variant:"ghost",size:"sm",onClick:d,className:"bg-secondary text-secondary-foreground",children:e.jsx(Me,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"sm",onClick:h,className:"bg-destructive text-destructive-foreground",children:e.jsx(Ee,{className:"h-4 w-4"})})]})})]}),n&&e.jsx(A,{children:e.jsx(S,{colSpan:6,className:"p-4 bg-muted/20",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description||"No description provided."})]}),t.type==="selectable"&&t.options?.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Available Options:"}),e.jsx("div",{className:"space-y-2",children:t.options.map((f,g)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-background border rounded",children:[e.jsx("span",{children:f.name}),e.jsx("span",{className:"font-medium",children:c(f.price)})]},g))})]})]})})},`${t.id}-details`)]}),Ke=({services:t,expandedRows:n,toggleRow:l,openEditModal:d,openDeleteModal:h,formatPrice:c,formatType:a,formatFulfillment:r,sortBy:m,sortDirection:N,handleSort:f,getTypeBadge:g,getFulfillmentBadge:F})=>{const C=({field:p,children:O})=>e.jsx(I,{className:"cursor-pointer",onClick:()=>f(p),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:O}),m===p&&e.jsx(Be,{className:`h-3 w-3 ${N==="asc"?"rotate-180":""}`})]})});return e.jsx("div",{className:"rounded-md border",children:e.jsxs(He,{children:[e.jsx(Le,{children:e.jsxs(A,{children:[e.jsx(I,{className:"w-8"}),e.jsx(C,{field:"name",children:"Name"}),e.jsx(C,{field:"type",children:"Type"}),e.jsx(C,{field:"fulfillment_type",children:"Fulfillment"}),e.jsx(C,{field:"price",children:"Price"}),e.jsx(I,{children:"Actions"})]})}),e.jsx($e,{children:t.length>0?t.map(p=>e.jsx(Je,{service:p,isExpanded:n.includes(p.id),onToggle:()=>l(p.id),onEdit:()=>d(p),onDelete:()=>h(p),formatPrice:c,formatType:a,formatFulfillment:r,getTypeBadge:g,getFulfillmentBadge:F},p.id)):e.jsx(A,{children:e.jsx(S,{colSpan:6,className:"text-center py-8",children:"No services found"})})})]})})},se=({data:t,setData:n,errors:l,addOption:d,removeOption:h,updateOption:c})=>e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(y,{htmlFor:"name",className:"text-right",children:"Name *"}),e.jsx(b,{id:"name",value:t.name,onChange:a=>n("name",a.target.value),className:"col-span-3"}),l.name&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:l.name})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(y,{htmlFor:"description",className:"text-right",children:"Description"}),e.jsx(b,{id:"description",value:t.description,onChange:a=>n("description",a.target.value),className:"col-span-3"}),l.description&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:l.description})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(y,{htmlFor:"type",className:"text-right",children:"Type *"}),e.jsxs(T,{value:t.type,onValueChange:a=>n("type",a),children:[e.jsx(D,{className:"col-span-3",children:e.jsx(k,{placeholder:"Select type"})}),e.jsxs(P,{children:[e.jsx(j,{value:"fixed",children:"Fixed Price"}),e.jsx(j,{value:"per_unit",children:"Per Unit"}),e.jsx(j,{value:"selectable",children:"Selectable Options"})]})]}),l.type&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:l.type})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(y,{htmlFor:"fulfillment_type",className:"text-right",children:"Fulfillment *"}),e.jsxs(T,{value:t.fulfillment_type,onValueChange:a=>n("fulfillment_type",a),children:[e.jsx(D,{className:"col-span-3",children:e.jsx(k,{placeholder:"Select fulfillment"})}),e.jsxs(P,{children:[e.jsx(j,{value:"direct",children:"Direct"}),e.jsx(j,{value:"staff_assisted",children:"Staff Assisted"})]})]}),l.fulfillment_type&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:l.fulfillment_type})]}),t.type==="fixed"&&e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(y,{htmlFor:"price",className:"text-right",children:"Price *"}),e.jsx(b,{id:"price",type:"number",min:"0",step:"0.01",value:t.price,onChange:a=>n("price",a.target.value),className:"col-span-3"}),l.price&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:l.price})]}),t.type==="per_unit"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(y,{htmlFor:"unit_name",className:"text-right",children:"Unit Name *"}),e.jsx(b,{id:"unit_name",value:t.unit_name,onChange:a=>n("unit_name",a.target.value),className:"col-span-3"}),l.unit_name&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:l.unit_name})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(y,{htmlFor:"price",className:"text-right",children:"Price per Unit *"}),e.jsx(b,{id:"price",type:"number",min:"0",step:"0.01",value:t.price,onChange:a=>n("price",a.target.value),className:"col-span-3"}),l.price&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:l.price})]})]}),t.type==="selectable"&&e.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[e.jsx(y,{className:"text-right pt-2",children:"Options *"}),e.jsxs("div",{className:"col-span-3 space-y-2",children:[t.options.map((a,r)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[e.jsx(b,{placeholder:"Option name",value:a.name,onChange:m=>c(r,"name",m.target.value),className:"col-span-5"}),e.jsx(b,{type:"number",placeholder:"Price",min:"0",step:"0.01",value:a.price,onChange:m=>c(r,"price",m.target.value),className:"col-span-5"}),e.jsx(x,{type:"button",variant:"outline",size:"sm",onClick:()=>h(r),disabled:t.options.length<=1,className:"col-span-2",children:e.jsx(le,{className:"h-4 w-4"})})]},r)),e.jsxs(x,{type:"button",variant:"outline",size:"sm",onClick:d,className:"mt-2",children:[e.jsx(te,{className:"h-4 w-4 mr-1"})," Add Option"]}),l.options&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.options})]})]})]}),Qe=({isOpen:t,onOpenChange:n,onConfirm:l,service:d})=>d?e.jsx(z,{open:t,onOpenChange:n,children:e.jsxs(B,{children:[e.jsxs(H,{children:[e.jsx(L,{children:"Confirm Deletion"}),e.jsxs($,{children:["Are you sure you want to delete the service"," ",e.jsx("strong",{children:d.name}),"? This action cannot be undone."]})]}),e.jsxs(V,{children:[e.jsx(x,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(x,{variant:"destructive",onClick:l,children:"Delete"})]})]})}):null,We=({paginationData:t,buildPaginationUrl:n})=>{const{from:l,to:d,total:h,prev_page_url:c,next_page_url:a}=t,r=m=>{m&&R.get(n(m),{},{preserveState:!0,replace:!0})};return e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",l," to ",d," of ",h," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>r(c),disabled:!c,children:"Previous"}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>r(a),disabled:!a,children:"Next"})]})]})};function Ye(){const{services:t,filters:n,flash:l}=we().props,[d,h]=u.useState(n.search||""),[c,a]=u.useState(n.type||"all"),[r,m]=u.useState(n.fulfillment_type||"all"),[N,f]=u.useState(n.sort_by||"created_at"),[g,F]=u.useState(n.sort_direction||"desc"),[C,p]=u.useState(!1),[O,U]=u.useState(!1),[ae,M]=u.useState(!1),[E,X]=u.useState(null),[ne,ie]=u.useState([]),{data:_,setData:w,post:ce,put:re,processing:q,errors:G,reset:oe,clearErrors:J}=Fe({name:"",description:"",type:"fixed",fulfillment_type:"direct",price:"",unit_name:"",options:[{name:"",price:""}]});u.useEffect(()=>{l?.success&&Y.success(l.success),l?.error&&Y.error(l.error)},[l]),u.useEffect(()=>{const s=setTimeout(()=>de(),500);return()=>clearTimeout(s)},[d,c,r,N,g]);const de=(s=1)=>{R.get(route("services.index"),{search:d,type:c==="all"?"":c,fulfillment_type:r==="all"?"":r,sort_by:N,sort_direction:g,page:s},{preserveState:!0,replace:!0})},me=s=>{f(s),F(g==="asc"?"desc":"asc")},pe=()=>{oe(),J(),p(!0)},xe=s=>{w({name:s.name,description:s.description||"",type:s.type,fulfillment_type:s.fulfillment_type,price:s.price||"",unit_name:s.unit_name||"",options:s.options||[{name:"",price:""}]}),J(),X(s),U(!0)},he=s=>{X(s),M(!0)},ue=s=>{s.preventDefault(),ce(route("services.store"),{onSuccess:()=>p(!1)})},je=s=>{s.preventDefault(),re(route("services.update",E.id),{onSuccess:()=>U(!1)})},fe=()=>{R.delete(route("services.destroy",E.id),{onSuccess:()=>M(!1)})},ge=()=>{h(""),a("all"),m("all"),f("created_at"),F("desc")},Ne=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(s||0),ve=s=>s==="per_unit"?"Per Unit":s.charAt(0).toUpperCase()+s.slice(1),ye=s=>s.split("_").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" "),be=s=>ie(o=>o.includes(s)?o.filter(i=>i!==s):[...o,s]),Se=(s,o)=>{let i="outline",v=s;switch(s){case"fixed":i="success",v="Fixed";break;case"per_unit":i="info",v=`Per Unit ${o?`(${o})`:""}`;break;case"selectable":i="warning",v="Selectable";break;default:v=s}return e.jsx(ee,{variant:i,className:"capitalize px-2 py-1 text-xs font-medium",children:v})},Ce=s=>{let o="outline",i=s;switch(s){case"direct":o="secondary",i="Direct";break;case"staff_assisted":o="primary",i="staff Assisted";break;default:i=s}return e.jsx(ee,{variant:o,className:"capitalize px-2 py-1 text-xs font-medium",children:i})},K=()=>w("options",[..._.options,{name:"",price:""}]),Q=s=>{_.options.length>1&&w("options",_.options.filter((o,i)=>i!==s))},W=(s,o,i)=>{const v=[..._.options];v[s][o]=i,w("options",v)},_e=s=>{if(!s)return null;const o=new URL(s),i=new URLSearchParams(o.search);return i.set("search",d),i.set("type",c==="all"?"":c),i.set("fulfillment_type",r==="all"?"":r),i.set("sort_by",N),i.set("sort_direction",g),`${o.pathname}?${i.toString()}`};return e.jsxs("div",{className:"container mx-auto py-2 px-4",children:[e.jsxs(Ae,{className:"mb-8",children:[e.jsx(qe,{onAddService:pe}),e.jsxs(Oe,{children:[e.jsx(Ge,{searchTerm:d,setSearchTerm:h,selectedType:c,setSelectedType:a,selectedFulfillment:r,setSelectedFulfillment:m,clearFilters:ge}),e.jsx(Ke,{services:t.data,expandedRows:ne,toggleRow:be,openEditModal:xe,openDeleteModal:he,getTypeBadge:Se,getFulfillmentBadge:Ce,formatPrice:Ne,formatType:ve,formatFulfillment:ye,sortBy:N,sortDirection:g,handleSort:me}),e.jsx(We,{paginationData:t,buildPaginationUrl:_e})]})]}),e.jsx(z,{open:C,onOpenChange:p,children:e.jsxs(B,{className:"sm:max-w-[600px]",children:[e.jsxs(H,{children:[e.jsx(L,{children:"Create New Service"}),e.jsx($,{children:"Add a new service to your offerings"})]}),e.jsxs("form",{onSubmit:ue,children:[e.jsx(se,{data:_,setData:w,errors:G,addOption:K,removeOption:Q,updateOption:W}),e.jsx(V,{children:e.jsx(x,{type:"submit",disabled:q,children:"Create Service"})})]})]})}),e.jsx(z,{open:O,onOpenChange:U,children:e.jsxs(B,{className:"sm:max-w-[600px]",children:[e.jsxs(H,{children:[e.jsx(L,{children:"Edit Service"}),e.jsx($,{children:"Update service information"})]}),e.jsxs("form",{onSubmit:je,children:[e.jsx(se,{data:_,setData:w,errors:G,addOption:K,removeOption:Q,updateOption:W}),e.jsx(V,{children:e.jsx(x,{type:"submit",disabled:q,children:"Update Service"})})]})]})}),e.jsx(Qe,{isOpen:ae,onOpenChange:M,onConfirm:fe,service:E})]})}Ye.layout=t=>e.jsx(Ie,{children:t});export{Ye as default};
