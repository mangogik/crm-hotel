import{j as e,r as u,u as pe,c as je,b as O}from"./app-CyNV4xla.js";import{a as $,b as z,c as U,C as k,d as V}from"./card-C7DOrj8d.js";import{S as ge,a as D,b as F,c as M,d as I,e as y,C as Ne,A as fe,D as L,g as Y,h as q,i as G,j as X,k as ve}from"./select-D1oHE82z.js";import{P as _e,T as be,t as Q}from"./index-lk-SwVZz.js";import{X as ye,d as Ce,H as Se,A as we}from"./AuthenticatedLayout-_OcRwaJT.js";import{B as j}from"./button-CxkxaUXA.js";import{P as ee}from"./plus-CY3rKiNZ.js";import{I as g,L as p}from"./index-BzOwoEwx.js";import{F as W}from"./funnel-C6VIQAg6.js";import{T as A,a as f,b as Re,c as Te,d as H,e as ke}from"./table-COKPj6eX.js";import{B as se}from"./badge-CLtzMiH2.js";import{I as De}from"./info-BEBk-Rpq.js";/* empty css            */import"./index-CDm6i81c.js";import"./index-DnOCixzh.js";const Fe=({onAddRoom:r})=>e.jsx($,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(z,{className:"text-2xl font-bold",children:"Rooms"}),e.jsx(U,{children:"Manage your hotel rooms"})]}),e.jsxs(j,{onClick:r,className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"})," Add Room"]})]})}),Me=({searchTerm:r,setSearchTerm:o,selectedStatus:m,setSelectedStatus:i,selectedType:c,setSelectedType:x,clearFilters:h})=>{const s=["all","Standard","Deluxe","Suite","Family Room","Penthouse"],l=["all","available","occupied","maintenance"];return e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(g,{placeholder:"Search by room number or type...",value:r,onChange:a=>o(a.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(D,{value:c,onValueChange:x,children:[e.jsxs(F,{className:"w-full md:w-[180px]",children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),e.jsx(M,{placeholder:"Room Type"})]}),e.jsx(I,{children:s.map(a=>e.jsx(y,{value:a,children:a==="all"?"All Types":a},a))})]}),e.jsxs(D,{value:m,onValueChange:i,children:[e.jsxs(F,{className:"w-full md:w-[180px]",children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),e.jsx(M,{placeholder:"Status"})]}),e.jsx(I,{children:l.map(a=>e.jsx(y,{value:a,className:"capitalize",children:a==="all"?"All Statuses":a},a))})]}),e.jsxs(j,{variant:"outline",onClick:h,className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"})," Clear"]})]})]})},Ie=({room:r,isExpanded:o,onToggle:m,onEdit:i,onDelete:c})=>{const x=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(s||0),h=s=>{switch(s){case"available":return"success";case"occupied":return"destructive";case"maintenance":return"warning";default:return"outline"}};return e.jsxs(e.Fragment,{children:[e.jsxs(A,{className:"cursor-pointer hover:bg-muted/50",onClick:m,children:[e.jsx(f,{children:e.jsx(j,{variant:"ghost",size:"sm",children:o?e.jsx(Ne,{className:"h-4 w-4"}):e.jsx(Ce,{className:"h-4 w-4"})})}),e.jsx(f,{className:"font-medium",children:r.room_number}),e.jsx(f,{children:r.room_type}),e.jsxs(f,{children:[r.capacity," People"]}),e.jsx(f,{children:x(r.price_per_night)}),e.jsx(f,{children:e.jsx(se,{variant:h(r.status),className:"capitalize",children:r.status})}),e.jsx(f,{onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(j,{variant:"ghost",size:"sm",onClick:i,className:"bg-secondary text-secondary-foreground",children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"sm",onClick:c,className:"bg-destructive text-destructive-foreground",children:e.jsx(be,{className:"h-4 w-4"})})]})})]}),o&&e.jsx(A,{children:e.jsx(f,{colSpan:7,className:"p-4 bg-muted/20",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No additional details for this room."})})},`${r.id}-details`)]})},Ae=({rooms:r,expandedRows:o,toggleRow:m,openEditModal:i,openDeleteModal:c,sortBy:x,sortDirection:h,handleSort:s})=>{const l=({field:a,children:C})=>e.jsx(H,{className:"cursor-pointer",onClick:()=>s(a),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:C}),x===a&&e.jsx(fe,{className:`h-3 w-3 ${h==="asc"?"":"rotate-180"}`})]})});return e.jsx("div",{className:"rounded-md border",children:e.jsxs(Re,{children:[e.jsx(Te,{children:e.jsxs(A,{children:[e.jsx(H,{className:"w-8"}),e.jsx(l,{field:"room_number",children:"Room Number"}),e.jsx(l,{field:"room_type",children:"Type"}),e.jsx(l,{field:"capacity",children:"Capacity"}),e.jsx(l,{field:"price_per_night",children:"Price/Night"}),e.jsx(l,{field:"status",children:"Status"}),e.jsx(H,{children:"Actions"})]})}),e.jsx(ke,{children:r.length>0?r.map(a=>e.jsx(Ie,{room:a,isExpanded:o.includes(a.id),onToggle:()=>m(a.id),onEdit:()=>i(a),onDelete:()=>c(a)},a.id)):e.jsx(A,{children:e.jsx(f,{colSpan:7,className:"text-center py-8",children:"No rooms found"})})})]})})},Z=({initialData:r=null,onSuccess:o,onCancel:m,onModeChange:i})=>{const[c,x]=u.useState(!1),h=!!r,{data:s,setData:l,post:a,put:C,processing:b,errors:n,reset:T}=pe({is_range:!1,room_number:r?.room_number||"",start_room:"",end_room:"",room_type:r?.room_type||"",capacity:r?.capacity||"",price_per_night:r?.price_per_night||"",status:r?.status||"available"});u.useEffect(()=>{i&&i(c)},[c,i]);const S=t=>{x(t),l("is_range",t),t?l("room_number",""):(l("start_room",""),l("end_room",""))},E=t=>{t.preventDefault(),h?C(route("rooms.update",r.id),{onSuccess:()=>{T(),o()}}):a(route("rooms.store"),{onSuccess:()=>{T(),o()}})},w=()=>{T(),m()},R=(()=>{if(!c||!s.start_room||!s.end_room)return 0;const t=s.start_room.match(/^([^\d]*)(\d+)$/),N=s.end_room.match(/^([^\d]*)(\d+)$/);if(t&&N&&t[1]===N[1]){const P=parseInt(t[2]),B=parseInt(N[2]);return Math.max(0,B-P+1)}return!isNaN(s.start_room)&&!isNaN(s.end_room)?Math.max(0,parseInt(s.end_room)-parseInt(s.start_room)+1):0})();return e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[!c&&e.jsxs(k,{children:[e.jsxs($,{className:"pb-4",children:[e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-5 w-5"}),"Single Room Creation"]}),e.jsx(U,{children:"Create a single room with custom specifications"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(p,{htmlFor:"room_number",className:"text-right",children:"Room Number *"}),e.jsx(g,{id:"room_number",value:s.room_number,onChange:t=>l("room_number",t.target.value),className:"col-span-3",placeholder:"e.g., 101, A201"}),n.room_number&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:n.room_number})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(p,{htmlFor:"room_type",className:"text-right",children:"Room Type *"}),e.jsx(g,{id:"room_type",value:s.room_type,onChange:t=>l("room_type",t.target.value),className:"col-span-3",placeholder:"e.g., Standard, Deluxe, Suite"}),n.room_type&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:n.room_type})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(p,{htmlFor:"capacity",className:"text-right",children:"Capacity *"}),e.jsx(g,{id:"capacity",type:"number",value:s.capacity,onChange:t=>l("capacity",t.target.value),className:"col-span-3",min:"1",placeholder:"Number of guests"}),n.capacity&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:n.capacity})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(p,{htmlFor:"price_per_night",className:"text-right",children:"Price per Night *"}),e.jsx(g,{id:"price_per_night",type:"number",value:s.price_per_night,onChange:t=>l("price_per_night",t.target.value),className:"col-span-3",min:"0",step:"0.01",placeholder:"0.00"}),n.price_per_night&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:n.price_per_night})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(p,{htmlFor:"status",className:"text-right",children:"Status *"}),e.jsxs(D,{value:s.status||"available",onValueChange:t=>l("status",t),children:[e.jsx(F,{className:"col-span-3",children:e.jsx(M,{placeholder:"Select status"})}),e.jsxs(I,{children:[e.jsx(y,{value:"available",children:"Available"}),e.jsx(y,{value:"occupied",children:"Occupied"}),e.jsx(y,{value:"maintenance",children:"Maintenance"})]})]}),n.status&&e.jsx("p",{className:"text-red-500 text-sm col-span-4 text-right",children:n.status})]})]})]}),c&&e.jsxs(k,{children:[e.jsxs($,{className:"pb-4",children:[e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),"Bulk Room Creation"]}),e.jsx(U,{children:"Create multiple rooms at once with the same specifications"})]}),e.jsx(V,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Room Number Range"}),R>0&&e.jsxs(se,{variant:"secondary",className:"text-xs",children:[R," rooms"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"start_room",className:"text-xs font-medium",children:"Start *"}),e.jsx(g,{id:"start_room",value:s.start_room,onChange:t=>l("start_room",t.target.value),className:"h-8 text-sm",placeholder:"e.g., 101"}),n.start_room&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.start_room})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"end_room",className:"text-xs font-medium",children:"End *"}),e.jsx(g,{id:"end_room",value:s.end_room,onChange:t=>l("end_room",t.target.value),className:"h-8 text-sm",placeholder:"e.g., 110"}),n.end_room&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.end_room})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Specifications"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"room_type",className:"text-xs font-medium",children:"Type *"}),e.jsx(g,{id:"room_type",value:s.room_type,onChange:t=>l("room_type",t.target.value),className:"h-8 text-sm",placeholder:"e.g., Standard"}),n.room_type&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.room_type})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"capacity",className:"text-xs font-medium",children:"Capacity *"}),e.jsx(g,{id:"capacity",type:"number",value:s.capacity,onChange:t=>l("capacity",t.target.value),className:"h-8 text-sm",min:"1",placeholder:"Guests"}),n.capacity&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.capacity})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"price_per_night",className:"text-xs font-medium",children:"Price *"}),e.jsx(g,{id:"price_per_night",type:"number",value:s.price_per_night,onChange:t=>l("price_per_night",t.target.value),className:"h-8 text-sm",min:"0",step:"0.01",placeholder:"0.00"}),n.price_per_night&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.price_per_night})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"status",className:"text-xs font-medium",children:"Status *"}),e.jsxs(D,{value:s.status||"available",onValueChange:t=>l("status",t),children:[e.jsx(F,{className:"h-8 text-sm",children:e.jsx(M,{placeholder:"Status"})}),e.jsxs(I,{children:[e.jsx(y,{value:"available",children:"Available"}),e.jsx(y,{value:"maintenance",children:"Maintenance"})]})]}),n.status&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.status})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-3 bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(De,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("h4",{className:"font-medium text-sm",children:"How it works"})]}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block mr-1",children:"•"}),e.jsx("span",{children:"All rooms will have the same specifications"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block mr-1",children:"•"}),e.jsx("span",{children:"Numbers generated sequentially"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block mr-1",children:"•"}),e.jsx("span",{children:"Existing rooms will be skipped"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block mr-1",children:"•"}),e.jsx("span",{children:"Initial status applied to all"})]})]}),e.jsxs("div",{className:"mt-3 text-xs",children:[e.jsx("p",{className:"font-medium text-muted-foreground",children:"Examples:"}),e.jsx("p",{className:"text-muted-foreground",children:"101-110, A201-A210, B301-B305"})]})]})]})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[!h&&e.jsxs(k,{className:"flex flex-row items-center space-x-2 p-2 rounded-lg",children:[e.jsx("span",{className:`text-sm ${c?"font-medium":"text-muted-foreground"}`,children:"Bulk Rooms"}),e.jsx("button",{type:"button",onClick:()=>S(!c),className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 bg-muted",role:"switch","aria-checked":c,children:e.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-background shadow ring-0 transition duration-200 ease-in-out ${c?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(j,{type:"button",variant:"outline",onClick:w,children:"Cancel"}),e.jsx(j,{type:"submit",disabled:b,children:b?"Saving...":h?"Update Room":"Create Room"})]})]})]})},Ee=({isOpen:r,onOpenChange:o,onConfirm:m,room:i})=>i?e.jsx(L,{open:r,onOpenChange:o,children:e.jsxs(Y,{children:[e.jsxs(q,{children:[e.jsx(G,{children:"Confirm Deletion"}),e.jsxs(X,{children:["Are you sure you want to delete Room ",e.jsx("strong",{children:i.room_number}),"? This action cannot be undone."]})]}),e.jsxs(ve,{children:[e.jsx(j,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(j,{variant:"destructive",onClick:m,children:"Delete"})]})]})}):null,Pe=({paginationData:r,buildPaginationUrl:o,router:m})=>{const{from:i,to:c,total:x,prev_page_url:h,next_page_url:s}=r,l=a=>{a&&m.get(o(a),{},{preserveState:!0,replace:!0})};return e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",i," to ",c," of ",x," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(j,{variant:"outline",size:"sm",onClick:()=>l(h),disabled:!h,children:"Previous"}),e.jsx(j,{variant:"outline",size:"sm",onClick:()=>l(s),disabled:!s,children:"Next"})]})]})};function Be(){const{rooms:r,filters:o,flash:m}=je().props,[i,c]=u.useState(o.search||""),[x,h]=u.useState(o.status||"all"),[s,l]=u.useState(o.room_type||"all"),[a,C]=u.useState(o.sort_by||"room_number"),[b,n]=u.useState(o.sort_direction||"asc"),[T,S]=u.useState(!1),[E,w]=u.useState(!1),[J,R]=u.useState(!1),[t,N]=u.useState(null),[P,B]=u.useState([]),[te,K]=u.useState(!1);u.useEffect(()=>{m?.success&&Q.success(m.success),m?.error&&Q.error(m.error)},[m]),u.useEffect(()=>{const d=setTimeout(()=>ae(1),500);return()=>clearTimeout(d)},[i,x,s,a,b]);const ae=(d=o.page||1)=>{O.get(route("rooms.index"),{search:i,status:x==="all"?"":x,room_type:s==="all"?"":s,sort_by:a,sort_direction:b,page:d},{preserveState:!0,replace:!0})},re=d=>{a===d?n(v=>v==="asc"?"desc":"asc"):(C(d),n("asc"))},le=()=>{K(!1),S(!0)},ne=d=>{N(d),w(!0)},oe=d=>{N(d),R(!0)},ce=()=>{S(!1)},ie=()=>{w(!1),N(null)},de=()=>{O.delete(route("rooms.destroy",t.id),{onSuccess:()=>{R(!1),N(null)}})},me=()=>{c(""),h("all"),l("all"),C("room_number"),n("asc")},xe=d=>B(v=>v.includes(d)?v.filter(_=>_!==d):[...v,d]),he=d=>{if(!d)return null;const v=new URL(d),_=new URLSearchParams(v.search);return _.set("search",i),_.set("status",x==="all"?"":x),_.set("room_type",s==="all"?"":s),_.set("sort_by",a),_.set("sort_direction",b),`${v.pathname}?${_.toString()}`},ue=d=>{K(d)};return e.jsxs("div",{className:"container mx-auto py-2 px-4",children:[e.jsxs(k,{className:"mb-8",children:[e.jsx(Fe,{onAddRoom:le}),e.jsxs(V,{children:[e.jsx(Me,{searchTerm:i,setSearchTerm:c,selectedStatus:x,setSelectedStatus:h,selectedType:s,setSelectedType:l,clearFilters:me}),e.jsx(Ae,{rooms:r.data,expandedRows:P,toggleRow:xe,openEditModal:ne,openDeleteModal:oe,sortBy:a,sortDirection:b,handleSort:re}),e.jsx(Pe,{paginationData:r,buildPaginationUrl:he,router:O})]})]}),e.jsx(L,{open:T,onOpenChange:S,children:e.jsxs(Y,{className:`${te?"sm:max-w-4xl":"sm:max-w-2xl"} max-h-[90vh] overflow-y-auto`,children:[e.jsxs(q,{children:[e.jsx(G,{children:"Create New Room"}),e.jsx(X,{children:"Add a new room to the hotel. You can create a single room or a range of rooms at once."})]}),e.jsx(Z,{onSuccess:ce,onCancel:()=>S(!1),onModeChange:ue})]})}),e.jsx(L,{open:E,onOpenChange:w,children:e.jsxs(Y,{className:"sm:max-w-2xl",children:[e.jsxs(q,{children:[e.jsx(G,{children:"Edit Room"}),e.jsx(X,{children:"Update the room details. Note: You cannot edit a range of rooms at once."})]}),e.jsx(Z,{initialData:t,onSuccess:ie,onCancel:()=>{w(!1),N(null)}})]})}),e.jsx(Ee,{isOpen:J,onOpenChange:R,onConfirm:de,room:t})]})}Be.layout=r=>e.jsx(we,{children:r});export{Be as default};
